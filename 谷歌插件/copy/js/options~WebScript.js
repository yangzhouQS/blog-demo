(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1215:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a}));var n={triggerWord:"",url:"",name:"",content:{js:"// you js",css:"/* you css */",html:'\n<html>\n  <head>\n    <title>标题</title>\n    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"><\/script>\n    \x3c!--  可在这里引入外联css，js--\x3e\n  </head>\n  <body>\n    \x3c!--  不要在这里写行内js --\x3e\n  </body>\n</html>'},height:"",defaultEnable:!1,canDelete:!0,enable:!0,createUser:"",createTime:dayjs().format("YYYY-MM-DD HH:mm:ss"),updateTime:"",type:"webPage"},a={height:500,tabSize:2,lineNumbers:!0,line:!0,indentWithTabs:!0,smartIndent:!0,autofocus:!1,hintOptions:{completeSingle:!1}}},1221:function(e,t,r){},123:function(e,t,r){var n=r(3),a=r(83),o=r(15),i=n("unscopables"),s=Array.prototype;null==s[i]&&o.f(s,i,{configurable:!0,value:a(null)}),e.exports=function(e){s[i][e]=!0}},1231:function(e,t,r){"use strict";r(1221)},1242:function(e,t,r){"use strict";r.r(t);r(97),r(77),r(226),r(399),r(57),r(266),r(98),r(44),r(58),r(37),r(173),r(61);var n=r(618),a=r(1215);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={name:"WebScript",data(){var e=this;return{rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],match:[{required:!0,trigger:"blur",validator:function(t,r,n){e.frameForm.content.match||n("请输入匹配规则!"),n()}}]},urlMode:"https://",frameForm:{name:"",pluginId:"",type:"inject",enable:!0,canDelete:!0,createUser:"",createTime:"",updateTime:"",content:{match:"",css:"",js:"",resources:[],version:"1.0.0",description:"",runAt:"document_idle"}},cssEditer:null,jsEditer:null}},created(){var e=this,t=this.$route.query.pluginId;t?this.getData(t).then((function(t){e.setData(t)})):(this.frameForm.pluginId=n.a.getPluginId(),this.reset())},methods:{deleteResource(e){this.frameForm.content.resources.splice(e,1)},addResource(){this.frameForm.content.resources.push("")},getData:e=>new Promise((function(t){chrome.storage.local.get(["insertTabsData"],(function(r){var n=r.insertTabsData||[];t(e?n.find((function(t){return t.pluginId===e})):n)}))})),handleOk(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.frameForm.content.match&&this.frameForm.name){var r=i(i({},this.frameForm),{},{content:i(i({},this.frameForm.content),{},{css:this.cssEditer.getValue(),js:this.jsEditer.getValue(),resources:this.frameForm.content.resources.filter((function(e){return e}))})}),n=!!this.$route.query.pluginId;this.getData().then((function(a){var o=a;if(n){var i=o.findIndex((function(e){return e.pluginId===r.pluginId}));o[i]=r}else o.unshift(r);chrome.storage.local.set({insertTabsData:o}),e.$message.success("".concat(n?"保存成功":"添加成功")),t&&e.$router.go(-1)})).catch((function(){e.$message.success("".concat(n?"保存失败":"添加失败"))}))}else this.$message.warning("请填写后提交")},setData(e){var t=this;this.frameForm=i(i(i({},this.frameForm),e),{},{content:i(i({},this.frameForm.content),e.content)}),this.$nextTick((function(){document.querySelector(".code-editer-wrap .CodeMirror")&&document.querySelector(".code-editer-wrap .CodeMirror").remove(),t.cssEditer=CodeMirror.fromTextArea(document.getElementById("css-code"),i({mode:"text/css"},a.a)),t.cssEditer.on("inputRead",(function(e,r){/^[a-zA-Z]/.test(r.text[0])&&t.cssEditer.showHint()})),t.jsEditer=CodeMirror.fromTextArea(document.getElementById("js-code"),i({mode:"javascript"},a.a)),t.jsEditer.on("inputRead",(function(e,r){/^[a-zA-Z]/.test(r.text[0])&&t.jsEditer.showHint()}))}))},reset(){this.setData({name:this.$route.query.name?decodeURIComponent(this.$route.query.name):"",type:"inject",enable:!0,canDelete:!0,createUser:"",createTime:dayjs().format("YYYY-MM-DD HH:mm:ss"),updateTime:"",content:{match:"",css:"/* Your code here... */ \n\n",js:"/* ".concat(this.frameForm.pluginId," */\n\n;(function(){\n    // Your code here...\n    \n})();"),resources:[],runAt:"document_idle",version:"1.0.0"}})}}},u=(r(1231),r(22)),l=Object(u.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"web-scripts"},[r("a-form-model",{attrs:{rules:e.rules,model:e.frameForm,layout:"horizontal","label-col":{span:5},"wrapper-col":{span:19,offset:0}}},[r("a-form-model-item",{attrs:{label:"启用"}},[r("a-switch",{attrs:{size:"small"},model:{value:e.frameForm.enable,callback:function(t){e.$set(e.frameForm,"enable",t)},expression:"frameForm.enable"}})],1),e._v(" "),r("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[r("a-input",{staticStyle:{width:"400px"},model:{value:e.frameForm.name,callback:function(t){e.$set(e.frameForm,"name",t)},expression:"frameForm.name"}})],1),e._v(" "),r("a-form-model-item",{attrs:{label:"规则",prop:"match"}},[r("a-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",rows:"10"},model:{value:e.frameForm.content.match,callback:function(t){e.$set(e.frameForm.content,"match",t)},expression:"frameForm.content.match"}}),e._v(" "),r("div",[e._v("例如 "),r("b",[e._v("*://*.csdn.net/* ")]),e._v(", 多个规则请换行输入")])],1),e._v(" "),r("a-form-model-item",{attrs:{label:"脚本执行时机"}},[r("a-select",{staticStyle:{width:"190px"},model:{value:e.frameForm.content.runAt,callback:function(t){e.$set(e.frameForm.content,"runAt",t)},expression:"frameForm.content.runAt"}},[r("a-select-option",{attrs:{value:"document_idle"}},[e._v("\n          默认(document_idle)\n        ")]),e._v(" "),r("a-select-option",{attrs:{value:"document_start"}},[e._v("\n          document_start\n        ")]),e._v(" "),r("a-select-option",{attrs:{value:"document_end"}},[e._v("\n          document_end\n        ")])],1)],1),e._v(" "),r("a-form-model-item",{attrs:{label:"脚本注入"}},[r("a-tabs",{attrs:{"default-active-key":"css",size:"small"}},[r("a-tab-pane",{key:"css",attrs:{tab:"CSS",forceRender:!0}},[r("div",{staticClass:"code-editer-wrap"},[r("textarea",{attrs:{id:"css-code",cols:"30",rows:"10"},domProps:{value:e.frameForm.content.css}})])]),e._v(" "),r("a-tab-pane",{key:"js",attrs:{tab:"JS",forceRender:!0}},[r("div",{staticClass:"code-editer-wrap"},[r("textarea",{attrs:{id:"js-code",cols:"30",rows:"10"},domProps:{value:e.frameForm.content.js}})])]),e._v(" "),r("a-tab-pane",{key:"resource",attrs:{tab:"外部资源",forceRender:!0}},[r("div",{staticClass:"load-resource-view"},[r("a-button",{attrs:{type:"primary"},on:{click:e.addResource}},[e._v("添加资源")]),e._v(" "),r("ul",e._l(e.frameForm.content.resources,(function(t,n){return r("li",{key:n},[r("a-input",{attrs:{allowClear:"",placeholder:"请输入外部资源链接"},model:{value:e.frameForm.content.resources[n],callback:function(t){e.$set(e.frameForm.content.resources,n,t)},expression:"frameForm.content.resources[index]"}}),e._v(" "),r("a-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteResource(n)}}},[e._v("删除")])],1)})),0)],1)])],1)],1),e._v(" "),r("div",{staticStyle:{"text-align":"right"}},[r("a-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),e._v(" "),r("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.handleOk(0)}}},[e._v("应用")]),e._v(" "),r("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.handleOk()}}},[e._v("保存")])],1)],1)],1)}),[],!1,null,null,null);t.default=l.exports},173:function(e,t,r){"use strict";var n=r(95),a=r(8),o=r(13),i=r(21),s=r(114),c=r(96);n("match",1,(function(e,t,r){return[function(t){var r=i(this),n=null==t?void 0:t[e];return void 0!==n?n.call(t,r):new RegExp(t)[e](String(r))},function(e){var n=r(t,e,this);if(n.done)return n.value;var i=a(e),u=String(this);if(!i.global)return c(i,u);var l=i.unicode;i.lastIndex=0;for(var m,d=[],f=0;null!==(m=c(i,u));){var p=String(m[0]);d[f]=p,""===p&&(i.lastIndex=s(u,o(i.lastIndex),l)),f++}return 0===f?null:d}]}))},226:function(e,t,r){"use strict";var n=r(7),a=r(32).find,o=r(123),i=r(20),s=!0,c=i("find");"find"in[]&&Array(1).find((function(){s=!1})),n({target:"Array",proto:!0,forced:s||!c},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),o("find")},266:function(e,t,r){"use strict";var n=r(7),a=r(94),o=r(33),i=r(13),s=r(25),c=r(106),u=r(93),l=r(68),m=r(20),d=l("splice"),f=m("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min;n({target:"Array",proto:!0,forced:!d||!f},{splice:function(e,t){var r,n,l,m,d,f,v=s(this),b=i(v.length),g=a(e,b),y=arguments.length;if(0===y?r=n=0:1===y?(r=0,n=b-g):(r=y-2,n=h(p(o(t),0),b-g)),b+r-n>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(l=c(v,n),m=0;m<n;m++)(d=g+m)in v&&u(l,m,v[d]);if(l.length=n,r<n){for(m=g;m<b-n;m++)f=m+r,(d=m+n)in v?v[f]=v[d]:delete v[f];for(m=b;m>b-n+r;m--)delete v[m-1]}else if(r>n)for(m=b-n;m>g;m--)f=m+r-1,(d=m+n-1)in v?v[f]=v[d]:delete v[f];for(m=0;m<r;m++)v[m+g]=arguments[m+2];return v.length=b-n+r,l}})},399:function(e,t,r){"use strict";var n=r(7),a=r(32).findIndex,o=r(123),i=r(20),s=!0,c=i("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){s=!1})),n({target:"Array",proto:!0,forced:s||!c},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),o("findIndex")},618:function(e,t,r){"use strict";r(97),r(73),r(77),r(57),r(105),r(256),r(148),r(98),r(44),r(188),r(37),r(139),r(78),r(147),r(257),r(187),r(61);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=function(e){for(var t=[],r=["0","1","2","3","4","5","6","7","8","9"],n=0;n<e;n++){var a=Math.floor(10*Math.random());t[n]=r[a]}return t.join("")};t.a={parseLines:function(e){return e.replace(/\\\n/g,"").split("\n").map((function(e){return e.trim()})).filter((function(e){return e.length>0}))},parseToTxt:function(e){return""},hasFullUrlPrefix:function(e){return new RegExp("^[a-z][-+.a-z0-9]{2,}://.").test(e)},hasJavascriptPrefix:function(e){return e.startsWith("javascript:")},urlParamsToObj:function(e){var t={};return e.replace(/([^?&=]+)=([^?&=]+)/g,(function(){t[arguments[1]]=arguments[2]})),t},objToUrlParams:function(e){var t="";return $.each(e,(function(r){t+="&"+r+"="+e[r]})),t.substr(1)},parseKeyValue:e=>"Array"!==Object.prototype.toString.call(e).slice(8,-1)?[]:e.reduce((function(e,t){var r=t.replace(/\s+/g,"").split(":"),n=r[0],o=r[1].split(",").reduce((function(e,t){return e?a(a({},e),{},{[t]:n}):{[t]:n}}),"");return e?a(a({},e),o):o}),""),getPluginId:e=>"CSDNPlugin-".concat(e?e+"_":"").concat(i(8),"-").concat(+new Date,"-").concat(i(8))}}}]);