(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1215:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a}));var n={triggerWord:"",url:"",name:"",content:{js:"// you js",css:"/* you css */",html:'\n<html>\n  <head>\n    <title>标题</title>\n    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"><\/script>\n    \x3c!--  可在这里引入外联css，js--\x3e\n  </head>\n  <body>\n    \x3c!--  不要在这里写行内js --\x3e\n  </body>\n</html>'},height:"",defaultEnable:!1,canDelete:!0,enable:!0,createUser:"",createTime:dayjs().format("YYYY-MM-DD HH:mm:ss"),updateTime:"",type:"webPage"},a={height:500,tabSize:2,lineNumbers:!0,line:!0,indentWithTabs:!0,smartIndent:!0,autofocus:!1,hintOptions:{completeSingle:!1}}},1222:function(e,t,r){},1232:function(e,t,r){"use strict";r(1222)},1241:function(e,t,r){"use strict";r.r(t);r(97),r(77),r(226),r(399),r(57),r(196),r(98),r(61);var n=r(193),a=r.n(n),o=r(618),i=r(1215);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m={name:"WebPages",data:()=>({rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},frameForm:i.b,editerHtml:null,editerCss:null,editerJs:null,pluginId:""}),created(){var e=this.$route.query.pluginId;e?this.getData(e):this.reset()},methods:{handleHtmlCodeChange(e){if(this.pluginId="","page"===e){var t,r,n,a={name:this.frameForm.name,content:{html:null===(t=this.editerHtml)||void 0===t?void 0:t.getValue(),js:(null===(r=this.editerJs)||void 0===r?void 0:r.getValue())||i.b.content.js,css:(null===(n=this.editerCss)||void 0===n?void 0:n.getValue())||i.b.content.css}};this.pluginId="edit",this.$bgSettings.set("editPagesData",a),setTimeout((function(){document.getElementById("edit-page-iframe").contentWindow.location.reload(!0)}))}},getWebPagesMap(){return a()(this.$bgSettings.get("webPagesMap"))||[]},getData(e){var t=this.getWebPagesMap();this.setData(t.find((function(t){return t.pluginId===e}))||i.b)},setData(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.frameForm=a()(t),this.$nextTick((function(){document.querySelector(".code-editer-wrap .CodeMirror")&&document.querySelector(".code-editer-wrap .CodeMirror").remove(),e.editerHtml=CodeMirror.fromTextArea(document.getElementById("code-html"),l({mode:{name:"htmlmixed",scriptTypes:[{matches:/\/x-handlebars-template|\/x-mustache/i,mode:null},{matches:/(text|application)\/(x-)?vb(a|script)/i,mode:"vbscript"}]},selectionPointer:!0},i.a)),e.editerCss=CodeMirror.fromTextArea(document.getElementById("code-css"),l({mode:"text/css"},i.a)),e.editerJs=CodeMirror.fromTextArea(document.getElementById("code-js"),l({mode:"text/javascript"},i.a)),e.editerJs.on("inputRead",(function(t,r){/^[a-zA-Z]/.test(r.text[0])&&e.editerJs.showHint()})),e.editerCss.on("inputRead",(function(t,r){/^[a-zA-Z]/.test(r.text[0])&&e.editerCss.showHint()})),e.editerHtml.on("inputRead",(function(t,r){/^[a-zA-Z]/.test(r.text[0])&&e.editerHtml.showHint()}))}))},reset(){this.setData(l(l({},i.b),{},{name:this.$route.query.name?decodeURIComponent(this.$route.query.name):""}))},handleOk(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.frameForm.name){var t=this.getWebPagesMap();console.log(this.frameForm,"this.frameForm");var r=Object.assign({},this.frameForm,{content:{css:this.editerCss.getValue(),js:this.editerJs.getValue(),html:this.editerHtml.getValue()}});if(r.pluginId){var n=t.findIndex((function(e){return e.pluginId===r.pluginId}));t[n]=r}else r.pluginId=o.a.getPluginId("webPages"),r.url=chrome.runtime.getURL("pages/dynamicPlugin.html?pluginId=")+r.pluginId,console.log(r,"curData"),t.unshift(r);this.$bgSettings.set("webPagesMap",t),this.$message.success("保存成功"),e&&this.$router.go(-1)}else this.$message.warning("请填写后提交")}}},u=(r(1232),r(22)),d=Object(u.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"web-pages"},[r("a-form-model",{attrs:{rules:e.rules,layout:"horizontal","label-col":{span:5},"wrapper-col":{span:19,offset:0}}},[r("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[r("a-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入名称"},model:{value:e.frameForm.name,callback:function(t){e.$set(e.frameForm,"name",t)},expression:"frameForm.name"}})],1),e._v(" "),r("a-form-model-item",{attrs:{label:"触发词",prop:"triggerWord"}},[r("a-input",{staticStyle:{width:"190px"},attrs:{placeholder:"请输入触发词"},model:{value:e.frameForm.triggerWord,callback:function(t){e.$set(e.frameForm,"triggerWord",t)},expression:"frameForm.triggerWord"}})],1),e._v(" "),r("a-form-model-item",{attrs:{label:"高度"}},[r("a-input",{staticStyle:{width:"190px"},attrs:{placeholder:"请输入高度"},model:{value:e.frameForm.height,callback:function(t){e.$set(e.frameForm,"height",t)},expression:"frameForm.height"}})],1),e._v(" "),r("a-form-model-item",{attrs:{label:"立即触发"}},[r("a-switch",{attrs:{size:"small"},model:{value:e.frameForm.defaultEnable,callback:function(t){e.$set(e.frameForm,"defaultEnable",t)},expression:"frameForm.defaultEnable"}}),e._v(" "),r("span",{staticStyle:{"margin-left":"10px"}},[e._v("(是否在输入触发词后立即打开)")]),e._v(" "),r("p",{staticStyle:{"line-height":"20px"}},[e._v("\n        例如输入“ip”，会立即打开页面"),r("br"),e._v("\n        关闭后将只识别“ip xxx.xxx.xxx.xxx”\n      ")])],1),e._v(" "),r("a-form-model-item",{attrs:{label:" ",colon:!1}},[r("div",{staticClass:"code"},[r("a-tabs",{attrs:{"default-active-key":"html",size:"small"},on:{change:function(t){return e.handleHtmlCodeChange(t)}}},[r("a-tab-pane",{key:"html",attrs:{tab:"HTML",forceRender:!0}},[r("div",{staticClass:"code-editer-wrap"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.frameForm.content.html,expression:"frameForm.content.html"}],attrs:{id:"code-html",name:"code-html"},domProps:{value:e.frameForm.content.html},on:{input:function(t){t.target.composing||e.$set(e.frameForm.content,"html",t.target.value)}}})])]),e._v(" "),r("a-tab-pane",{key:"css",attrs:{tab:"css",forceRender:!0}},[r("div",{staticClass:"code-editer-wrap"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.frameForm.content.css,expression:"frameForm.content.css"}],attrs:{id:"code-css",name:"code-css"},domProps:{value:e.frameForm.content.css},on:{input:function(t){t.target.composing||e.$set(e.frameForm.content,"css",t.target.value)}}})])]),e._v(" "),r("a-tab-pane",{key:"js",attrs:{tab:"js",forceRender:!0}},[r("div",{staticClass:"code-editer-wrap"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.frameForm.content.js,expression:"frameForm.content.js"}],attrs:{id:"code-js",name:"code-js"},domProps:{value:e.frameForm.content.js},on:{input:function(t){t.target.composing||e.$set(e.frameForm.content,"js",t.target.value)}}})])]),e._v(" "),r("a-tab-pane",{key:"page",attrs:{tab:"预览"}},[r("div",{staticClass:"code-editer-wrap"},[e.pluginId?r("iframe",{attrs:{name:"result",allowfullscreen:"allowfullscreen",sandbox:"allow-forms allow-popups allow-scripts allow-same-origin allow-modals",frameborder:"0",id:"edit-page-iframe",src:"/pages/dynamicPlugin.html?pluginId="+e.pluginId}}):e._e()])])],1)],1)]),e._v(" "),r("div",{staticStyle:{"text-align":"right"}},[r("a-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),e._v(" "),r("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.handleOk(0)}}},[e._v("应用")]),e._v(" "),r("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.handleOk()}}},[e._v("保存")])],1)],1)],1)}),[],!1,null,null,null);t.default=d.exports},618:function(e,t,r){"use strict";r(97),r(73),r(77),r(57),r(105),r(256),r(148),r(98),r(44),r(188),r(37),r(139),r(78),r(147),r(257),r(187),r(61);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=function(e){for(var t=[],r=["0","1","2","3","4","5","6","7","8","9"],n=0;n<e;n++){var a=Math.floor(10*Math.random());t[n]=r[a]}return t.join("")};t.a={parseLines:function(e){return e.replace(/\\\n/g,"").split("\n").map((function(e){return e.trim()})).filter((function(e){return e.length>0}))},parseToTxt:function(e){return""},hasFullUrlPrefix:function(e){return new RegExp("^[a-z][-+.a-z0-9]{2,}://.").test(e)},hasJavascriptPrefix:function(e){return e.startsWith("javascript:")},urlParamsToObj:function(e){var t={};return e.replace(/([^?&=]+)=([^?&=]+)/g,(function(){t[arguments[1]]=arguments[2]})),t},objToUrlParams:function(e){var t="";return $.each(e,(function(r){t+="&"+r+"="+e[r]})),t.substr(1)},parseKeyValue:e=>"Array"!==Object.prototype.toString.call(e).slice(8,-1)?[]:e.reduce((function(e,t){var r=t.replace(/\s+/g,"").split(":"),n=r[0],o=r[1].split(",").reduce((function(e,t){return e?a(a({},e),{},{[t]:n}):{[t]:n}}),"");return e?a(a({},e),o):o}),""),getPluginId:e=>"CSDNPlugin-".concat(e?e+"_":"").concat(i(8),"-").concat(+new Date,"-").concat(i(8))}}}]);