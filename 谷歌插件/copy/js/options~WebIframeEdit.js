(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1220:function(e,r,t){},123:function(e,r,t){var n=t(3),a=t(83),i=t(15),o=n("unscopables"),s=Array.prototype;null==s[o]&&i.f(s,o,{configurable:!0,value:a(null)}),e.exports=function(e){s[o][e]=!0}},1230:function(e,r,t){"use strict";t(1220)},1243:function(e,r,t){"use strict";t.r(r);t(97),t(77),t(399),t(57),t(67),t(105),t(256),t(196),t(98),t(37),t(61);var n=t(618);function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){o(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var s={data:()=>({rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],triggerWord:[{required:!0,message:"请输入触发词",trigger:"blur"},{min:2,max:10,message:"触发词长度需2～10个字符",trigger:"blur"}],url:[{required:!0,message:"请输入URL",trigger:"blur"}]},frameForm:{triggerWord:"",url:"",name:"",height:"",enable:!0,defaultEnable:!1,canDelete:!0,placeholder:"",css:""},currentEditIndex:null,editer:null}),created(){var e=this.$route.query.triggerWord;e?this.getData(e):this.reset()},methods:{getData(e){var r=this.$bgSettings.get("iframeMap"),t=Object.keys(r).map((function(e){return i(i({},r[e]),{},{triggerWord:e})})),n=t.findIndex((function(r){return r.triggerWord===e}));this.setData(t[n]),this.currentEditIndex=n},setData(e){var r=this;this.frameForm=i(i({},e),{},{url:e.url}),this.$nextTick((function(){document.querySelector(".code-editer-wrap .CodeMirror")&&document.querySelector(".code-editer-wrap .CodeMirror").remove(),r.editer=CodeMirror.fromTextArea(document.getElementById("css-code"),{mode:"text/css",height:"400px"})}))},reset(){this.setData({triggerWord:"",url:"",name:this.$route.query.name?decodeURIComponent(this.$route.query.name):"",css:"",height:"",canDelete:!0,enable:!0,createTime:dayjs().format("YYYY-MM-DD HH:mm:ss"),defaultEnable:!1,placeholder:""})},handleOk(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.frameForm.triggerWord&&this.frameForm.url&&this.frameForm.name){var r=this.$bgSettings.get("iframeMap"),t=this.frameForm.url,a=Object.assign({},this.frameForm,{css:this.editer.getValue(),url:/^(http|https)/.exec(t)?t:"https://"+t}),o=n.a.parseLines(this.$bgSettings.get("presupposition"));if(Object.keys(n.a.parseKeyValue(o)).indexOf(a.triggerWord)>-1)this.$message.warning("与工具触发词冲突, 请更换触发词");else{var s=Object.keys(r).map((function(e){return i(i({},r[e]),{},{triggerWord:e})}));null!==this.currentEditIndex?s[this.currentEditIndex]=a:s.unshift(a),this.saveFrameConfig(s),e&&this.$router.go(-1)}}else this.$message.warning("请填写后提交")},saveFrameConfig(e){var r=e.reduce((function(e,r){return e?i(i({},e),{},{[r.triggerWord]:r}):{[r.triggerWord]:r}}),"");this.$bgSettings.set("iframeMap",r),this.$message.success("保存成功")}}},c=(t(1230),t(22)),l=Object(c.a)(s,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("a-form-model",{attrs:{rules:e.rules,model:e.frameForm,layout:"horizontal","label-col":{span:5},"wrapper-col":{span:19,offset:0}}},[t("a-form-model-item",{attrs:{label:"启用"}},[t("a-switch",{attrs:{size:"small"},model:{value:e.frameForm.enable,callback:function(r){e.$set(e.frameForm,"enable",r)},expression:"frameForm.enable"}})],1),e._v(" "),t("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[t("a-input",{staticStyle:{width:"400px"},model:{value:e.frameForm.name,callback:function(r){e.$set(e.frameForm,"name",r)},expression:"frameForm.name"}})],1),e._v(" "),t("a-form-model-item",{attrs:{label:"触发词",prop:"triggerWord"}},[t("a-input",{staticStyle:{width:"190px"},model:{value:e.frameForm.triggerWord,callback:function(r){e.$set(e.frameForm,"triggerWord",r)},expression:"frameForm.triggerWord"}})],1),e._v(" "),t("a-form-model-item",{attrs:{label:"URL",prop:"url"}},[t("a-input",{staticStyle:{width:"80%"},model:{value:e.frameForm.url,callback:function(r){e.$set(e.frameForm,"url",r)},expression:"frameForm.url"}})],1),e._v(" "),t("a-form-model-item",{attrs:{label:"CSS"}},[t("div",{staticClass:"code-editer-wrap"},[t("textarea",{attrs:{id:"css-code",cols:"30",rows:"10"},domProps:{value:e.frameForm.css}})])]),e._v(" "),t("a-form-model-item",{attrs:{label:"高度"}},[t("a-input",{staticStyle:{width:"190px"},model:{value:e.frameForm.height,callback:function(r){e.$set(e.frameForm,"height",r)},expression:"frameForm.height"}})],1),e._v(" "),t("a-form-model-item",{attrs:{label:"立即触发"}},[t("a-switch",{attrs:{size:"small"},model:{value:e.frameForm.defaultEnable,callback:function(r){e.$set(e.frameForm,"defaultEnable",r)},expression:"frameForm.defaultEnable"}}),e._v(" "),t("span",{staticStyle:{"margin-left":"10px"}},[e._v("(是否在输入触发词后立即打开)")]),e._v(" "),t("p",{staticStyle:{"line-height":"20px"}},[e._v("\n        例如输入“ip”，会立即打开页面"),t("br"),e._v("\n        关闭后将只识别“ip xxx.xxx.xxx.xxx”\n      ")])],1),e._v(" "),t("div",{staticStyle:{"text-align":"right"}},[t("a-button",{on:{click:function(r){return e.$router.go(-1)}}},[e._v("取消")]),e._v(" "),t("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(r){return e.handleOk(0)}}},[e._v("应用")]),e._v(" "),t("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(r){return e.handleOk()}}},[e._v("保存")])],1)],1)],1)}),[],!1,null,null,null);r.default=l.exports},196:function(e,r,t){var n=t(7),a=t(211);n({target:"Object",stat:!0,forced:Object.assign!==a},{assign:a})},211:function(e,r,t){"use strict";var n=t(12),a=t(5),i=t(113),o=t(115),s=t(99),c=t(25),l=t(74),u=Object.assign,f=Object.defineProperty;e.exports=!u||a((function(){if(n&&1!==u({b:1},u(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},r={},t=Symbol();return e[t]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),7!=u({},e)[t]||"abcdefghijklmnopqrst"!=i(u({},r)).join("")}))?function(e,r){for(var t=c(e),a=arguments.length,u=1,f=o.f,m=s.f;a>u;)for(var d,p=l(arguments[u++]),g=f?i(p).concat(f(p)):i(p),b=g.length,h=0;b>h;)d=g[h++],n&&!m.call(p,d)||(t[d]=p[d]);return t}:u},399:function(e,r,t){"use strict";var n=t(7),a=t(32).findIndex,i=t(123),o=t(20),s=!0,c=o("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){s=!1})),n({target:"Array",proto:!0,forced:s||!c},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i("findIndex")},618:function(e,r,t){"use strict";t(97),t(73),t(77),t(57),t(105),t(256),t(148),t(98),t(44),t(188),t(37),t(139),t(78),t(147),t(257),t(187),t(61);function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?n(Object(t),!0).forEach((function(r){i(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function i(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var o=function(e){for(var r=[],t=["0","1","2","3","4","5","6","7","8","9"],n=0;n<e;n++){var a=Math.floor(10*Math.random());r[n]=t[a]}return r.join("")};r.a={parseLines:function(e){return e.replace(/\\\n/g,"").split("\n").map((function(e){return e.trim()})).filter((function(e){return e.length>0}))},parseToTxt:function(e){return""},hasFullUrlPrefix:function(e){return new RegExp("^[a-z][-+.a-z0-9]{2,}://.").test(e)},hasJavascriptPrefix:function(e){return e.startsWith("javascript:")},urlParamsToObj:function(e){var r={};return e.replace(/([^?&=]+)=([^?&=]+)/g,(function(){r[arguments[1]]=arguments[2]})),r},objToUrlParams:function(e){var r="";return $.each(e,(function(t){r+="&"+t+"="+e[t]})),r.substr(1)},parseKeyValue:e=>"Array"!==Object.prototype.toString.call(e).slice(8,-1)?[]:e.reduce((function(e,r){var t=r.replace(/\s+/g,"").split(":"),n=t[0],i=t[1].split(",").reduce((function(e,r){return e?a(a({},e),{},{[r]:n}):{[r]:n}}),"");return e?a(a({},e),i):i}),""),getPluginId:e=>"CSDNPlugin-".concat(e?e+"_":"").concat(o(8),"-").concat(+new Date,"-").concat(o(8))}}}]);