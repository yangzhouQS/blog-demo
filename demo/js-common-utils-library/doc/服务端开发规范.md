### 开发规范

#### 命名规范

##### 数据库命名规范

1. 表命名规范

```
  示例： g_table_name  
  g_  全局公共表名称
  c_  常用库表名称
  q_  实物量管控表名称
  m_  账务管控表名称
  z_  周转材料表名称
  t_  中间缓存表名称

  ```
2. 列名称规范

  ```
  
  
  继承列（所有表具有）
  id     主键  
  creator_id 添加人主键
  creator_name 添加人
  created_at 添加时间
  modifier_id 修改人主键
  modifier_name 修改人
  updated_at 修改时间
  is_removed 是否删除
  version 版本号
  
  按需使用
  sort_code 排序
  is_active 状态
  is_static 是否静态
  org_id  组织机构主键 （业务表具有）
  order_id 主表主键 （主从明细表具有）

  树形表具有
  parent_id 父节点主键
  full_id 节点主键链
  full_name 节点名称链
  level 层级
  is_leaf 子节点

  材料信息相关列
  material_id 材料唯一标识
  material_code 材料编码
  material_name 材料名称
  material_model 规格型号
  material_unit 单位名称
  class_id 类别主键
  class_full_id 类别主键链

  对接列
  ori_org_id 对接第三方组织主键
  ori_class_id 对接第三方材料类别主键
  ori_material_id 对接第三方材料信息主键
  ori_supplier_id 对接第三方供应商主键
  ori_labour_id 对接第三方用料单位主键
  ori_gh_id 对接第三方工号主键
  ori_order_id 对接第三方单据主键
  ori_item_id

  ```
3. 脚本语法规范

   脚本都按小写命名   
   带org_id表设置成复合主键，org_id为第一列     
   同时创建每张表对应的事务数据库表 __trans_id STRING 为第一列，和原始表主键设置成复合主键 __action STRING为最后一列       


 ##### 服务端规范

 1. 文件名命名

 model 层
 
 基于数据库表名称 `_` 替换为 `-` 
 
 > 示例：c_gh => c-gh.js
 
 service 层

 基于数据库表名称 `_` 替换为 `-` +`-service` 
 
 > 示例：c_gh => c-gh-service.js

 router 层

  如果api数量过大建议分多个路由文件

  命名规则基于数据库表名称 `_` 替换为 `-` +`-route` 


2.函数命名

  规则：小驼峰   
 > 示例 getUserName()

3.变量名称   

  规则：小驼峰   
 > 示例  userName

4.api命名规范

 api路径全小写

```js

.get('items', Func) // 根据指定条件获取列表
.get('items/:id', Func) // 根据ID获取单条信息
.get('items/:id/:orgid', Func) // 根据双主键获取单条信息
.post('items-params', Func) //根据条件获取列表信息 
.get('items-bulking', Func) //增量获取数据  参数说明 limit: 15,  //增量获取的条目数 缺省时默认值为200 orgId: 123, //组织机构ID  version: 123


.post('items', Func) // 添加单条数据
.post('items-bulking', Func) // 添加多条数据
.put('items/:id', Func)  // 修改单条信息
.delete('items/:id', Func) // 删除单条信息
.delete('items/:id/:orgid', Func) // 删除单条信息

```

5. 服务层命名

```
  queryItems 根据指定条件获取列表
  getItem 根据ID获取单条信息
  queryItemsParams 根据条件获取列表信息
  queryItemsBulking 增量获取数据 
  
  createItem 添加单条数据
  createItems 添加多条数据
  updateItem 修改单条信息
  deleteItem 删除单条信息

```
6. 生产者和消费者id命名   
```yaml
producerId：'PID_YL_PROD_'+产品名简写(MQANTITY)   
consumerId: 'CID_YL_PROD_'+tags名称(WEIGHT或者PDA)
PROD
DEV
TEST
```

