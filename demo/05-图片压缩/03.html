<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<input type="file" id="file"/>
<script>
  const objFile = document.getElementById('file')
  objFile.onchange = async function () {
    const file = this.files[0]
    const d = await getObjectURL(file)
    console.log(d)
  }

  function getObjectURL(file) {
    return new Promise((resolve, reject) => {
      if (window.FileReader) {
        const reader = new FileReader()
        reader.readAsDataURL(file)
        // 监听文件读取结束后事件
        reader.onloadend = function (e) {
          let a = (e.target.result || '').match(/:(.*?);/)[1]
          console.log(a)
          debugger
          resolve({
            success: true,
            message: '解析成功',
            url: e.target.result,
            type: (e.target.result || '').match(/:(.*?);/)[1]
          })
        }
      } else {
        resolve({
          success: false,
          message: '浏览器版本较低'
        })
      }
    })
  }
</script>
</body>
</html>
