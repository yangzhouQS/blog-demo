/*! Cheetah Grid v0.23.0-beta.1 | license MIT */
(function(e){var t,o;t=e,o=function(){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=75)}([function(t,o,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.emptyFn=o.style=o.event=o.str=o.obj=o.browser=o.cellInRange=o.cellEquals=o.array=o.then=o.getIgnoreCase=o.getOrApply=o.applyChainSafe=o.getChainSafe=o.isDescendantElement=o.isNode=o.isPromise=o.extend=o.defaults=o.omit=o.each=void 0;const r=void 0===e||void 0===e.window;let i,s;o.isNode=r;const l={get find(){return i||(i=Array.prototype.find?(e,t)=>Array.prototype.find.call(e,t):(e,t)=>{const o=l.findIndex(e,t);return o>=0?e[o]:void 0},i)},get findIndex(){return s||(s=Array.prototype.findIndex?(e,t)=>Array.prototype.findIndex.call(e,t):(e,t)=>{const{length:o}=e;for(let n=0;n<o;n++)if(t(e[n],n,e))return n;return-1},s)}};o.array=l;const{IE:a,Chrome:c,Firefox:u,Edge:h,Safari:d}=function(){if(r)return{IE:!1,Edge:!1,Chrome:!1,Firefox:!1,Safari:!1};{const t=e.navigator.userAgent.toLowerCase();return{IE:!!/(msie|trident)/.exec(t),Edge:t.indexOf("edge")>-1,Chrome:t.indexOf("chrome")>-1&&-1===t.indexOf("edge"),Firefox:t.indexOf("firefox")>-1,Safari:t.indexOf("safari")>-1&&-1===t.indexOf("edge")}}}();function f(e,t,...o){let n=e;for(let e=0;e<o.length&&null!=n;e++)n=t(n,o[e]);return n}function g(e){return Boolean(e&&"function"==typeof e.then)}o.each=function(e,t){for(const o in e)t(e[o],o,e)},o.omit=function(e,t){const o={};for(const n in e)t.indexOf(n)>=0||Object.defineProperty(o,n,{get:()=>e[n],set(t){e[n]=t},configurable:!0,enumerable:!0});return o},o.defaults=function(e,t){const o=[],n={};for(const r in e)o.push(r),Object.defineProperty(n,r,{get(){const o=e[r];return void 0===o?t[r]:o},set(t){e[r]=t},configurable:!0,enumerable:!0});for(const r in t)o.indexOf(r)>=0||Object.defineProperty(n,r,{get(){const o=e[r];return void 0===o?t[r]:o},set(t){e[r]=t},configurable:!0,enumerable:!0});return n},o.extend=function(...e){const t={};return e.forEach(e=>{for(const o in e)Object.defineProperty(t,o,{get:()=>e[o],set(t){e[o]=t},configurable:!0,enumerable:!0})}),t},o.isDescendantElement=function(e,t){for(;t.parentElement;){const o=t.parentElement;if(e===o)return!0;t=o}return!1},o.applyChainSafe=f,o.getChainSafe=function(e,...t){return f(e,(e,t)=>e[t],...t)},o.getOrApply=function(e,...t){return"function"==typeof e?e(...t):e},o.isPromise=g,o.then=function(e,t){return g(e)?e.then(e=>t(e)):t(e)},o.getIgnoreCase=function(e,t){if(e[t])return e[t];const o=t.toLowerCase();if(e[o])return e[o];const n=t.toLowerCase();if(e[n])return e[n];for(const t in e)if(t.toLowerCase()===o)return e[t]},o.cellEquals=function(e,t){return e.col===t.col&&e.row===t.row},o.cellInRange=function(e,t,o){return e.start.col<=t&&t<=e.end.col&&e.start.row<=o&&o<=e.end.row},o.browser={IE:a,Edge:h,Chrome:c,Firefox:u,Safari:d,heightLimit:c?33554431:u?17895588:10737433},o.obj={setReadonly:function(e,t,o){Object.defineProperty(e,t,{enumerable:!1,configurable:!0,value:o})},isObject:function(e){return e===Object(e)}},o.str={endsWith:function(e,t,o){const n=e.toString();("number"!=typeof o||!isFinite(o)||Math.floor(o)!==o||o>n.length)&&(o=n.length),o-=t.length;const r=n.lastIndexOf(t,o);return-1!==r&&r===o},genChars:function(e){const t=/([\uD800-\uDBFF][\uDC00-\uDFFF]|\r\n|[^\uD800-\uDFFF])([\u180B-\u180D]|[\uFE00-\uFE0F]|\uDB40[\uDD00-\uDDEF])?/g;return{next(){const o=t.exec(e);return null!==o?o[0]:null}}},genWords:function(e){const t=/[!-~]+|[^!-~\s]+|\s+/g;return{next(){const o=t.exec(e);return null!==o?o[0]:null}}}},o.event={getMouseButtons:function(e){return null!=e.buttons?e.buttons:null!=e.which?3===e.which||2===e.which?4:e.which:0===e.button||1===e.button?1:2===e.button?2:0},getKeyCode:function(e){return e.keyCode||e.which},isTouchEvent:function(e){return!!e.changedTouches},cancel:function(e){e.preventDefault(),e.stopPropagation()}},o.style={toBoxArray:function(e){return Array.isArray(e)?3===e.length?[e[0],e[1],e[2],e[1]]:2===e.length?[e[0],e[1],e[0],e[1]]:1===e.length?[e[0],e[0],e[0],e[0]]:e:[e,e,e,e]}},o.emptyFn=Function.prototype},function(t,o,n){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.getCheckHeaderStateId=o.getInlineMenuEditorStateId=o.getInlineInputEditorStateId=o.getSmallDialogInputEditorStateId=o.getBranchGraphColumnStateId=o.getColumnFadeinStateId=o.getButtonColumnStateId=o.getRadioColumnStateId=o.getCheckColumnStateId=o.getProtectedSymbol=o.get=void 0;const r=n(0).isNode?t.Symbol:e.Symbol?e.Symbol:(()=>{function e(){const e="abcdefghijklmnopqrstuvwxyz0123456789",t=e.length;let o="";for(let n=0;n<10;n++)o+=e[Math.floor(Math.random()*t)];return o}return t=>t?`#${t}_${e()}`:"#_"+e()})(),i={};function s(e){return e?i[e]?i[e]:i[e]=r(e):r()}o.get=s,o.getProtectedSymbol=function(){return s("protected")},o.getCheckColumnStateId=function(){return s("chkcol.stateID")},o.getRadioColumnStateId=function(){return s("rdcol.stateID")},o.getButtonColumnStateId=function(){return s("btncol.stateID")},o.getColumnFadeinStateId=function(){return s("col.fadein_stateID")},o.getBranchGraphColumnStateId=function(){return s("branch_graph_col.stateID")},o.getSmallDialogInputEditorStateId=function(){return s("small_dialog_input_editor.stateID")},o.getInlineInputEditorStateId=function(){return s("inline_input_editor.stateID")},o.getInlineMenuEditorStateId=function(){return s("inline_menu_editor.stateID")},o.getCheckHeaderStateId=function(){return s("check_header.stateID")}}).call(this,n(78))},function(e,t,o){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o=function(e,t){var o,n,r,i=e[1]||"",s=e[3];if(!s)return i;if(t&&"function"==typeof btoa){var l=(o=s,n=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(r," */")),a=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[i].concat(a).concat([l]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(o,"}"):o})).join("")},t.i=function(e,o,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(r[s]=!0)}for(var l=0;l<e.length;l++){var a=[].concat(e[l]);n&&r[a[0]]||(o&&(a[2]?a[2]="".concat(o," and ").concat(a[2]):a[2]=o),t.push(a))}},t}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventHandler=void 0;const n=o(0);let r=1;t.EventHandler=class{constructor(){this._listeners={}}on(e,t,o,...n){e.addEventListener&&e.addEventListener(t,o,...n);const i={target:e,type:t,listener:o,options:n},s=r++;return this._listeners[s]=i,s}once(e,t,o,...n){const r=this.on(e,t,(...e)=>{this.off(r),o(...e)},...n);return r}tryWithOffEvents(e,t,o){const r=[];try{n.each(this._listeners,o=>{o.target===e&&o.type===t&&(o.target.removeEventListener&&o.target.removeEventListener(o.type,o.listener,...o.options),r.push(o))}),o()}finally{r.forEach(e=>{e.target.addEventListener&&e.target.addEventListener(e.type,e.listener,...e.options)})}}off(e){if(null==e)return;const t=this._listeners[e];t&&(delete this._listeners[e],t.target.removeEventListener&&t.target.removeEventListener(t.type,t.listener,...t.options))}fire(e,t,...o){n.each(this._listeners,n=>{n.target===e&&n.type===t&&n.listener.call(n.target,...o)})}hasListener(e,t){let o=!1;return n.each(this._listeners,n=>{n.target===e&&n.type===t&&(o=!0)}),o}clear(){n.each(this._listeners,e=>{e.target.removeEventListener&&e.target.removeEventListener(e.type,e.listener,...e.options)}),this._listeners={}}dispose(){this.clear(),this._listeners=null}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DG_EVENT_TYPE=void 0,t.DG_EVENT_TYPE={CLICK_CELL:"click_cell",DBLCLICK_CELL:"dblclick_cell",DBLTAP_CELL:"dbltap_cell",MOUSEDOWN_CELL:"mousedown_cell",MOUSEUP_CELL:"mouseup_cell",SELECTED_CELL:"selected_cell",KEYDOWN:"keydown",MOUSEMOVE_CELL:"mousemove_cell",MOUSEENTER_CELL:"mouseenter_cell",MOUSELEAVE_CELL:"mouseleave_cell",MOUSEOVER_CELL:"mouseover_cell",MOUSEOUT_CELL:"mouseout_cell",CONTEXTMENU_CELL:"contextmenu_cell",INPUT_CELL:"input_cell",PASTE_CELL:"paste_cell",DELETE_CELL:"delete_cell",EDITABLEINPUT_CELL:"editableinput_cell",MODIFY_STATUS_EDITABLEINPUT_CELL:"modify_status_editableinput_cell",RESIZE_COLUMN:"resize_column",SCROLL:"scroll",FOCUS_GRID:"focus_grid",BLUR_GRID:"blur_grid"}},function(t,o,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(e&&document&&document.all&&!e.atob)),r},s=function(){var t={};return function(o){if(void 0===t[o]){var n=document.querySelector(o);if(e.HTMLIFrameElement&&n instanceof e.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[o]=n}return t[o]}}(),l=[];function a(e){for(var t=-1,o=0;o<l.length;o++)if(l[o].identifier===e){t=o;break}return t}function c(e,t){for(var o={},n=[],r=0;r<e.length;r++){var i=e[r],s=t.base?i[0]+t.base:i[0],c=o[s]||0,u="".concat(s," ").concat(c);o[s]=c+1;var h=a(u),d={css:i[1],media:i[2],sourceMap:i[3]};-1!==h?(l[h].references++,l[h].updater(d)):l.push({identifier:u,updater:m(d,t),references:1}),n.push(u)}return n}function u(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var r=n.nc;r&&(o.nonce=r)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var i=s(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var h,d=(h=[],function(e,t){return h[e]=t,h.filter(Boolean).join("\n")});function f(e,t,o,n){var r=o?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=d(t,r);else{var i=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function g(e,t,o){var n=o.css,r=o.media,i=o.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var p=null,_=0;function m(e,t){var o,n,r;if(t.singleton){var i=_++;o=p||(p=u(t)),n=f.bind(null,o,i,!1),r=f.bind(null,o,i,!0)}else o=u(t),n=g.bind(null,o,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(o)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}t.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var o=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<o.length;n++){var r=a(o[n]);l[r].references--}for(var i=c(e,t),s=0;s<o.length;s++){var u=a(o[s]);0===l[u].references&&(l[u].updater(),l.splice(u,1))}o=i}}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Style=void 0;const n=o(20);let r;class i extends n.StdBaseStyle{constructor(e={}){super(e),this._color=e.color,this._font=e.font,this._padding=e.padding,this._textOverflow=e.textOverflow||"clip"}static get DEFAULT(){return r||(r=new i)}get color(){return this._color}set color(e){this._color=e,this.doChangeStyle()}get font(){return this._font}set font(e){this._font=e,this.doChangeStyle()}get padding(){return this._padding}set padding(e){this._padding=e,this.doChangeStyle()}get textOverflow(){return this._textOverflow}set textOverflow(e){this._textOverflow=e,this.doChangeStyle()}clone(){return new i(this)}}t.Style=i},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseColumn=void 0;const s=i(o(26)),l=o(0),a=o(18),c=o(17),u=o(1),{setReadonly:h}=l.obj,d=u.getColumnFadeinStateId();function f(e){let t=e[d];return t||(t={cells:{}},h(e,d,t)),t}function g(e,t,o,n,r,i){return s=>{const l=f(e),a=`${o}:${t}`;1===s?delete l.cells[a]:l.cells[a]={opacity:s},i(),r();const c=l.cells[a];if(c){const e=n.getContext();e.globalAlpha=1-c.opacity;try{i()}finally{e.globalAlpha=1}}}}const p={animate(e,t,o,n,r,i){const s=f(e),l=[g(e,t,o,n,r,i)];s.activeFadeins=l,c.animate(500,e=>{l.forEach(t=>t(e)),1===e&&delete s.activeFadeins})},margeAnimate(e,t,o,n,r,i){const s=f(e);s.activeFadeins?s.activeFadeins.push(g(e,t,o,n,r,i)):r()}};t.BaseColumn=class{constructor(e){this.onDrawCell=this.onDrawCell.bind(this),this._fadeinWhenCallbackInPromise=null==e?void 0:e.fadeinWhenCallbackInPromise}get fadeinWhenCallbackInPromise(){return this._fadeinWhenCallbackInPromise}get StyleClass(){return a.BaseStyle}onDrawCell(e,t,o,n){var r;const{style:i,getRecord:a,drawCellBase:c}=t,u=n.getGridCanvasHelper();c();const h=a();let f;if(l.isPromise(h))f=h;else if(l.isPromise(e))f=e;else{const e=t.getMessage();l.isPromise(e)&&(f=e)}if(f){const r=Date.now();return Promise.all([h,e,f.then(()=>e).then(()=>t.getMessage())]).then(({0:e,1:l,2:a})=>{if(!o.toCurrentContext().getDrawRect())return;const h=Date.now()-r,d=()=>{const r=o.toCurrentContext();if(!r.getDrawRect())return;const c=s.of(i,e,this.StyleClass);this.drawInternal(this.convertInternal(l),r,c,u,n,t),this.drawMessageInternal(a,r,c,u,n,t)};if(function(e,t){return null!=e.fadeinWhenCallbackInPromise?e.fadeinWhenCallbackInPromise:!!t.configure("fadeinWhenCallbackInPromise")}(this,n)){const{col:e,row:t}=o;h<80?p.margeAnimate(n,e,t,o,d,c):p.animate(n,e,t,o,d,c)}else d()})}{const l=s.of(i,h,this.StyleClass);this.drawInternal(this.convertInternal(e),o,l,u,n,t),this.drawMessageInternal(t.getMessage(),o,l,u,n,t);const{col:a,row:f}=o,g=`${a}:${f}`,p=null===(r=n[d])||void 0===r?void 0:r.cells[g];if(p){const e=o.getContext();e.globalAlpha=1-p.opacity;try{c()}finally{e.globalAlpha=1}}return}}convertInternal(e){return null!=e?e:""}drawMessageInternal(e,t,o,n,r,i){i.messageHandler.drawCellMessage(e,t,o,n,r,i)}bindGridEvent(e,t){return[]}getCopyCellValue(e,t,o){return e}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcStartPosition=t.calcBasePosition=t.getFontSize=void 0;const n={};function r(e,t,o,n,{offset:r=0,padding:{left:i=0,right:s=0,top:l=0,bottom:a=0}={}}={}){const c=e.textAlign||"left",u=e.textBaseline||"middle";e.textAlign=c,e.textBaseline=u;let h=t.left+r+i;"right"===c||"end"===c?h=t.right-o-r-s:"center"===c&&(h=t.left+(t.width-o+i-s)/2);let d=t.top+r+l;return"bottom"===u||"alphabetic"===u||"ideographic"===u?d=t.bottom-n-r-a:"middle"===u&&(d=t.top+(t.height-n+l-a)/2),{x:h,y:d}}t.getFontSize=function(e,t){const o=t||e.font;if(n[o])return n[o];const r=e.font;try{e.font=o;const t=e.measureText("あ").width;return n[o]={width:t,height:t}}finally{e.font=r}},t.calcBasePosition=function(e,t,{offset:o=0,padding:{left:n=0,right:i=0,top:s=0,bottom:l=0}={}}={}){return r(e,t,0,0,{offset:o,padding:{left:n,right:i,top:s,bottom:l}})},t.calcStartPosition=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleValue=t.isReadOnlyRecord=t.isDisabledRecord=void 0;const n=o(0);function r(e,t,o){if("function"==typeof e){const r=t.getRowRecord(o);return!!n.isPromise(r)||!!e(r)}return!!e}t.isDisabledRecord=function(e,t,o){return!!t.disabled||r(e,t,o)},t.isReadOnlyRecord=function(e,t,o){return!!t.readOnly||r(e,t,o)},t.toggleValue=function(e){if("number"==typeof e)return 0===e?1:0;if("string"==typeof e){if("false"===e)return"true";if("off"===e)return"on";if(/^0+$/.exec(e))return e.replace(/^(0*)0$/,"$11");if("true"===e)return"false";if("on"===e)return"off";if(/^0*1$/.exec(e))return e.replace(/^(0*)1$/,"$10")}return!e}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Editor=void 0;const n=o(25);class r extends n.BaseAction{constructor(e={}){super(e),this._readOnly=e.readOnly||!1}get editable(){return!0}get readOnly(){return this._readOnly}set readOnly(e){this._readOnly=e,this.onChangeReadOnlyInternal()}onChangeReadOnlyInternal(){}}t.Editor=r},function(e,t,o){"use strict";function n(e,{classList:t,text:o,html:n}={}){const r=document.createElement(e);return t&&(Array.isArray(t)?r.classList.add(...t):r.classList.add(t)),o?r.textContent=o:n&&(r.innerHTML=n),r}function r(e){if(Array.isArray(e)){const t=[];return e.forEach(e=>{t.push(...r(e))}),t}const t=function(e){if(function(e){return!(!e.nodeType||!e.nodeName)}(e))return e;const t=n("div",{html:e});return Array.prototype.slice.call(t.childNodes)}(e);return Array.isArray(t)?t:[t]}function i(e){return null!=e.tabIndex&&e.tabIndex>-1}Object.defineProperty(t,"__esModule",{value:!0}),t.findNextSiblingFocusable=t.findPrevSiblingFocusable=t.isFocusable=t.enableFocus=t.disableFocus=t.appendHtml=t.toNodeList=t.empty=t.createElement=void 0,t.createElement=n,t.empty=function(e){let t;for(;t=e.firstChild;)e.removeChild(t)},t.toNodeList=r,t.appendHtml=function(e,t){r(t).forEach(t=>{e.appendChild(t)})},t.disableFocus=function e(t){t.dataset.disableBeforeTabIndex=""+t.tabIndex,t.tabIndex=-1,Array.prototype.slice.call(t.children,0).forEach(e)},t.enableFocus=function e(t){"disableBeforeTabIndex"in t.dataset&&(t.tabIndex=Number(t.dataset.disableBeforeTabIndex)),Array.prototype.slice.call(t.children,0).forEach(e)},t.isFocusable=i,t.findPrevSiblingFocusable=function(e){let t=e.previousSibling;for(;t&&!i(t);)t=t.previousSibling;return t},t.findNextSiblingFocusable=function(e){let t=e.nextSibling;for(;t&&!i(t);)t=t.nextSibling;return t}},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Column=void 0;const s=i(o(21)),l=o(7),a=o(6);class c extends l.BaseColumn{get StyleClass(){return a.Style}clone(){return new c(this)}drawInternal(e,t,o,n,r,{drawCellBase:i,getIcon:l}){const{textAlign:a,textBaseline:c,color:u,font:h,bgColor:d,padding:f,textOverflow:g}=o;d&&i({bgColor:d}),n.testFontLoad(h,e,t),s.loadIcons(l(),t,n,(t,o)=>{n.text(e,o,{textAlign:a,textBaseline:c,color:u,font:h,padding:f,textOverflow:g,icons:t})})}}t.Column=c},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Style=void 0;const n=o(116);let r;class i extends n.StdBaseStyle{constructor(e={}){super(e),this._color=e.color,this._font=e.font,this._textOverflow=e.textOverflow||"ellipsis"}static get DEFAULT(){return r||(r=new i)}get color(){return this._color}set color(e){this._color=e,this.doChangeStyle()}get font(){return this._font}set font(e){this._font=e,this.doChangeStyle()}get textOverflow(){return this._textOverflow}set textOverflow(e){this._textOverflow=e,this.doChangeStyle()}clone(){return new i(this)}}t.Style=i},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseHeader=void 0;const s=i(o(33)),l=o(34);t.BaseHeader=class{constructor(e={}){this.onDrawCell=this.onDrawCell.bind(this)}get StyleClass(){return l.BaseStyle}onDrawCell(e,t,o,n){const{style:r,drawCellBase:i}=t,l=n.getGridCanvasHelper();i(),this.drawInternal(this.convertInternal(e),o,s.of(r,this.StyleClass),l,n,t)}convertInternal(e){return"function"==typeof e&&(e=e()),null!=e?""+e:""}bindGridEvent(e,t){return[]}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Inline=void 0;const n=o(0);function r(e,t){return e.measureText(t).width}function i(e,t,o,n,i){const l=[];let a=o.next();for(let e=0;e<n&&null!==a;e++,a=o.next())l.push(a);let c=r(e,l.join(""));if(c>i)for(;l.length&&(c-=r(e,l.pop()||""),!(c<=i)););else if(c<i)for(;null!==a;){const t=r(e,a);if(c+t>i)break;l.push(a),c+=t,a=o.next()}const u=l.join("").replace(/\s+$/,""),h=t.slice(u.length).replace(/^\s+/,"");return{before:u?new s(u):null,after:h?new s(h):null}}class s{constructor(e){this._content=null!=e?e:""}width({ctx:e}){return r(e,this._content)}font(){return null}color(){return null}canDraw(){return!0}onReady(e){}draw({ctx:e,canvashelper:t,rect:o,offset:n,offsetLeft:r,offsetRight:i,offsetTop:s,offsetBottom:l}){t.fillTextRect(e,this._content,o.left,o.top,o.width,o.height,{offset:n+1,padding:{left:r,right:i,top:s,bottom:l}})}canBreak(){return!!this._content}splitIndex(e){const t=this._content,o=n.str.genChars(t),r=[];let i=o.next();for(let t=0;t<e&&null!==i;t++,i=o.next())r.push(i);const l=r.join(""),a=t.slice(l.length);return{before:l?new s(l):null,after:a?new s(a):null}}breakWord(e,t){const o=this._content,r=this.width({ctx:e}),s=Math.floor(this._content.length*t/r);return i(e,o,n.str.genWords(o),s,t)}breakAll(e,t){const o=this._content,r=this.width({ctx:e}),s=Math.floor(this._content.length*t/r);return i(e,o,n.str.genChars(o),s,t)}toString(){return this._content}}t.Inline=s},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.style=t.type=t.action=void 0;const s=i(o(76));t.action=s;const l=i(o(26));t.style=l;const a=i(o(44));t.type=a},function(t,o,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.animate=void 0;const r=n(0);function i(e,t,o,n){let r;return e*=3,t*=3,o*=3,n*=3,function(i){let s,l,a,c,u,h,d;if(i<0||1<i)throw new Error(""+i);s=r||i;do{l=1-s,a=l*l,c=s*s,u=c*s,h=e*a*s+o*l*c+u,d=i-h,s+=.5*d}while(1e-4<Math.abs(d));return r=s,t*a*s+n*l*c+u}}const s={linear:e=>e,easeIn:i(.42,0,1,1),easeOut:i(0,0,.58,1),easeInOut:i(.42,0,.58,1)},l=r.isNode?()=>{}:e.requestAnimationFrame||(e=>setTimeout(e,1));function a(){return Date.now()}o.animate=function(e,t,o){const n=a(),r=null==o?s.easeInOut:"string"==typeof o?s[o]:o;let i=!1;const c=(o,s)=>{const c=()=>{const u=a()-n;i?s&&s():u>=e?(t(1),o&&o()):(t(r(u/e)),l(c))};return c},u=()=>{i=!0};if("undefined"!=typeof Promise){const e=new Promise((e,o)=>{const n=c(e,o);t(0),n()});return e.cancel=u,e}{const e=c(()=>{},()=>{});return t(0),e(),{cancel:u}}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStyle=void 0;const n=o(19),r={CHANGE_STYLE:"change_style"};let i;class s extends n.EventTarget{constructor({bgColor:e}={}){super(),this._bgColor=e}static get EVENT_TYPE(){return r}static get DEFAULT(){return i||(i=new s)}get bgColor(){return this._bgColor}set bgColor(e){this._bgColor=e,this.doChangeStyle()}doChangeStyle(){this.fireListeners(r.CHANGE_STYLE)}clone(){return new s(this)}}t.BaseStyle=s},function(e,t,o){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.EventTarget=void 0;const r=o(0),i=o(1).get();let s=1;t.EventTarget=class{constructor(){this[n]={listeners:{},listenerData:{}}}listen(e,t){const o=this[i].listeners[e]||(this[i].listeners[e]=[]);o.push(t);const n=s++;return this[i].listenerData[n]={type:e,listener:t,remove:()=>{delete this[i].listenerData[n];const r=o.indexOf(t);o.splice(r,1),this[i].listeners[e].length||delete this[i].listeners[e]}},n}unlisten(e){this[i]&&this[i].listenerData[e].remove()}addEventListener(e,t){this.listen(e,t)}removeEventListener(e,t){this[i]&&r.each(this[i].listenerData,(o,n)=>{o.type===e&&o.listener===t&&this.unlisten(n)})}hasListeners(e){return!!this[i]&&!!this[i].listeners[e]}fireListeners(e,...t){if(!this[i])return[];const o=this[i].listeners[e];return o?o.map(e=>e.call(this,...t)).filter(e=>null!=e):[]}dispose(){delete this[i]}},n=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StdBaseStyle=void 0;const n=o(18);let r;class i extends n.BaseStyle{constructor(e={}){super(e),this._textAlign=e.textAlign||"left",this._textBaseline=e.textBaseline||"middle"}static get DEFAULT(){return r||(r=new i)}get textAlign(){return this._textAlign}set textAlign(e){this._textAlign=e,this.doChangeStyle()}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e,this.doChangeStyle()}clone(){return new i(this)}}t.StdBaseStyle=i},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.loadIcons=void 0;const s=i(o(27)),l=o(0);t.loadIcons=function e(t,o,n,r){let i=void 0;if(t)if(l.isPromise(t))t.then(t=>{e(t,o.toCurrentContext(),n,r)});else{const e=s.toNormarizeArray(t);e.forEach(e=>{e.font&&e.content&&n.testFontLoad(e.font,e.content,o)}),i=e}r(i,o)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Rect=void 0;class n{constructor(e,t,o,n){this._left=e,this._top=t,this._width=o,this._height=n}static bounds(e,t,o,r){return new n(e,t,o-e,r-t)}static max(e,t){return n.bounds(Math.min(e.left,t.left),Math.min(e.top,t.top),Math.max(e.right,t.right),Math.max(e.bottom,t.bottom))}get left(){return this._left}set left(e){const{right:t}=this;this._left=e,this.right=t}get top(){return this._top}set top(e){const{bottom:t}=this;this._top=e,this.bottom=t}get width(){return this._width}set width(e){this._width=e,this._right=void 0}get height(){return this._height}set height(e){this._height=e,this._bottom=void 0}get right(){return void 0!==this._right?this._right:this._right=this.left+this.width}set right(e){this._right=e,this.width=e-this.left}get bottom(){return void 0!==this._bottom?this._bottom:this._bottom=this.top+this.height}set bottom(e){this._bottom=e,this.height=e-this.top}offsetLeft(e){this._left+=e,this._right=void 0}offsetTop(e){this._top+=e,this._bottom=void 0}copy(){return new n(this.left,this.top,this.width,this.height)}intersection(e){const t=Math.max(this.left,e.left),o=Math.min(this.left+this.width,e.left+e.width);if(t<=o){const r=Math.max(this.top,e.top),i=Math.min(this.top+this.height,e.top+e.height);if(r<=i)return n.bounds(t,r,o,i)}return null}contains(e){return this.left<=e.left&&this.left+this.width>=e.left+e.width&&this.top<=e.top&&this.top+this.height>=e.top+e.height}inPoint(e,t){return this.left<=e&&this.left+this.width>=e&&this.top<=t&&this.top+this.height>=t}}t.Rect=n},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ofCell=t.of=t.MultilineTextHeader=t.CheckHeader=t.SortHeader=t.Header=t.BaseHeader=void 0;const n=o(14);Object.defineProperty(t,"BaseHeader",{enumerable:!0,get:function(){return n.BaseHeader}});const r=o(117);Object.defineProperty(t,"CheckHeader",{enumerable:!0,get:function(){return r.CheckHeader}});const i=o(118);Object.defineProperty(t,"Header",{enumerable:!0,get:function(){return i.Header}});const s=o(119);Object.defineProperty(t,"MultilineTextHeader",{enumerable:!0,get:function(){return s.MultilineTextHeader}});const l=o(120);Object.defineProperty(t,"SortHeader",{enumerable:!0,get:function(){return l.SortHeader}});const a={DEFAULT:new i.Header,SORT:new l.SortHeader,CHECK:new r.CheckHeader,MULTILINETEXT:new s.MultilineTextHeader};function c(e){if(e){if("string"==typeof e){const t=e.toUpperCase();return a[t]||c(null)}return e}return a.DEFAULT}t.of=c,t.ofCell=function(e){return e.sort?a.SORT:c(e.headerType)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindCellKeyAction=t.bindCellClickAction=void 0;const n=o(0),r=o(4);t.bindCellClickAction=function(e,t,{action:o,mouseOver:i,mouseOut:s}){function l(o,n){return e.getLayoutCellId(o,n)===t}return[e.listen(r.DG_EVENT_TYPE.CLICK_CELL,t=>{l(t.col,t.row)&&(n.isPromise(e.getRowRecord(t.row))||o({col:t.col,row:t.row}))}),e.listen(r.DG_EVENT_TYPE.MOUSEOVER_CELL,t=>{l(t.col,t.row)&&(n.isPromise(e.getRowRecord(t.row))||i&&!i({col:t.col,row:t.row})||(e.getElement().style.cursor="pointer"))}),e.listen(r.DG_EVENT_TYPE.MOUSEOUT_CELL,t=>{l(t.col,t.row)&&(s&&s({col:t.col,row:t.row}),e.getElement().style.cursor="")})]},t.bindCellKeyAction=function(e,t,{action:o,acceptKeys:i=[]}){return i=[...i,13,32],[e.listen(r.DG_EVENT_TYPE.KEYDOWN,r=>{var s;if(-1===i.indexOf(r.keyCode))return;if((null===(s=e.keyboardOptions)||void 0===s?void 0:s.moveCellOnEnter)&&13===r.keyCode)return;const l=e.selection.select;var a,c;a=l.col,c=l.row,e.getLayoutCellId(a,c)===t&&(n.isPromise(e.getRowRecord(l.row))||(o({col:l.col,row:l.row}),n.event.cancel(r.event)))})]}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseAction=void 0,t.BaseAction=class{constructor(e={}){this._disabled=e.disabled||!1}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.onChangeDisabledInternal()}onChangeDisabledInternal(){}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.of=t.MenuStyle=t.MultilineTextStyle=t.PercentCompleteBarStyle=t.IconStyle=t.ImageStyle=t.ButtonStyle=t.RadioStyle=t.CheckStyle=t.NumberStyle=t.Style=t.BaseStyle=t.EVENT_TYPE=void 0;const n=o(18);Object.defineProperty(t,"BaseStyle",{enumerable:!0,get:function(){return n.BaseStyle}});const r=o(45);Object.defineProperty(t,"ButtonStyle",{enumerable:!0,get:function(){return r.ButtonStyle}});const i=o(46);Object.defineProperty(t,"CheckStyle",{enumerable:!0,get:function(){return i.CheckStyle}});const s=o(47);Object.defineProperty(t,"IconStyle",{enumerable:!0,get:function(){return s.IconStyle}});const l=o(48);Object.defineProperty(t,"ImageStyle",{enumerable:!0,get:function(){return l.ImageStyle}});const a=o(49);Object.defineProperty(t,"MenuStyle",{enumerable:!0,get:function(){return a.MenuStyle}});const c=o(50);Object.defineProperty(t,"MultilineTextStyle",{enumerable:!0,get:function(){return c.MultilineTextStyle}});const u=o(51);Object.defineProperty(t,"NumberStyle",{enumerable:!0,get:function(){return u.NumberStyle}});const h=o(52);Object.defineProperty(t,"PercentCompleteBarStyle",{enumerable:!0,get:function(){return h.PercentCompleteBarStyle}});const d=o(53);Object.defineProperty(t,"RadioStyle",{enumerable:!0,get:function(){return d.RadioStyle}});const f=o(6);Object.defineProperty(t,"Style",{enumerable:!0,get:function(){return f.Style}});const{EVENT_TYPE:g}=n.BaseStyle;t.EVENT_TYPE=g,t.of=function e(t,o,r=f.Style){return t?t instanceof n.BaseStyle?t:"function"==typeof t?e(t(o),o,r):o&&t in o?e(o[t],o,r):new r(t):r.DEFAULT}},function(t,o,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.iconPropKeys=o.toNormarizeArray=o.getIconProps=void 0;const r=["content","font","color","className","tagName","isLiga","width","src","svg","name","path"],i={},s={};function l(t,o){const n=s[t]||(s[t]={});if(n[o])return n[o];const r=i[t]||(i[t]=document.createElement(t));r.className=o,document.body.appendChild(r);try{const t=(document.defaultView||e).getComputedStyle(r,"::before");let i=t.getPropertyValue("content");i.length>=3&&('"'===i[0]||"'"===i[0])&&i[0]===i[i.length-1]&&(i=i.substr(1,i.length-2));let s=t.getPropertyValue("font");s||(s=`${t.getPropertyValue("font-style")} ${t.getPropertyValue("font-variant")} ${t.getPropertyValue("font-weight")} ${t.getPropertyValue("font-size")}/${t.getPropertyValue("line-height")} ${function(e){const t=[],o=e.split(/,\s*/);for(let e=0;e<o.length;e++){const n=o[e].replace(/['"]/g,"");-1!==n.indexOf(" ")||/^\d/.test(n)?t.push(`'${n}'`):t.push(n)}return t.join(",")}(t.getPropertyValue("font-family"))}`);const l=t.getPropertyValue("color"),a=r.clientWidth,c=(t.getPropertyValue("font-feature-settings")||"").indexOf("liga")>-1;return n[o]={content:i,font:s,color:l,width:a,isLiga:c}}finally{document.body.removeChild(r)}}function a(e){if(!e)return e;if(Array.isArray(e))return e;const t={};let o=0;r.forEach(t=>{const n=e[t];n&&(o=Array.isArray(n)?Math.max(o,n.length):Math.max(o,1))}),r.forEach(n=>{const r=function(e,t){const o=[];if(Array.isArray(e)){o.push(...e);for(let n=e.length;n<t;n++)o.push(null)}else for(let n=0;n<t;n++)o.push(e);return o}(e[n],o);t[n]=r});const n=[];for(let e=0;e<o;e++){const o={};r.forEach(n=>{const r=t[n][e];o[n]=r}),n.push(o)}return n}function c(e){return r.indexOf(e)>=0}o.getIconProps=l,o.toNormarizeArray=function(e){const t=a(e);return t?t.map(e=>function(e){const t={};for(const o in e)"className"!==o&&c(o)&&(t[o]=e[o]);if(e.className){const o=l(e.tagName||"i",e.className);for(const n in o)c(n)&&null==e[n]&&(t[n]=o[n])}return t}(e)):t},o.iconPropKeys=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toBoolean=void 0,t.toBoolean=function(e){if("string"==typeof e){if("false"===e)return!1;if("off"===e)return!1;if(/^0+$/.exec(e))return!1}return Boolean(e)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toPx=void 0;const n=o(0);function r(e){return 9===e||10===e||12===e||13===e||32===e}function i(e){return e>=48&&e<=57}function s(e){return 46===e}function l(e){return function(e){return function(e){return e>=97&&e<=122}(e)||function(e){return e>=65&&e<=90}(e)}(e)||37===e}function a(e){return new Error("calc parse error: "+e)}const c={"*":3,"/":3,"+":2,"-":2};function u(e){return function e(t,o){function r(e){const t=e.pop(),n=e.pop(),r=e.pop();if(!(r&&r.nodeType&&n&&2===n.type&&t&&t.nodeType))throw a(o);return{nodeType:11,left:r,op:n,right:t}}const i=[];for(;t.length;){const s=t.shift();if(0===s.type&&"("===s.value){let r=0;const s=n.array.findIndex(t,e=>{if(0===e.type&&"("===e.value)r++;else if(0===e.type&&")"===e.value){if(!r)return!0;r--}return!1});if(-1===s)throw a(o);i.push(e(t.splice(0,s),o)),t.shift()}else if(2===s.type){if(i.length>=3){const e=i[i.length-2].value;c[s.value]<=c[e]&&i.push(r(i))}i.push(s)}else if(1===s.type){const{value:e,unit:t}=s;i.push({nodeType:10,value:e,unit:t})}else 3===s.type&&i.push({nodeType:12,value:s.value})}for(;i.length>1;)i.push(r(i));return i[0]}(function(e){const t=e.replace(/calc\(/g,"(").trim(),o=[],n=t.length;for(let l=0;l<n;l++){const n=t[l],h=n.charCodeAt(0);if("("===n||")"===n)o.push({value:n,type:0});else if("*"===n||"/"===n)o.push({value:n,type:2});else if("+"===n||"-"===n)l=c(n,l+1)-1;else if(i(h)||s(h))l=u(n,l+1)-1;else if(!r(h))throw a(e)}function c(e,r){if(r<n){const o=t[r],n=o.charCodeAt(0);if(i(n)||s(n))return u(e+o,r+1)}return o.push({value:e,type:2}),r}function u(r,s){let c=s;for(;c<n;c++){const o=t[c],n=o.charCodeAt(0);if(i(n))r+=o;else{if("."!==o){if(l(n))return h(r,o,c+1);break}if(r.indexOf(".")>=0)throw a(e);r+=o}}if("."===r)throw a(e);return o.push({value:parseFloat(r),type:3}),c}function h(e,r,i){let s=i;for(;s<n;s++){const e=t[s];if(!l(e.charCodeAt(0)))break;r+=e}return o.push({value:parseFloat(e),unit:r,type:1}),s}return o}(e),e)}function h(e,t){return function e(t,o){if(11===t.nodeType){const n=e(t.left,o),r=e(t.right,o);switch(t.op.value){case"+":return n+r;case"-":return n-r;case"*":return n*r;case"/":return n/r;default:throw new Error("calc error. unknown operator: "+t.op.value)}}else if(10===t.nodeType)switch(t.unit){case"%":return t.value*o.full/100;case"em":return t.value*o.em;case"px":return t.value;default:throw new Error("calc error. unknown unit: "+t.unit)}else if(12===t.nodeType)return t.value;throw new Error("calc error.")}(u(e),t)}t.toPx=function(e,t){return"string"==typeof e?h(e.trim(),t):e-0}},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.DataSource=void 0;const s=i(o(60)),l=o(0),a=o(19);function c(e){if(l.obj.isObject(e)){const t=e;if(t.get&&t.set)return!0}return!1}const u={UPDATE_LENGTH:"update_length",UPDATED_LENGTH:"updated_length",UPDATED_ORDER:"updated_order"};function h(e,t){const o=l.getOrApply(e);if(l.isPromise(o)){const e=o.then(e=>(t(e),e));return t(e),e}return o}function d(e,t,o){if(null==e)return!1;const n=c(t)?t.set:t;if(n in e)e[n]=o;else{if("function"==typeof n)return n(e,o);if("string"==typeof n){const t=(""+n).split(".");let r=e;const{length:i}=t;for(let e=0;e<i;e++){const n=t[e];e===i-1?r[n]=o:r=r[n]||(r[n]={})}}else e[n]=o}return!0}function f(e,t){if(!e)return t;const o=e[t];return null!=o?o:t}class g extends a.EventTarget{constructor(e){var t;super(),this._sortedIndexMap=null,this._get=(null==e?void 0:e.get.bind(e))||void 0,this._length=(null==e?void 0:e.length)||0,this._source=null!==(t=null==e?void 0:e.source)&&void 0!==t?t:e}static get EVENT_TYPE(){return u}static ofArray(e){return new g({get:t=>e[t],length:e.length,source:e})}get source(){return this._source}get(e){return this.getOriginal(f(this._sortedIndexMap,e))}getField(e,t){return this.getOriginalField(f(this._sortedIndexMap,e),t)}hasField(e,t){return this.hasOriginalField(f(this._sortedIndexMap,e),t)}setField(e,t,o){return this.setOriginalField(f(this._sortedIndexMap,e),t,o)}sort(e,t){const o=new Array(this._length),n="desc"!==t?(e,t)=>e===t?0:e>t?1:-1:(e,t)=>e===t?0:e<t?1:-1;return s.sortPromise(e=>null!=o[e]?o[e]:o[e]=e,(e,t)=>{o[e]=t},this._length,n,t=>this.getOriginalField(t,e)).then(()=>{this._sortedIndexMap=o,this.fireListeners(u.UPDATED_ORDER)})}get length(){return this._length}set length(e){if(this._length===e)return;const t=this.fireListeners(u.UPDATE_LENGTH,e);l.array.findIndex(t,e=>!e)>=0||(this._length=e,this.fireListeners(u.UPDATED_LENGTH,this._length))}get dataSource(){return this}dispose(){super.dispose()}getOriginal(e){return h(this._get(e),t=>{this.recordPromiseCallBackInternal(e,t)})}getOriginalField(e,t){if(null!=t)return function e(t,o,n){if(null==t)return;if(l.isPromise(t))return t.then(t=>e(t,o,n));const r=c(o)?o.get:o;if(r in t)return h(t[r],n);if("function"==typeof r)return h(r(t),n);const i=(""+r).split(".");return i.length<=1?h(t[r],n):h(l.applyChainSafe(t,(t,o)=>e(t,o,l.emptyFn),...i),n)}(this.getOriginal(e),t,o=>{this.fieldPromiseCallBackInternal(e,t,o)})}hasOriginalField(e,t){if(null==t)return!1;if("function"==typeof t)return!0;const o=this.getOriginal(e);return Boolean(o&&t in o)}setOriginalField(e,t,o){if(null==t)return!1;const n=this.getOriginal(e);return l.isPromise(n)?n.then(e=>d(e,t,o)):d(n,t,o)}fieldPromiseCallBackInternal(e,t,o){}recordPromiseCallBackInternal(e,t){}}t.DataSource=g,g.EMPTY=new g({get(){},length:0})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ofCell=t.of=t.CheckHeaderAction=t.SortHeaderAction=t.BaseAction=t.ACTIONS=void 0;const n=o(32);Object.defineProperty(t,"BaseAction",{enumerable:!0,get:function(){return n.BaseAction}});const r=o(114);Object.defineProperty(t,"CheckHeaderAction",{enumerable:!0,get:function(){return r.CheckHeaderAction}});const i=o(115);Object.defineProperty(t,"SortHeaderAction",{enumerable:!0,get:function(){return i.SortHeaderAction}});class s extends i.SortHeaderAction{get disabled(){return this._disabled}}class l extends r.CheckHeaderAction{get disabled(){return this._disabled}}function a(e){if(e){if("string"==typeof e){const o=e.toUpperCase();return t.ACTIONS[o]||a(null)}return e}}t.ACTIONS={SORT:new s,CHECK:new l},t.of=a,t.ofCell=function(e){if(e.sort){if("function"==typeof e.sort){const t=e.sort;return new s({sort:({order:o,col:n,grid:r})=>t.call(e,o,n,r)})}return t.ACTIONS.SORT}return a(e.headerAction)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseAction=void 0;class n{constructor(e={}){this._disabled=!!e.disabled||!1}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.onChangeDisabledInternal()}clone(){return new n(this)}bindGridEvent(e,t){return[]}onChangeDisabledInternal(){}}t.BaseAction=n},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.of=t.MultilineTextHeaderStyle=t.CheckHeaderStyle=t.SortHeaderStyle=t.Style=t.BaseStyle=void 0;const n=o(34);Object.defineProperty(t,"BaseStyle",{enumerable:!0,get:function(){return n.BaseStyle}});const r=o(62);Object.defineProperty(t,"CheckHeaderStyle",{enumerable:!0,get:function(){return r.CheckHeaderStyle}});const i=o(63);Object.defineProperty(t,"MultilineTextHeaderStyle",{enumerable:!0,get:function(){return i.MultilineTextHeaderStyle}});const s=o(64);Object.defineProperty(t,"SortHeaderStyle",{enumerable:!0,get:function(){return s.SortHeaderStyle}});const l=o(13);Object.defineProperty(t,"Style",{enumerable:!0,get:function(){return l.Style}}),t.of=function e(t,o){return t?t instanceof l.Style?t:"function"==typeof t?e(t(),o):new o(t):o.DEFAULT}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStyle=void 0;const n=o(19),r={CHANGE_STYLE:"change_style"};let i;class s extends n.EventTarget{constructor({bgColor:e}={}){super(),this._bgColor=e}static get EVENT_TYPE(){return r}static get DEFAULT(){return i||(i=new s)}get bgColor(){return this._bgColor}set bgColor(e){this._bgColor=e,this.doChangeStyle()}doChangeStyle(){this.fireListeners(r.CHANGE_STYLE)}clone(){return new s(this)}}t.BaseStyle=s},function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getChoices=t.setDefault=t.getDefault=t.of=t.theme=t.MATERIAL_DESIGN=t.BASIC=void 0;const r=o(0),i=o(129),s=n(o(130)),l=n(o(131)),a=o(67);t.BASIC=new i.Theme(s.default),t.MATERIAL_DESIGN=new i.Theme(l.default);const c={BASIC:t.BASIC,MATERIAL_DESIGN:t.MATERIAL_DESIGN};let u=t.MATERIAL_DESIGN;function h(e){if(!e)return null;if("string"==typeof e){const t=r.getIgnoreCase(d(),e);return t||null}return e instanceof i.Theme?e:new i.Theme(e)}function d(){return r.extend(c,a.themes)}t.theme={Theme:i.Theme},t.of=h,t.getDefault=function(){return u},t.setDefault=function(e){u=h(e)||u},t.getChoices=d},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawInfomationMarkBox=t.drawExclamationMarkBox=void 0;const n=o(22);t.drawExclamationMarkBox=function(e,t,o){const{bgColor:r,color:i}=t,s=e.getContext(),l=e.getRect();s.fillStyle=r;const a=l.copy();a.left=a.right-24,s.fillRect(a.left,a.top,a.width,a.height-1);const c=i,u=a.left+(a.width-4)/2,h=a.top+(a.height-20)/2;o.fillRectWithState(new n.Rect(u,h,4,12),e,{fillColor:c}),o.fillRectWithState(new n.Rect(u,h+16,4,4),e,{fillColor:c})},t.drawInfomationMarkBox=function(e,t,o){const{bgColor:r,color:i}=t,s=e.getContext(),l=e.getRect();s.fillStyle=r;const a=l.copy();a.left=a.right-24,s.fillRect(a.left,a.top,a.width,a.height-1);const c=i,u=a.left+(a.width-4)/2,h=a.top+(a.height-20)/2;o.fillRectWithState(new n.Rect(u,h,4,4),e,{fillColor:c}),o.fillRectWithState(new n.Rect(u,h+8,4,12),e,{fillColor:c})}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseMessage=void 0,t.BaseMessage=class{constructor(e){this._messageElement=null,this._grid=e}dispose(){this.detachMessageElement(),this._messageElement&&this._messageElement.dispose(),this._messageElement=null}_getMessageElement(){return this._messageElement||(this._messageElement=this.createMessageElementInternal())}attachMessageElement(e,t,o){this._getMessageElement().attach(this._grid,e,t,o)}moveMessageElement(e,t){this._getMessageElement().move(this._grid,e,t)}detachMessageElement(){this._getMessageElement()._detach()}drawCellMessage(e,t,o,n,r,i){this.drawCellMessageInternal(e,t,o,n,r,i)}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageElement=void 0;const n=o(3),r=o(11),i="cheetah-grid__message-element",s=i+"--hidden",l=i+"--shown";t.MessageElement=class{constructor(){this._handler=new n.EventHandler;const e=this._rootElement=function(){o(140);const e=r.createElement("div",{classList:[i,s]}),t=r.createElement("span",{classList:["cheetah-grid__message-element__message"]});return e.appendChild(t),e}();this._messageElement=e.querySelector(".cheetah-grid__message-element__message")}dispose(){this.detach(),this._handler.dispose(),delete this._rootElement,delete this._messageElement}attach(e,t,o,n){const r=this._rootElement,i=this._messageElement;r.classList.remove(l),r.classList.add(s),this._attachCell(e,t,o)?(r.classList.add(l),r.classList.remove(s),i.textContent=n.message):this._detach()}move(e,t,o){const n=this._rootElement;this._attachCell(e,t,o)?(n.classList.add(l),n.classList.remove(s)):this._detach()}detach(){this._detach()}_detach(){const e=this._rootElement;e.parentElement&&(e.parentElement.removeChild(e),e.classList.remove(l),e.classList.add(s))}_attachCell(e,t,o){const n=this._rootElement,{element:r,rect:i}=e.getAttachCellsArea(e.getCellRange(t,o)),{bottom:s,left:l,width:a}=i,{frozenRowCount:c,frozenColCount:u}=e;if(o>=c&&c>0){const{rect:o}=e.getAttachCellsArea(e.getCellRange(t,c-1));if(s<o.bottom)return!1}else if(s<0)return!1;if(t>=u&&u>0){const{rect:t}=e.getAttachCellsArea(e.getCellRange(u-1,o));if(l<t.right)return!1}else if(l<0)return!1;const{offsetHeight:h,offsetWidth:d}=r;return!(h<s||d<l||(n.style.top=s.toFixed()+"px",n.style.left=l.toFixed()+"px",n.style.width=a.toFixed()+"px",n.parentElement!==r&&r.appendChild(n),0))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LG_EVENT_TYPE=void 0;const n=o(4),r=o(0);t.LG_EVENT_TYPE=r.extend(n.DG_EVENT_TYPE,{CHANGED_VALUE:"changed_value",CHANGED_HEADER_VALUE:"changed_header_value"})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fill=t.getPath2D=void 0;const n=o(0);function r(){return"undefined"==typeof Path2D||n.browser.Edge?o(152).Path2DShim:Path2D}t.getPath2D=r,t.fill=function(e,t,o,n,i,s){t.save();try{const{width:l,height:a}=e,{ud:c,x:u=0,y:h=0}=e,d=(i=i||l)/l,f=(s=s||a)/(c?-a:a);o=o||0,n=c?(n||0)+-a*f:n||0,t.translate(o,n),t.scale(d,f),0===u&&0===h||t.translate(u,h);const g=r(),p=e.path2d=e.path2d||new g(e.d);t.fill(p)}finally{t.restore()}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Action=void 0;const n=o(24),r=o(25),i=o(9);class s extends r.BaseAction{constructor(e={}){super(e),this._action=e.action||(()=>{})}get editable(){return!1}get action(){return this._action}set action(e){this._action=e}clone(){return new s(this)}getState(e){return{}}bindGridEvent(e,t){const o=this.getState(e),r=t=>{if(i.isDisabledRecord(this.disabled,e,t.row))return;const o=e.getRowRecord(t.row);this._action(o,t)};return[...n.bindCellClickAction(e,t,{action:r,mouseOver:t=>{if(i.isDisabledRecord(this.disabled,e,t.row))return!1;o.mouseActiveCell={col:t.col,row:t.row};const n=e.getCellRange(t.col,t.row);return e.invalidateCellRange(n),!0},mouseOut:t=>{delete o.mouseActiveCell;const n=e.getCellRange(t.col,t.row);e.invalidateCellRange(n)}}),...n.bindCellKeyAction(e,t,{action:r})]}onPasteCellRangeBox(){}onDeleteCellRangeBox(){}}t.Action=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseInputEditor=void 0;const n=o(0),r=o(9),i=o(4),s=o(10);class l extends s.Editor{constructor(e={}){super(e)}bindGridEvent(e,t){const o=t=>!r.isReadOnlyRecord(this.readOnly,e,t.row)&&!r.isDisabledRecord(this.disabled,e,t.row)&&(this.onOpenCellInternal(e,t),!0),s=(t,o)=>{r.isReadOnlyRecord(this.readOnly,e,t.row)||r.isDisabledRecord(this.disabled,e,t.row)||this.onInputCellInternal(e,t,o)};function l(o,n){return e.getLayoutCellId(o,n)===t}return[e.listen(i.DG_EVENT_TYPE.INPUT_CELL,e=>{l(e.col,e.row)&&s({col:e.col,row:e.row},e.value)}),e.listen(i.DG_EVENT_TYPE.PASTE_CELL,t=>{if(t.multi)return;const o=e.selection.range;n.cellEquals(o.start,o.end)&&l(t.col,t.row)&&(n.event.cancel(t.event),s({col:t.col,row:t.row},t.normalizeValue))}),e.listen(i.DG_EVENT_TYPE.DBLCLICK_CELL,e=>{l(e.col,e.row)&&o({col:e.col,row:e.row})}),e.listen(i.DG_EVENT_TYPE.DBLTAP_CELL,e=>{l(e.col,e.row)&&(o({col:e.col,row:e.row}),n.event.cancel(e.event))}),e.listen(i.DG_EVENT_TYPE.KEYDOWN,t=>{if(113!==t.keyCode&&13!==t.keyCode)return;const n=e.selection.select;l(n.col,n.row)&&o({col:n.col,row:n.row})&&t.stopCellMoving()}),e.listen(i.DG_EVENT_TYPE.SELECTED_CELL,t=>{this.onChangeSelectCellInternal(e,{col:t.col,row:t.row},t.selected)}),e.listen(i.DG_EVENT_TYPE.SCROLL,()=>{this.onGridScrollInternal(e)}),e.listen(i.DG_EVENT_TYPE.EDITABLEINPUT_CELL,t=>!!l(t.col,t.row)&&!r.isReadOnlyRecord(this.readOnly,e,t.row)&&!r.isDisabledRecord(this.disabled,e,t.row)),e.listen(i.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL,t=>{if(!l(t.col,t.row))return;if(r.isReadOnlyRecord(this.readOnly,e,t.row)||r.isDisabledRecord(this.disabled,e,t.row))return;const o=e.getCellRange(t.col,t.row);if(o.start.col!==o.end.col||o.start.row!==o.end.row){const{input:n}=t,r=e.getCellRect(t.col,t.row),i=e.getCellRangeRect(o);n.style.top=(parseFloat(n.style.top)+(i.top-r.top)).toFixed()+"px",n.style.left=(parseFloat(n.style.left)+(i.left-r.left)).toFixed()+"px",n.style.width=i.width.toFixed()+"px",n.style.height=i.height.toFixed()+"px"}this.onSetInputAttrsInternal(e,{col:t.col,row:t.row},t.input)})]}onPasteCellRangeBox(e,t,o){r.isReadOnlyRecord(this.readOnly,e,t.row)||r.isDisabledRecord(this.disabled,e,t.row)||e.doChangeValue(t.col,t.row,()=>o)}onDeleteCellRangeBox(e,t){r.isReadOnlyRecord(this.readOnly,e,t.row)||r.isDisabledRecord(this.disabled,e,t.row)||e.doChangeValue(t.col,t.row,()=>"")}}t.BaseInputEditor=l},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setInputValue=void 0;const n=o(3);t.setInputValue=function(e,t){if("number"===e.type&&"-"===t){e.type="";let t=new n.EventHandler;const o=()=>{t&&(t.dispose(),t=null)};t.once(e,"input",t=>{e.type="number",o()}),t.once(e,"blur",e=>{o()})}e.value=null!=t?t:""}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.of=t.MultilineTextColumn=t.MenuColumn=t.BranchGraphColumn=t.IconColumn=t.PercentCompleteBarColumn=t.ImageColumn=t.ButtonColumn=t.RadioColumn=t.CheckColumn=t.NumberColumn=t.Column=void 0;const n=o(88);Object.defineProperty(t,"BranchGraphColumn",{enumerable:!0,get:function(){return n.BranchGraphColumn}});const r=o(90);Object.defineProperty(t,"ButtonColumn",{enumerable:!0,get:function(){return r.ButtonColumn}});const i=o(91);Object.defineProperty(t,"CheckColumn",{enumerable:!0,get:function(){return i.CheckColumn}});const s=o(12);Object.defineProperty(t,"Column",{enumerable:!0,get:function(){return s.Column}});const l=o(92);Object.defineProperty(t,"IconColumn",{enumerable:!0,get:function(){return l.IconColumn}});const a=o(93);Object.defineProperty(t,"ImageColumn",{enumerable:!0,get:function(){return a.ImageColumn}});const c=o(95);Object.defineProperty(t,"MenuColumn",{enumerable:!0,get:function(){return c.MenuColumn}});const u=o(96);Object.defineProperty(t,"MultilineTextColumn",{enumerable:!0,get:function(){return u.MultilineTextColumn}});const h=o(97);Object.defineProperty(t,"NumberColumn",{enumerable:!0,get:function(){return h.NumberColumn}});const d=o(98);Object.defineProperty(t,"PercentCompleteBarColumn",{enumerable:!0,get:function(){return d.PercentCompleteBarColumn}});const f=o(99);Object.defineProperty(t,"RadioColumn",{enumerable:!0,get:function(){return f.RadioColumn}});const g={DEFAULT:new s.Column,NUMBER:new h.NumberColumn,CHECK:new i.CheckColumn,RADIO:new f.RadioColumn,BUTTON:new r.ButtonColumn,IMAGE:new a.ImageColumn,MULTILINETEXT:new u.MultilineTextColumn};t.of=function e(t){if(t){if("string"==typeof t){const o=t.toUpperCase();return g[o]||e(null)}return t}return g.DEFAULT}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonStyle=void 0;const n=o(6),r=o(0);let i;class s extends n.Style{constructor(e={}){super(r.defaults(e,{textAlign:"center"}));const{buttonBgColor:t}=e;this._buttonBgColor=t}static get DEFAULT(){return i||(i=new s)}get buttonBgColor(){return this._buttonBgColor}set buttonBgColor(e){this._buttonBgColor=e,this.doChangeStyle()}clone(){return new s(this)}}t.ButtonStyle=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckStyle=void 0;const n=o(20),r=o(0);let i;class s extends n.StdBaseStyle{constructor(e={}){super(r.defaults(e,{textAlign:"center"}));const{uncheckBgColor:t,checkBgColor:o,borderColor:n}=e;this._uncheckBgColor=t,this._checkBgColor=o,this._borderColor=n}static get DEFAULT(){return i||(i=new s)}get uncheckBgColor(){return this._uncheckBgColor}set uncheckBgColor(e){this._uncheckBgColor=e,this.doChangeStyle()}get checkBgColor(){return this._checkBgColor}set checkBgColor(e){this._checkBgColor=e,this.doChangeStyle()}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=e,this.doChangeStyle()}clone(){return new s(this)}}t.CheckStyle=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconStyle=void 0;const n=o(6),r=o(0);let i;class s extends n.Style{static get DEFAULT(){return i||(i=new s)}constructor(e={}){super(r.defaults(e,{textAlign:"center"}))}clone(){return new s(this)}}t.IconStyle=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageStyle=void 0;const n=o(20),r=o(0);let i;class s extends n.StdBaseStyle{constructor(e={}){super(r.defaults(e,{textAlign:"center"})),this._imageSizing=e.imageSizing,this._margin=e.margin||4}static get DEFAULT(){return i||(i=new s)}get imageSizing(){return this._imageSizing}set imageSizing(e){this._imageSizing=e,this.doChangeStyle()}get margin(){return this._margin}set margin(e){this._margin=e,this.doChangeStyle()}clone(){return new s(this)}}t.ImageStyle=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuStyle=void 0;const n=o(6);let r;class i extends n.Style{constructor(e={}){super(e);const{appearance:t}=e;this._appearance=t}static get DEFAULT(){return r||(r=new i)}get appearance(){return this._appearance||"menulist-button"}set appearance(e){this._appearance=e,this.doChangeStyle()}clone(){return new i(this)}}t.MenuStyle=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultilineTextStyle=void 0;const n=o(6),r=o(0);let i;class s extends n.Style{constructor(e={}){super(r.defaults(e,{textBaseline:"top"})),this._lineHeight=e.lineHeight||"1em",this._autoWrapText=e.autoWrapText||!1,this._lineClamp=e.lineClamp}static get DEFAULT(){return i||(i=new s)}clone(){return new s(this)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e,this.doChangeStyle()}get lineClamp(){return this._lineClamp}set lineClamp(e){this._lineClamp=e,this.doChangeStyle()}get autoWrapText(){return this._autoWrapText}set autoWrapText(e){this._autoWrapText=e,this.doChangeStyle()}}t.MultilineTextStyle=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NumberStyle=void 0;const n=o(6),r=o(0);let i;class s extends n.Style{static get DEFAULT(){return i||(i=new s)}constructor(e={}){super(r.defaults(e,{textAlign:"right"}))}clone(){return new s(this)}}t.NumberStyle=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PercentCompleteBarStyle=void 0;const n=o(6);let r;const i=e=>e>80?"#20a8d8":e>50?"#4dbd74":e>20?"#ffc107":"#f86c6b";class s extends n.Style{constructor(e={}){super(e),this._barColor=e.barColor||i,this._barBgColor=e.barBgColor||"#f0f3f5",this._barHeight=e.barHeight||3}static get DEFAULT(){return r||(r=new s)}get barColor(){return this._barColor}set barColor(e){this._barColor=e,this.doChangeStyle()}get barBgColor(){return this._barBgColor}set barBgColor(e){this._barBgColor=e,this.doChangeStyle()}get barHeight(){return this._barHeight}set barHeight(e){this._barHeight=e,this.doChangeStyle()}clone(){return new s(this)}}t.PercentCompleteBarStyle=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RadioStyle=void 0;const n=o(20),r=o(0);let i;class s extends n.StdBaseStyle{constructor(e={}){super(r.defaults(e,{textAlign:"center"}));const{checkColor:t,uncheckBorderColor:o,checkBorderColor:n,uncheckBgColor:i,checkBgColor:s}=e;this._checkColor=t,this._uncheckBorderColor=o,this._checkBorderColor=n,this._uncheckBgColor=i,this._checkBgColor=s}static get DEFAULT(){return i||(i=new s)}get checkColor(){return this._checkColor}set checkColor(e){this._checkColor=e,this.doChangeStyle()}get uncheckBorderColor(){return this._uncheckBorderColor}set uncheckBorderColor(e){this._uncheckBorderColor=e,this.doChangeStyle()}get checkBorderColor(){return this._checkBorderColor}set checkBorderColor(e){this._checkBorderColor=e,this.doChangeStyle()}get uncheckBgColor(){return this._uncheckBgColor}set uncheckBgColor(e){this._uncheckBgColor=e,this.doChangeStyle()}get checkBgColor(){return this._checkBgColor}set checkBgColor(e){this._checkBgColor=e,this.doChangeStyle()}clone(){return new s(this)}}t.RadioStyle=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCacheOrLoad=t.loadImage=void 0;const n=o(94),r=o(0),i={};function s(e){if("undefined"==typeof Promise)return console.error("Promise is not loaded. load Promise before this process."),{then(){return this}};const t=new Image,o=new Promise(e=>{t.onload=()=>{e(t)}});return t.onerror=()=>{const t=e.length>200?e.substr(0,200)+"...":e;throw console.warn("cannot load: "+t),new Error("IMAGE LOAD ERROR: "+t)},t.src=e,o}t.loadImage=s,t.getCacheOrLoad=function(e,t,o){return function(e,t){return r.then(t,t=>{const o=e.get(t);if(o)return o;const n=s(t).then(o=>(e.put(t,o),o));return e.put(t,n),n})}(i[e]||(i[e]=new n.LRUCache(t)),o)}},function(e,t,o){"use strict";function n(e){if(!e)return[];if(Array.isArray(e))return e.map(e=>function(e,t){const o={};for(const t in e)o[t]=e[t];for(const e in t)o[e]=t[e];return o}(e,{label:e.caption||e.label}));if("string"==typeof e)return n(JSON.parse(e));const t=[];for(const o in e)t.push({value:o,label:e[o]});return t}Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeToFn=t.normalize=void 0,t.normalize=n,t.normalizeToFn=function(e){return"function"==typeof e?t=>n(e(t)):()=>n(e)}},function(t,o,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&r(t,e,o);return i(t,e),t};Object.defineProperty(o,"__esModule",{value:!0}),o.DrawGrid=void 0;const l=s(n(29)),a=s(n(106)),c=s(n(57)),u=n(0),h=n(4),d=n(3),f=n(19),g=n(109),p=n(22),_=n(110),m=n(8),C=n(1),w=n(58),{isTouchEvent:b,getMouseButtons:y,getKeyCode:v,cancel:x}=u.event,E=C.getProtectedSymbol();function S(e){navigator.vibrate&&b(e)&&navigator.vibrate(50)}function O(e){const t=this.getTargetRowAtInternal(e);if(null!=t)return t;const o=(t,o)=>{let n=o;for(let o=t;o>=0;o--){const t=n-K.call(this,o);if(t<=e&&e<n)return{top:t,row:o};n=t}return null},n=(t,o)=>{let n=o-K.call(this,t);const{rowCount:r}=this[E];for(let o=t;o<r;o++){const t=n+K.call(this,o);if(n<=e&&e<t)return{top:n,row:o};n=t}return null},r=Math.min(Math.ceil(e/this[E].defaultRowHeight),this.rowCount-1),i=$.call(this,0,r);return e>=i?n(r,i):o(r,i)}function R(e,t){let o=0;const{colCount:n}=e[E];for(let r=0;r<n;r++){const n=o+G(e,r);if(n>t)return{left:o,col:r};o=n}return null}function I(e,t){if(!e[E].frozenRowCount)return null;let{top:o}=e[E].scroll;const n=e[E].frozenRowCount;for(let r=0;r<n;r++){const n=o+K.call(e,r);if(n>t)return{top:o,row:r};o=n}return null}function P(e,t){if(!e[E].frozenColCount)return null;let{left:o}=e[E].scroll;const n=e[E].frozenColCount;for(let r=0;r<n;r++){const n=o+G(e,r);if(n>t)return{left:o,col:r};o=n}return null}function M(e){if(!e[E].frozenRowCount)return null;const{top:t}=e[E].scroll;let o=0;const n=e[E].frozenRowCount;for(let t=0;t<n;t++)o+=K.call(e,t);return new p.Rect(e[E].scroll.left,t,e[E].canvas.width,o)}function T(e){if(!e[E].frozenColCount)return null;const{left:t}=e[E].scroll;let o=0;const n=e[E].frozenColCount;for(let t=0;t<n;t++)o+=G(e,t);return new p.Rect(t,e[E].scroll.top,o,e[E].canvas.height)}function B(e,t,o,n,r,i,s,l,a,c,h){const d=new p.Rect(o-l.left,i-l.top,n,s),f=p.Rect.bounds(Math.max(o,c)-l.left,Math.max(i,a)-l.top,d.right,d.bottom);if(f.height>0&&f.width>0){e.save();try{const o=function(e,t,o){return e[E].drawCells[o]?e[E].drawCells[o][t]:null}(this,t,r);o&&o.cancel();const n=new de(t,r,e,d,f,!!o,this[E].selection,h),i=this.onDrawCell(t,r,n);if(u.isPromise(i)){!function(e,t,o,n){e[E].drawCells[o]||(e[E].drawCells[o]={}),e[E].drawCells[o][t]=n}(this,t,r,n);const e=t;n._delayMode(this,()=>{!function(e,t,o){e[E].drawCells[o]&&(delete e[E].drawCells[o][t],0===Object.keys(e[E].drawCells[o]).length&&delete e[E].drawCells[o])}(this,e,r)}),i.then(()=>{n.terminate()})}}finally{e.restore()}}}function L(e,t,o,n,r,i,s,l,a,c,u){const{colCount:h}=e[E],d=(o,n)=>{if(o>=h-1&&e[E].canvas.width>n-a.left){const o=n-a.left;t.save(),t.beginPath(),t.fillStyle=e.underlayBackgroundColor||"#F6F6F6",t.rect(o,s-a.top,e[E].canvas.width-o,l),t.fill(),t.restore()}};let f=0;if(o){let n=o.left;const h=e[E].frozenColCount;for(let{col:f}=o;f<h;f++){const o=G(e,f);if(B.call(e,t,f,n,o,i,s,l,a,c,0,u),n+=o,r<=n)return void d(f,n)}f=n}let g=n.left;for(let{col:o}=n;o<h;o++){const n=G(e,o);if(B.call(e,t,o,g,n,i,s,l,a,c,f,u),g+=n,r<=g)return void d(o,g)}d(h-1,g)}function D(){return this._getInitContext()}function k(e,t){const o=oe(e),{rowCount:n}=e[E],r=D.call(e),i=O.call(e,Math.max(o.top,t.top))||{top:$.call(e,0,n-1),row:n},s=R(e,Math.max(o.left,t.left))||{left:Y(e,0,e[E].colCount-1),col:e[E].colCount},l=Math.min(o.bottom,t.bottom),a=Math.min(o.right,t.right),c=I(e,Math.max(o.top,t.top)),u=P(e,Math.max(o.left,t.left)),h=new ue,d=(t,i)=>{if(t>=n-1&&e[E].canvas.height>i-o.top){const t=i-o.top;r.save(),r.beginPath(),r.fillStyle=e.underlayBackgroundColor||"#F6F6F6",r.rect(0,t,e[E].canvas.width,e[E].canvas.height-t),r.fill(),r.restore()}};let f=0;if(c){let t=c.top;const n=e[E].frozenRowCount;for(let{row:i}=c;i<n;i++){const n=K.call(e,i);if(L(e,r,u,s,a,i,t,n,o,0,h),t+=n,l<=t)return d(i,t),void h.draw(r)}f=t}let g=i.top;for(let{row:t}=i;t<n;t++){const n=K.call(e,t);if(L(e,r,u,s,a,t,g,n,o,f,h),g+=n,l<=g)return d(t,g),void h.draw(r)}d(n-1,g),h.draw(r)}function A(e,t){return Math.round(l.toPx(t,e[E].calcWidthContext))}function j(e,t,o){const n=H(e,t);return Math.max(F(n,o),0)}function F(e,t){return e?e.min&&e.min>t?e.min:e.max&&e.max<t?e.max:t:t}function N(e,t){const o=e[E].colWidthsMap.get(t);return o||e.defaultColWidth}function H(e,t){const o=e[E].colWidthsLimit[t];if(!o)return null;const n={};return o.min&&(n.min=A(e,o.min),n.minDef=o.min),o.max&&(n.max=A(e,o.max),n.maxDef=o.max),n}function V(e){return Boolean(e&&"string"==typeof e&&"auto"===e.toLowerCase())}function z(e,t=!0){const o=e[E].calcWidthContext.full;let n=0;const r=[];let i=0;const s=[];for(let l=0;l<e[E].colCount;l++){const a=N(e,l),c=H(e,l);if(V(a))c&&(s.push(c),c.min&&(n+=c.min)),i++;else{let t=a;if(c){const o=A(e,t),r=F(c,o);o!==r&&(t=r+"px"),n+=r}r.push(t)}if(t&&n>o)return"0px"}if(s.length&&r.length){const n=(o-A(e,`calc(${r.map(e=>"number"==typeof e?e+"px":e).join(" + ")})`))/i;if(s.forEach(e=>{e.min&&n<e.min?(r.push(e.minDef),i--):e.max&&e.max<n&&(r.push(e.maxDef),i--)}),t&&i<=0)return n+"px"}if(r.length){const e=[];let t=0;return r.forEach(o=>{"number"==typeof o?t+=o:e.push(o)}),e.push(t+"px"),`calc((100% - (${e.join(" + ")})) / ${i})`}return 100/i+"%"}function W(e,t){return V(t)?A(e,z(e)):A(e,t)}function G(e,t){return j(e,t,W(e,N(e,t)))}function U(e,t,o){e[E].colWidthsMap.put(t,o)}function Y(e,t,o){const n=W(e,e.defaultColWidth);let r=n*(o-t+1);e[E].colWidthsMap.each(t,o,(t,o)=>{r+=j(e,o,W(e,t))-n});for(let i=t;i<=o;i++){if(e[E].colWidthsMap.has(i))continue;const t=j(e,i,n);t!==n&&(r+=t-n)}return r}function K(e){const t=this.getRowHeightInternal(e);if(null!=t)return t;const o=this[E].rowHeightsMap.get(e);return o||this[E].defaultRowHeight}function $(e,t){const o=this.getRowsHeightInternal(e,t);if(null!=o)return o;const n=t-e+1;let r=this[E].defaultRowHeight*n;return this[E].rowHeightsMap.each(e,t,e=>{r+=e-this[E].defaultRowHeight}),r}function X(e){const t=this.getScrollHeightInternal(e);if(null!=t)return t;let o=this[E].defaultRowHeight*this[E].rowCount;return this[E].rowHeightsMap.each(0,this[E].rowCount-1,e=>{o+=e-this[E].defaultRowHeight}),o}function q(e){var t,o,n;const{shiftKey:r}=e,i=v(e),s=r?this.selection.focus:this.selection.select;if(37===i){if(e.ctrlKey||e.metaKey)l(this,null,"W");else if(!c.call(this,"W"))return;x(e)}else if(38===i){if(e.ctrlKey||e.metaKey)l(this,"N",null);else if(!a.call(this,"N"))return;x(e)}else if(39===i){if(e.ctrlKey||e.metaKey)l(this,null,"E");else if(!c.call(this,"E"))return;x(e)}else if(40===i){if(e.ctrlKey||e.metaKey)l(this,"S",null);else if(!a.call(this,"S"))return;x(e)}else if(36===i)e.ctrlKey||e.metaKey?l(this,"N","W"):l(this,null,"W"),x(e);else if(35===i)e.ctrlKey||e.metaKey?l(this,"S","E"):l(this,null,"E"),x(e);else if((null===(t=this.keyboardOptions)||void 0===t?void 0:t.moveCellOnTab)&&9===i){if(r){if(!c.call(this,"W",!1)){const e=this.getMoveUpRowByKeyDownInternal(s);if(0>e)return;Z.call(this,this.colCount-1,e,!1)}}else if(!c.call(this,"E",!1)){const e=this.getMoveDownRowByKeyDownInternal(s);if(this.rowCount<=e)return;Z.call(this,0,e,!1)}x(e)}else if((null===(o=this.keyboardOptions)||void 0===o?void 0:o.moveCellOnEnter)&&13===i){if(r){if(!a.call(this,"N",!1)){const e=this.getMoveLeftColByKeyDownInternal(s);if(0>e)return;Z.call(this,e,this.rowCount-1,!1)}}else if(!a.call(this,"S",!1)){const e=this.getMoveRightColByKeyDownInternal(s);if(this.colCount<=e)return;Z.call(this,e,Math.min(this.frozenRowCount,this.rowCount-1),!1)}x(e)}else(null===(n=this.keyboardOptions)||void 0===n?void 0:n.selectAllOnCtrlA)&&65===i&&(e.ctrlKey||e.metaKey)&&(this.selection.range={start:{col:0,row:0},end:{col:this.colCount-1,row:this.rowCount-1}},this.invalidate(),x(e));function l(e,t,o){const n="S"===t?e.rowCount-1:"N"===t?0:s.row,i="E"===o?e.colCount-1:"W"===o?0:s.col;Z.call(e,i,n,r)}function a(e,t=r){let o;if("S"===e){if(o=this.getMoveDownRowByKeyDownInternal(s),this.rowCount<=o)return!1}else if(o=this.getMoveUpRowByKeyDownInternal(s),o<0)return!1;const{col:n}=s;return Z.call(this,n,o,t),!0}function c(e,t=r){let o;if("E"===e){if(o=this.getMoveRightColByKeyDownInternal(s),this.colCount<=o)return!1}else if(o=this.getMoveLeftColByKeyDownInternal(s),o<0)return!1;const{row:n}=s;return Z.call(this,o,n,t),!0}}function Z(e,t,o){const n=this.getOffsetInvalidateCells();function r(e){return n>0&&(e.start.col-=n,e.start.row-=n,e.end.col+=n,e.end.row+=n),e}const i=r(this.selection.range),s=this.getCellRangeRect(i);this.selection._setFocusCell(e,t,o),this.makeVisibleCell(e,t),this.focusCell(e,t);const l=r(this.selection.range),a=this.getCellRangeRect(l);a.intersection(s)?k(this,p.Rect.max(a,s)):(k(this,s),k(this,a))}function Q(){const{focusControl:e}=this[E],{col:t,row:o}=this[E].selection.select,n=this.fireListeners(h.DG_EVENT_TYPE.EDITABLEINPUT_CELL,{col:t,row:o}),r=u.array.findIndex(n,e=>!!e)>=0;e.editMode=r,r&&(e.storeInputStatus(),e.setDefaultInputStatus(),this.fireListeners(h.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL,{col:t,row:o,input:e.input}))}function J(t,o){let n;n=b(o)?o.changedTouches[0]:o;const r=n.clientX||n.pageX+e.scrollX,i=n.clientY||n.pageY+e.scrollY,s=t[E].canvas.getBoundingClientRect();return s.right<=r||s.bottom<=i?null:{x:r-s.left+t[E].scroll.left,y:i-s.top+t[E].scroll.top}}function ee(){const e=this,{handler:t,element:o,scrollable:n}=e[E],r=t=>{const o=J(e,t);if(!o)return{};const n=e.getCellAt(o.x,o.y);return n.col<0||n.row<0?{abstractPos:o,cell:n}:{abstractPos:o,cell:n,eventArgs:{col:n.col,row:n.row,event:t}}},i=t=>{if(e[E].disableColumnResize)return!1;const o=e[E].colWidthsLimit[t];return!(o&&o.min&&o.max)||o.max!==o.min};t.on(o,"mousedown",t=>{const o=r(t),{abstractPos:n,eventArgs:s}=o;if(!n)return;if(s){const t=e.fireListeners(h.DG_EVENT_TYPE.MOUSEDOWN_CELL,s);if(u.array.findIndex(t,e=>!e)>=0)return}if(1!==y(t))return;const l=te(e,n.x,n.y);l>=0&&i(l)?e[E].columnResizer.start(l,t):e[E].cellSelector.start(t)}),t.on(o,"mouseup",t=>{if(!e.hasListeners(h.DG_EVENT_TYPE.MOUSEUP_CELL))return;const{eventArgs:o}=r(t);o&&e.fireListeners(h.DG_EVENT_TYPE.MOUSEUP_CELL,o)});let s=null,l=null;function a(e){l&&(clearTimeout(l),l=null)}t.on(o,"touchstart",t=>{if(s){const{eventArgs:o}=r(t);if(o&&o.col===s.col&&o.row===s.row&&e.fireListeners(h.DG_EVENT_TYPE.DBLTAP_CELL,o),s=null,t.defaultPrevented)return}else s=r(t).eventArgs,setTimeout(()=>{s=null},350);l=setTimeout(()=>{l=null;const o=J(e,t);if(!o)return;const n=te(e,o.x,o.y,15);n>=0&&i(n)?e[E].columnResizer.start(n,t):e[E].cellSelector.start(t)},500)}),t.on(o,"touchcancel",a),t.on(o,"touchmove",a),t.on(o,"touchend",t=>{l&&(clearTimeout(l),e[E].cellSelector.select(t),l=null)});let c=!1,d=null,f=null;function g(t,o){e.fireListeners(h.DG_EVENT_TYPE.MOUSEENTER_CELL,{col:t.col,row:t.row,related:o}),d=t}function p(t){const o=d;return d=null,o&&e.fireListeners(h.DG_EVENT_TYPE.MOUSELEAVE_CELL,{col:o.col,row:o.row,related:t}),o||void 0}function _(t,o){e.fireListeners(h.DG_EVENT_TYPE.MOUSEOVER_CELL,{col:t.col,row:t.row,related:o}),f=t}function m(t){const o=f;return f=null,o&&e.fireListeners(h.DG_EVENT_TYPE.MOUSEOUT_CELL,{col:o.col,row:o.row,related:t}),o||void 0}const C=n.getElement();t.on(C,"mouseover",e=>{c=!0}),t.on(C,"mouseout",e=>{c=!1,m()}),t.on(o,"mouseleave",e=>{p()}),t.on(o,"mousemove",t=>{const n=r(t),{abstractPos:s,eventArgs:l}=n;if(l){const t=d;if(t)if(e.fireListeners(h.DG_EVENT_TYPE.MOUSEMOVE_CELL,l),t.col!==l.col||t.row!==l.row){const e={col:l.col,row:l.row},t=m(e);g(e,p(e)),c&&_(e,t)}else c&&!f&&_({col:l.col,row:l.row});else{const t={col:l.col,row:l.row};g(t),c&&_(t),e.fireListeners(h.DG_EVENT_TYPE.MOUSEMOVE_CELL,l)}}else m(),p();if(e[E].columnResizer.moving(t)||e[E].cellSelector.moving(t))return;const{style:a}=o;if(!s)return void("col-resize"===a.cursor&&(a.cursor=""));const u=te(e,s.x,s.y);u>=0&&i(u)?a.cursor="col-resize":"col-resize"===a.cursor&&(a.cursor="")}),t.on(o,"click",t=>{if(e[E].columnResizer.lastMoving(t)||e[E].cellSelector.lastMoving(t))return;if(!e.hasListeners(h.DG_EVENT_TYPE.CLICK_CELL))return;const{eventArgs:o}=r(t);o&&e.fireListeners(h.DG_EVENT_TYPE.CLICK_CELL,o)}),t.on(o,"contextmenu",t=>{if(!e.hasListeners(h.DG_EVENT_TYPE.CONTEXTMENU_CELL))return;const{eventArgs:o}=r(t);o&&e.fireListeners(h.DG_EVENT_TYPE.CONTEXTMENU_CELL,o)}),t.on(o,"dblclick",t=>{if(!e.hasListeners(h.DG_EVENT_TYPE.DBLCLICK_CELL))return;const{eventArgs:o}=r(t);o&&e.fireListeners(h.DG_EVENT_TYPE.DBLCLICK_CELL,o)}),e[E].focusControl.onKeyDown(t=>{e.fireListeners(h.DG_EVENT_TYPE.KEYDOWN,t)}),e[E].selection.listen(h.DG_EVENT_TYPE.SELECTED_CELL,t=>{e.fireListeners(h.DG_EVENT_TYPE.SELECTED_CELL,t,t.selected)}),n.onScroll(t=>{!function(e,t){const o=e[E].scroll.left,n=e[E].scroll.top,r=e[E].scrollable.scrollLeft-o,i=e[E].scrollable.scrollTop-n;e[E].scroll={left:e[E].scrollable.scrollLeft,top:e[E].scrollable.scrollTop};const s=oe(e);if(Math.abs(r)>=s.width||Math.abs(i)>=s.height)k(e,s);else{if(e[E].context.drawImage(e[E].canvas,-r,-i),0!==r){const t=s.copy();if(r<0){if(t.width=-r,e[E].frozenColCount>0){const o=T(e);t.width+=o.width}}else r>0&&(t.left=t.right-r);k(e,t),r>0&&e[E].frozenColCount>0&&k(e,T(e))}if(0!==i){const t=s.copy();if(i<0){if(t.height=-i,e[E].frozenRowCount>0){const o=M(e);t.height+=o.height}}else i>0&&(t.top=t.bottom-i);k(e,t),i>0&&e[E].frozenRowCount>0&&k(e,M(e))}}}(e),e.fireListeners(h.DG_EVENT_TYPE.SCROLL,{event:t})}),e[E].focusControl.onKeyDownMove(t=>{q.call(e,t)}),e.listen("copydata",t=>{const o=e.getCopyRangeInternal(t);let n="";for(let{row:t}=o.start;t<=o.end.row;t++){for(let{col:r}=o.start;r<=o.end.col;r++){const i=e.getCopyCellValue(r,t,o);if("undefined"!=typeof Promise&&i instanceof Promise);else{const e=""+i;/^\[object .*\]$/.exec(e)||(n+=e)}r<o.end.col&&(n+="\t")}n+="\n"}return n}),e[E].focusControl.onCopy(t=>u.array.find(e.fireListeners("copydata",e[E].selection.range),e=>null!=e)),e[E].focusControl.onPaste(({value:t,event:o})=>{const n=t.replace(/\r?\n$/,""),{col:r,row:i}=e[E].selection.select,s=/[\r\n\u2028\u2029\t]/.test(n);let l=null;const a={col:r,row:i,value:t,normalizeValue:n,multi:s,get rangeBoxValues(){return null!=l?l:l=w.parsePasteRangeBoxValues(n)},event:o};e.fireListeners(h.DG_EVENT_TYPE.PASTE_CELL,a)}),e[E].focusControl.onInput(t=>{const{col:o,row:n}=e[E].selection.select;e.fireListeners(h.DG_EVENT_TYPE.INPUT_CELL,{col:o,row:n,value:t})}),e[E].focusControl.onDelete(t=>{const{col:o,row:n}=e[E].selection.select;e.fireListeners(h.DG_EVENT_TYPE.DELETE_CELL,{col:o,row:n,event:t})}),e[E].focusControl.onFocus(t=>{e.fireListeners(h.DG_EVENT_TYPE.FOCUS_GRID,t),e[E].focusedGrid=!0;const{col:o,row:n}=e[E].selection.select;e.invalidateCell(o,n)}),e[E].focusControl.onBlur(t=>{e.fireListeners(h.DG_EVENT_TYPE.BLUR_GRID,t),e[E].focusedGrid=!1;const{col:o,row:n}=e[E].selection.select;e.invalidateCell(o,n)})}function te(e,t,o,n=5){if(e[E].frozenRowCount<=0)return-1;if(!M(e).inPoint(t,o))return-1;const r=e.getCellAt(t,o),i=e.getCellRect(r.col,r.row);return t<i.left+n?r.col-1:i.right-n<t?r.col:-1}function oe(e){const{scroll:{left:t,top:o},canvas:{width:n,height:r}}=e[E];return new p.Rect(t,o,n,r)}function ne(e,t){const o=t.copy(),n=oe(e);return o.offsetLeft(-n.left),o.offsetTop(-n.top),o}class re{constructor(e){this._grid=e,this._handler=new d.EventHandler,this._events={},this._started=!1,this._moved=!1}moving(e){return!!this._started}lastMoving(e){if(this.moving(e))return!0;const t=this._mouseEndPoint;if(!t)return!1;const o=J(this._grid,e);return null!=o&&o.x===t.x&&o.y===t.y}_bindMoveAndUp(e){const t=this._events,o=this._handler;b(e)?(t.touchmove=o.on(document.body,"touchmove",e=>this._mouseMove(e),{passive:!1}),t.touchend=o.on(document.body,"touchend",e=>this._mouseUp(e)),t.touchcancel=o.on(document.body,"touchcancel",e=>this._mouseUp(e))):(t.mousemove=o.on(document.body,"mousemove",e=>this._mouseMove(e)),t.mouseup=o.on(document.body,"mouseup",e=>this._mouseUp(e))),this._started=!0,this._moved=!1}_mouseMove(e){b(e)||1===y(e)?(this._moved=this._moveInternal(e)||this._moved,x(e)):this._mouseUp(e)}_moveInternal(e){return!1}_mouseUp(e){const t=this._events,o=this._handler;o.off(t.mousemove),o.off(t.touchmove),o.off(t.mouseup),o.off(t.touchend),o.off(t.touchcancel),this._started=!1,this._upInternal(e),this._moved&&(this._mouseEndPoint=J(this._grid,e),setTimeout(()=>{this._mouseEndPoint=null},10))}_upInternal(e){}dispose(){this._handler.dispose()}}class ie extends re{start(e){const t=this._getTargetCell(e);t&&(Z.call(this._grid,t.col,t.row,e.shiftKey),this._bindMoveAndUp(e),this._cell=t,x(e),S(e))}select(e){const t=this._getTargetCell(e);t&&(Z.call(this._grid,t.col,t.row,e.shiftKey),this._cell=t)}_moveInternal(e){const t=this._getTargetCell(e);if(!t)return!1;const{col:o,row:n}=this._cell,{col:r,row:i}=t;if(o===r&&n===i)return!1;const s=this._grid;Z.call(s,r,i,!0);const l=r<o&&0<r?r-1:o<r&&r+1<s.colCount?r+1:r,a=i<n&&0<i?i-1:n<i&&i+1<s.rowCount?i+1:i;return l===r&&a===i||s.makeVisibleCell(l,a),this._cell=t,!0}_getTargetCell(e){const t=this._grid,o=J(t,e);if(!o)return null;const n=t.getCellAt(o.x,o.y);return n.col<0||n.row<0?null:n}}class se extends re{constructor(e){super(e),this._x=-1,this._preX=-1,this._invalidateAbsoluteLeft=-1,this._targetCol=-1}start(e,t){let o;b(t)?({pageX:o}=t.changedTouches[0]):({pageX:o}=t),this._x=o,this._preX=0,this._bindMoveAndUp(t),this._targetCol=e,this._invalidateAbsoluteLeft=Y(this._grid,0,e-1),x(t),S(t)}_moveInternal(e){const t=(b(e)?e.changedTouches[0].pageX:e.pageX)-this._x,o=t-this._preX;this._preX=t;const n=this._grid.getColWidth(this._targetCol);let r=j(this._grid,this._targetCol,n+o);r<10&&o<0&&(r=10),function(e){let t=null;for(let o=0;o<e[E].colCount;o++)V(N(e,o))&&U(e,o,t||(t=z(e,!1)))}(this._grid),U(this._grid,this._targetCol,r);const i=oe(this._grid);return i.left=this._invalidateAbsoluteLeft,k(this._grid,i),this._grid.fireListeners(h.DG_EVENT_TYPE.RESIZE_COLUMN,{col:this._targetCol}),!0}_upInternal(e){const t=this._grid;t.updateScroll()&&t.invalidate()}}function le(e,t){const{type:o}=e;e.type="",e.value=t,o&&(e.type=o)}class ae extends f.EventTarget{constructor(t,o,n){super(),this._grid=t,this._scrollable=n;const r=this._handler=new d.EventHandler,i=this._input=document.createElement("input");let s;i.classList.add("grid-focus-control"),i.readOnly=!0,o.appendChild(i),r.on(i,"compositionstart",e=>{i.classList.add("composition"),i.style.font=t.font||"16px sans-serif",this._isComposition=!0,this._compositionEnd&&(clearTimeout(this._compositionEnd),delete this._compositionEnd),t.focus()});const l=()=>{s=i.value,this._isComposition||""!==s&&le(i,"")},a=()=>{this._isComposition=!1,i.classList.remove("composition"),i.style.font="";const{value:e}=i;l(),i.readOnly||this.fireListeners("input",e),this._compositionEnd&&(clearTimeout(this._compositionEnd),delete this._compositionEnd)};r.on(i,"compositionend",e=>{this._compositionEnd=setTimeout(a,1)}),r.on(i,"keypress",e=>{if(!this._isComposition){if(!i.readOnly&&e.key&&1===e.key.length)if(e.ctrlKey||e.metaKey)"c"===e.key||e.key;else{if(" "===e.key)return;this.fireListeners("input",e.key),x(e)}l()}}),r.on(i,"keydown",e=>{var t;if(this._isComposition)return void(this._compositionEnd&&(a(),x(e)));const o=v(e);let n=!1;const r={keyCode:o,event:e,stopCellMoving(){n=!0}};this.fireListeners("keydown",r),!i.readOnly&&s&&this.fireListeners("input",s),n||this.fireKeyDownMove(o,e),!(null===(t=this._grid.keyboardOptions)||void 0===t?void 0:t.deleteCellValueOnDel)||46!==o&&8!==o||this.fireListeners("delete",e),l()}),r.on(i,"keyup",e=>{this._isComposition&&this._compositionEnd&&a(),l()}),r.on(i,"input",e=>{" "!==e.data&&"　"!==e.data||this.fireListeners("input",e.data),l()}),u.browser.IE&&r.on(document,"keydown",e=>{if(e.target!==i)return;const t=v(e);67===t&&e.ctrlKey?(le(i,"dummy"),i.select(),setTimeout(()=>{le(i,"")},100)):86===t&&e.ctrlKey&&i.readOnly&&(i.readOnly=!1,setTimeout(()=>{i.readOnly=!0,le(i,"")},10))}),u.browser.Edge&&r.once(document,"keydown",e=>{var n;if(!u.isDescendantElement(o,e.target))return;const r=document.createElement("input");t.getElement().appendChild(r),r.focus(),i.focus(),null===(n=r.parentElement)||void 0===n||n.removeChild(r)}),r.on(document,"paste",t=>{if(!u.isDescendantElement(o,t.target))return;let n=void 0;if(u.browser.IE)n=e.clipboardData.getData("Text");else{const{clipboardData:e}=t;e.items?n=e.getData("text/plain"):-1!==Array.prototype.indexOf.call(e.types,"text/plain")&&(n=e.getData("Text"))}null!=n&&n.length&&this.fireListeners("paste",{value:n,event:t})}),r.on(document,"copy",t=>{if(this._isComposition)return;if(!u.isDescendantElement(o,t.target))return;le(i,"");const n=u.array.find(this.fireListeners("copy"),e=>null!=e);null!=n&&(x(t),u.browser.IE?e.clipboardData.setData("Text",n):t.clipboardData.setData("text/plain",n))}),r.on(i,"focus",e=>{this.fireListeners("focus",e)}),r.on(i,"blur",e=>{this.fireListeners("blur",e)})}fireKeyDownMove(e,t){var o,n,r;const i=this._keyDownMoveCallback;i&&(this._isComposition||(37===e||38===e||39===e||40===e||36===e||35===e||(null===(o=this._grid.keyboardOptions)||void 0===o?void 0:o.moveCellOnTab)&&9===e||(null===(n=this._grid.keyboardOptions)||void 0===n?void 0:n.moveCellOnEnter)&&13===e||(null===(r=this._grid.keyboardOptions)||void 0===r?void 0:r.selectAllOnCtrlA)&&65===e&&(t.ctrlKey||t.metaKey))&&i(t))}onKeyDownMove(e){this._keyDownMoveCallback=e}onKeyDown(e){return this.listen("keydown",e)}onInput(e){return this.listen("input",e)}onDelete(e){return this.listen("delete",e)}onCopy(e){return this.listen("copy",e)}onPaste(e){return this.listen("paste",e)}onFocus(e){return this.listen("focus",e)}onBlur(e){return this.listen("blur",e)}focus(){this._input.focus()}setFocusRect(e){const t=this._input,o=this._scrollable.calcTop(e.top);t.style.top=(o-c.getScrollBarSize()).toFixed()+"px",t.style.left=e.left.toFixed()+"px",t.style.width=e.width.toFixed()+"px",t.style.height=e.height.toFixed()+"px"}get editMode(){return!this._input.readOnly}set editMode(e){this._input.readOnly=!e}resetInputStatus(){var e;const t=this._input;if(!t.classList.contains("grid-focus-control--stored-status"))return;const o=t.classList.contains("composition"),n=t.attributes,r=[];for(let t=0,o=n.length;t<o;t++){const o=n[t];(null===(e=this._inputStatus)||void 0===e?void 0:e.hasOwnProperty(o.nodeName))||r.push(o.name)}r.forEach(e=>{t.removeAttribute(e)});for(const e in this._inputStatus)t.setAttribute(e,this._inputStatus[e]);o?(t.classList.add("composition"),t.style.font=this._grid.font||"16px sans-serif"):t.classList.remove("composition"),t.classList.remove("grid-focus-control--stored-status")}storeInputStatus(){const e=this._input;if(e.classList.contains("grid-focus-control--stored-status"))return;const t=this._inputStatus={},o=e.attributes;for(let e=0,n=o.length;e<n;e++){const n=o[e];t[n.name]=n.value}e.classList.add("grid-focus-control--stored-status")}setDefaultInputStatus(){}get input(){return this._input}dispose(){super.dispose(),this._handler.dispose()}}class ce extends f.EventTarget{constructor(e){super(),this._grid=e,this._sel={col:0,row:0},this._focus={col:0,row:0},this._start={col:0,row:0},this._end={col:0,row:0}}get range(){const e=this._start,t=this._end;return{start:{col:Math.min(e.col,t.col),row:Math.min(e.row,t.row)},end:{col:Math.max(e.col,t.col),row:Math.max(e.row,t.row)}}}set range(e){const t=Math.min(e.start.col,e.end.col),o=Math.min(e.start.row,e.end.row),n=Math.max(e.start.col,e.end.col),r=Math.max(e.start.row,e.end.row);this._wrapFireSelectedEvent(()=>{this._sel={col:t,row:o},this._focus={col:t,row:o},this._start={col:t,row:o},this._end={col:n,row:r},Q.call(this._grid)})}get focus(){const{col:e,row:t}=this._focus;return{col:e,row:t}}get select(){const{col:e,row:t}=this._sel;return{col:e,row:t}}set select(e){this._wrapFireSelectedEvent(()=>{const{col:t=0,row:o=0}=e;this._setSelectCell(t,o),this._setFocusCell(t,o,!0),Q.call(this._grid)})}_setSelectCell(e,t){this._wrapFireSelectedEvent(()=>{this._sel={col:e,row:t},this._start={col:e,row:t}})}_setFocusCell(e,t,o){this._wrapFireSelectedEvent(()=>{o||this._setSelectCell(e,t),this._focus={col:e,row:t},this._end={col:e,row:t}})}_wrapFireSelectedEvent(e){if(this._isWraped)e();else{this._isWraped=!0;try{const t={col:this._sel.col,row:this._sel.row,selected:!1,after:null};e();const o={col:this._sel.col,row:this._sel.row,selected:!0,before:{col:t.col,row:t.row}};t.after={col:o.col,row:o.row},this.fireListeners(h.DG_EVENT_TYPE.SELECTED_CELL,t),this.fireListeners(h.DG_EVENT_TYPE.SELECTED_CELL,o)}finally{this._isWraped=!1}}}_updateGridRange(){const{rowCount:e,colCount:t}=this._grid,o=[this._sel,this._focus,this._start,this._end];let n=!1;for(let r=0;r<o.length;r++)if(t<=o[r].col||e<=o[r].row){n=!0;break}return!!n&&(this._wrapFireSelectedEvent(()=>{o.forEach(o=>{o.col=Math.min(t-1,o.col),o.row=Math.min(e-1,o.row)})}),!0)}}class ue{constructor(){this._layers={}}addDraw(e,t){(this._layers[e]||(this._layers[e]=new he(e))).addDraw(t)}draw(e){const t=[];for(const e in this._layers)t.push(this._layers[e]);t.sort((e,t)=>e.level-t.level),t.forEach(t=>t.draw(e))}}class he{constructor(e){this._level=e,this._list=[]}get level(){return this._level}addDraw(e){this._list.push(e)}draw(e){this._list.forEach(t=>{e.save();try{t(e)}finally{e.restore()}})}}class de{constructor(e,t,o,n,r,i,s,l){this._rectFilter=null,this._col=e,this._row=t,this._mode=0,this._ctx=o,this._rect=n,this._drawRect=r,this._drawing=i,this._selection=s,this._drawLayers=l,this._childContexts=[]}get drawing(){return 0!==this._mode||this._drawing}get row(){return this._row}get col(){return this._col}cancel(){this._cancel=!0,this._childContexts.forEach(e=>{e.cancel()})}getSelection(){return{select:this._selection.select,range:this._selection.range}}getContext(){return 0===this._mode?this._ctx:D.call(this._grid)}getRect(){const e=this._rectFilter;return e?e(this._getRectInternal()):this._getRectInternal()}setRectFilter(e){this._rectFilter=e}getDrawRect(){if(this._cancel)return null;if(0===this._mode)return this._drawRect;{if(this._isOutOfRange())return null;const e=this._grid.getCellRect(this._col,this._row);return this._toRelativeDrawRect(e)}}_isOutOfRange(){const{colCount:e,rowCount:t}=this._grid;return e<=this._col||t<=this._row}toCurrentContext(){if(0===this._mode)return this;{const e=this._grid.getCellRect(this._col,this._row),t=ne(this._grid,e),o=this._isOutOfRange()?null:this._toRelativeDrawRect(e),n=new de(this._col,this._row,this.getContext(),t,o,this.drawing,this._selection,this._drawLayers);return n.toCurrentContext=this.toCurrentContext.bind(this),this._childContexts.push(n),this._cancel&&n.cancel(),n._rectFilter=this._rectFilter,n}}addLayerDraw(e,t){this._drawLayers.addDraw(e,t)}_toRelativeDrawRect(e){const t=oe(this._grid);let o=e.copy();if(!o.intersection(t))return null;const n=this._grid,r=n.isFrozenCell(this._col,this._row);if(n.frozenColCount>=0&&(!r||!r.col)){const e=n.getCellRect(n.frozenColCount-1,this._row);o=p.Rect.bounds(Math.max(o.left,e.right),o.top,o.right,o.bottom)}if(n.frozenRowCount>=0&&(!r||!r.row)){const e=n.getCellRect(this._col,n.frozenRowCount-1);o=p.Rect.bounds(o.left,Math.max(o.top,e.bottom),o.right,o.bottom)}return o.intersection(t)?(o.offsetLeft(-t.left),o.offsetTop(-t.top),o):null}_delayMode(e,t){this._mode=1,this._ctx=null,this._rect=null,this._drawRect=null,this._grid=e,this._onTerminate=t}terminate(){var e;0!==this._mode&&(null===(e=this._onTerminate)||void 0===e||e.call(this))}_getRectInternal(){return 0===this._mode||this._rect?this._rect:this._grid.getCellRelativeRect(this._col,this._row)}}class fe extends f.EventTarget{constructor(e={}){super();const{rowCount:t=10,colCount:o=10,frozenColCount:n=0,frozenRowCount:r=0,defaultRowHeight:i=40,defaultColWidth:s=80,font:l,underlayBackgroundColor:u,keyboardOptions:h,parentElement:f,disableColumnResize:p}=e,C=this[E]={};c.initDocument(),C.element=function(){const e=document.createElement("div");return e.classList.add("cheetah-grid"),e}(),C.scrollable=new _.Scrollable,C.handler=new d.EventHandler,C.selection=new ce(this),C.focusControl=new ae(this,C.scrollable.getElement(),C.scrollable),C.canvas=a.transform(document.createElement("canvas")),C.context=C.canvas.getContext("2d",{alpha:!1}),C.rowCount=t,C.colCount=o,C.frozenColCount=n,C.frozenRowCount=r,C.defaultRowHeight=i,C.defaultColWidth=s,C.font=l,C.underlayBackgroundColor=u,C.keyboardOptions=h,C.disableColumnResize=p,C.rowHeightsMap=new g.NumberMap,C.colWidthsMap=new g.NumberMap,C.colWidthsLimit={},C.calcWidthContext={_:C,get full(){return this._.canvas.width},get em(){return m.getFontSize(this._.context,this._.font).width}},C.columnResizer=new se(this),C.cellSelector=new ie(this),C.drawCells={},C.cellTextOverflows={},C.focusedGrid=!1,C.element.appendChild(C.canvas),C.element.appendChild(C.scrollable.getElement()),C.scroll={left:0,top:0},this.updateScroll(),f?(f.appendChild(C.element),this.updateSize()):this.updateSize(),ee.call(this),this.bindEventsInternal()}static get EVENT_TYPE(){return h.DG_EVENT_TYPE}getElement(){return this[E].element}get canvas(){return this[E].canvas}focus(){const{col:e,row:t}=this[E].selection.select;this.focusCell(e,t)}hasFocusGrid(){return this[E].focusedGrid}get selection(){return this[E].selection}get rowCount(){return this[E].rowCount}set rowCount(e){if(this[E].rowCount=e,this.updateScroll(),this[E].selection._updateGridRange()){const{col:e,row:t}=this[E].selection.focus;this.makeVisibleCell(e,t),this.setFocusCursor(e,t)}}get colCount(){return this[E].colCount}set colCount(e){if(this[E].colCount=e,this.updateScroll(),this[E].selection._updateGridRange()){const{col:e,row:t}=this[E].selection.focus;this.makeVisibleCell(e,t),this.setFocusCursor(e,t)}}get frozenColCount(){return this[E].frozenColCount}set frozenColCount(e){this[E].frozenColCount=e}get frozenRowCount(){return this[E].frozenRowCount}set frozenRowCount(e){this[E].frozenRowCount=e}get defaultRowHeight(){return this[E].defaultRowHeight}set defaultRowHeight(e){this[E].defaultRowHeight=e}get defaultColWidth(){return this[E].defaultColWidth}set defaultColWidth(e){this[E].defaultColWidth=e}get font(){return this[E].font}set font(e){this[E].font=e}get underlayBackgroundColor(){return this[E].underlayBackgroundColor}set underlayBackgroundColor(e){this[E].underlayBackgroundColor=e}get keyboardOptions(){var e;return null!==(e=this[E].keyboardOptions)&&void 0!==e?e:null}set keyboardOptions(e){this[E].keyboardOptions=null!=e?e:void 0}configure(e,t){const o=this[E].config||(this[E].config={});return null!=t&&(o[e]=t),o[e]}updateSize(){const{canvas:e}=this[E];e.style.width="",e.style.height="";const t=Math.floor(e.offsetWidth||e.parentElement.offsetWidth-c.getScrollBarSize()),o=Math.floor(e.offsetHeight||e.parentElement.offsetHeight-c.getScrollBarSize());e.width=t,e.height=o,e.style.width=t+"px",e.style.height=o+"px";const n=this[E].selection.select;this[E].focusControl.setFocusRect(this.getCellRect(n.col,n.row))}updateScroll(){const{scrollable:e}=this[E],t=X.call(this),o=Y(n=this,0,n[E].colCount-1);var n;return(t!==e.scrollHeight||o!==e.scrollWidth)&&(e.setScrollSize(o,t),this[E].scroll={left:e.scrollLeft,top:e.scrollTop},!0)}getRowHeight(e){return K.call(this,e)}setRowHeight(e,t){!function(e,t,o){e[E].rowHeightsMap.put(t,o)}(this,e,t)}getColWidth(e){return G(this,e)}setColWidth(e,t){U(this,e,t)}getMaxColWidth(e){const t=this[E].colWidthsLimit[e];return t&&t.max||void 0}setMaxColWidth(e,t){(this[E].colWidthsLimit[e]||(this[E].colWidthsLimit[e]={})).max=t}getMinColWidth(e){const t=this[E].colWidthsLimit[e];return t&&t.min||void 0}setMinColWidth(e,t){(this[E].colWidthsLimit[e]||(this[E].colWidthsLimit[e]={})).min=t}getCellRect(e,t){const o=this.isFrozenCell(e,t);let n=Y(this,0,e-1);const r=G(this,e);o&&o.col&&(n+=this[E].scroll.left);let i=$.call(this,0,t-1);const s=K.call(this,t);return o&&o.row&&(i+=this[E].scroll.top),new p.Rect(n,i,r,s)}getCellRelativeRect(e,t){return ne(this,this.getCellRect(e,t))}getCellsRect(e,t,o,n){const r=this.isFrozenCell(e,t),i=this.isFrozenCell(o,n);let s=Y(this,0,e-1),l=Y(this,e,o);if(r&&r.col){const t=this[E].scroll.left;s+=t,i&&i.col||(l-=t,l=Math.max(l,Y(this,e,this.frozenColCount-1)))}let a=$.call(this,0,t-1),c=$.call(this,t,n);if(r&&r.row){const e=this[E].scroll.top;a+=e,i&&i.row||(c-=e,c=Math.max(c,Y(this,t,this.frozenRowCount-1)))}return new p.Rect(s,a,l,c)}getCellRangeRect(e){return this.getCellsRect(e.start.col,e.start.row,e.end.col,e.end.row)}isFrozenCell(e,t){const{frozenRowCount:o,frozenColCount:n}=this[E],r=o>0&&t<o,i=n>0&&e<n;return r||i?{row:r,col:i}:null}getRowAt(e){const t=I(this,e);if(t)return t.row;const o=O.call(this,e);return o?o.row:-1}getColAt(e){const t=P(this,e);if(t)return t.col;const o=R(this,e);return o?o.col:-1}getCellAt(e,t){return{row:this.getRowAt(t),col:this.getColAt(e)}}makeVisibleCell(e,t){const o=this.isFrozenCell(e,t);if(o&&o.col&&o.row)return;const n=this.getCellRect(e,t),r=function(e){let t=0;e[E].frozenColCount>0&&(t=T(e).width);let o=0;return e[E].frozenRowCount>0&&(o=M(e).height),new p.Rect(e[E].scrollable.scrollLeft+t,e[E].scrollable.scrollTop+o,e[E].canvas.width-t,e[E].canvas.height-o)}(this);if(r.contains(n))return;const{scrollable:i}=this[E];o&&o.col||(n.left<r.left?i.scrollLeft-=r.left-n.left:r.right<n.right&&(i.scrollLeft-=r.right-n.right)),o&&o.row||(n.top<r.top?i.scrollTop-=r.top-n.top:r.bottom<n.bottom&&(i.scrollTop-=r.bottom-n.bottom))}setFocusCursor(e,t){const{focusControl:o}=this[E],n=o.editMode;o.setFocusRect(this.getCellRect(e,t)),Q.call(this),n&&!o.editMode&&o.resetInputStatus()}focusCell(e,t){this.setFocusCursor(e,t),this[E].focusControl.focus()}invalidateCell(e,t){this.invalidateGridRect(e,t)}invalidateGridRect(e,t,o=e,n=t){const r=this.getOffsetInvalidateCells();r>0&&(e-=r,t-=r,o+=r,n+=r);const i=oe(this),s=this.getCellsRect(e,t,o,n),l=i.intersection(s);if(l){const{frozenColCount:e,frozenRowCount:t}=this[E];if(e>0&&o>=e){const e=T(this);e.intersection(l)&&(l.left=Math.min(e.right-1,l.left))}if(t>0&&n>=t){const e=M(this);e.intersection(l)&&(l.top=Math.min(e.bottom-1,l.top))}k(this,l)}}invalidateCellRange(e){this.invalidateGridRect(e.start.col,e.start.row,e.end.col,e.end.row)}invalidate(){k(this,oe(this))}get visibleRowCount(){const{frozenRowCount:e}=this,t=oe(this),o=e>0?t.top+$.call(this,0,e-1):t.top,n=O.call(this,o);if(!n)return 0;const r=Math.max(n.top>=o?n.row:n.row+1,e);let i=$.call(this,0,r-1),s=0;const{rowCount:l}=this;for(let e=r;e<l;e++){const o=i+K.call(this,e);if(t.bottom<o)break;s++,i=o}return s}get visibleColCount(){const{frozenColCount:e}=this,t=oe(this),o=e>0?t.left+Y(this,0,e-1):t.left,n=R(this,o);if(!n)return 0;const r=Math.max(n.left>=o?n.col:n.col+1,e);let i=Y(this,0,r-1),s=0;const{colCount:l}=this;for(let e=r;e<l;e++){const o=i+G(this,e);if(t.right<o)break;s++,i=o}return s}get topRow(){const{frozenRowCount:e}=this,t=oe(this),o=e>0?t.top+$.call(this,0,e-1):t.top,n=O.call(this,o);return n?Math.max(n.top>=o?n.row:n.row+1,e):0}get leftCol(){const{frozenColCount:e}=this,t=oe(this),o=e>0?t.left+Y(this,0,e-1):t.left,n=R(this,o);return n?Math.max(n.left>=o?n.col:n.col+1,e):0}get scrollTop(){return this[E].scrollable.scrollTop}set scrollTop(e){this[E].scrollable.scrollTop=e}get scrollLeft(){return this[E].scrollable.scrollLeft}set scrollLeft(e){this[E].scrollable.scrollLeft=e}getCopyCellValue(e,t,o){}getCellOverflowText(e,t){const o=`${e}:${t}`;return this[E].cellTextOverflows[o]||null}setCellOverflowText(e,t,o){const n=`${e}:${t}`;o?this[E].cellTextOverflows[n]="string"==typeof o?o.trim():o:delete this[E].cellTextOverflows[n]}addDisposable(e){if(!e||!e.dispose||"function"!=typeof e.dispose)throw new Error("not disposable!");(this[E].disposables=this[E].disposables||[]).push(e)}dispose(){super.dispose();const e=this[E];e.handler.dispose(),e.scrollable.dispose(),e.focusControl.dispose(),e.columnResizer.dispose(),e.cellSelector.dispose(),e.disposables&&(e.disposables.forEach(e=>e.dispose()),e.disposables=null);const{parentElement:t}=e.element;t&&t.removeChild(e.element)}getAttachCellsArea(e){return{element:this.getElement(),rect:ne(this,this.getCellRangeRect(e))}}onKeyDownMove(e){q.call(this,e)}bindEventsInternal(){}getTargetRowAtInternal(e){}getRowsHeightInternal(e,t){}getRowHeightInternal(e){}getScrollHeightInternal(e){}getMoveLeftColByKeyDownInternal({col:e}){return e-1}getMoveRightColByKeyDownInternal({col:e}){return e+1}getMoveUpRowByKeyDownInternal({row:e}){return e-1}getMoveDownRowByKeyDownInternal({row:e}){return e+1}getOffsetInvalidateCells(){return 0}getCopyRangeInternal(e){return e}_getInitContext(){const e=this[E].context;return e.fillStyle="white",e.strokeStyle="black",e.textAlign="left",e.textBaseline="top",e.lineWidth=1,e.font=this.font||"16px sans-serif",e}fireListeners(e,...t){return super.fireListeners(e,...t)}}o.DrawGrid=fe},function(t,o,n){"use strict";let r;Object.defineProperty(o,"__esModule",{value:!0}),o.getScrollBarSize=o.initDocument=void 0;let i=function(){n(107),r=function(){const t=document.createElement("div"),{style:o}=t;o.position="absolute",o.height="9999px",o.width="calc(100vw - 100%)",o.opacity="0",t.textContent="x",document.body.appendChild(t);const{width:n}=(document.defaultView||e).getComputedStyle(t,"");return document.body.removeChild(t),parseInt(n,10)}()||10;const t=document.createElement("style");t.setAttribute("type","text/css"),t.setAttribute("data-name","cheetah-grid"),t.innerHTML=`\n.cheetah-grid .grid-scroll-end-point {\n\twidth: ${r}px;\n\theight: ${r}px;\n}\n.cheetah-grid > canvas {\n\twidth: -webkit-calc(100% - ${r}px);\n\twidth: calc(100% - ${r}px);\n\theight: -webkit-calc(100% - ${r}px);\n\theight: calc(100% - ${r}px);\n}\n\t\t`,document.head.appendChild(t)};o.initDocument=function(){i(),i=Function.prototype},o.getScrollBarSize=function(){return r}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePasteRangeBoxValues=void 0,t.parsePasteRangeBoxValues=function(e){const t=e.replace(/\r?\n$/,"").split(/(?:\r?\n)|[\u2028\u2029]/g).map(e=>e.split(/\t/g));return{colCount:t.reduce((e,t)=>Math.max(e,t.length),0),rowCount:t.length,getCellValue(e,o){var n;return(null===(n=t[o])||void 0===n?void 0:n[e])||""}}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterDataSource=t.CachedDataSource=t.DataSource=void 0;const n=o(30);Object.defineProperty(t,"DataSource",{enumerable:!0,get:function(){return n.DataSource}});const r=o(111);Object.defineProperty(t,"CachedDataSource",{enumerable:!0,get:function(){return r.CachedDataSource}});const i=o(112);Object.defineProperty(t,"FilterDataSource",{enumerable:!0,get:function(){return i.FilterDataSource}})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortPromise=t.sort=t.sortArray=void 0;const n=o(0);function r(e,t,o){return new Promise(r=>{const i=[],s=new Array(o);for(let t=0;t<o;t++){const o=e(t),r={v:o,f:o};s[t]=r,n.isPromise(o)&&i.push(o.then(e=>{r.v=e,r.f=e}))}Promise.all(i).then(()=>null==t?s:function(e,t){return new Promise(o=>{const{length:r}=e,i=[];for(let o=0;o<r;o++){const r=e[o],s=t(r.v);n.isPromise(s)?i.push(s.then(e=>{r.f=e})):r.f=s}Promise.all(i).then(()=>o(e))})}(s,t)).then(r)})}function i(e,t,o,n,r){const i=function(e,t){const o=new Array(t);for(let n=0;n<t;n++)o[n]=e(n);return o}(e,o);null!=r?i.sort((e,t)=>n(r(e),r(t))):i.sort(n);for(let e=0;e<o;e++)t(e,i[e])}t.sortArray=function(e,t){Array.prototype.sort.call(e,t)},t.sort=i,t.sortPromise=function(e,t,o,n,s){if("undefined"!=typeof Promise)return r(e,s,o).then(e=>{e.sort((e,t)=>n(e.f,t.f));for(let n=0;n<o;n++)t(n,e[n].v)});{i(e,t,o,n,s);const r={then:e=>(e(),r),catch:()=>r};return r}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindCellKeyAction=t.bindCellClickAction=void 0;const n=o(4),r=o(0);t.bindCellClickAction=function(e,t,{action:o,mouseOver:r,mouseOut:i}){function s(o,n){return e.getLayoutCellId(o,n)===t}let l;return[e.listen(n.DG_EVENT_TYPE.CLICK_CELL,e=>{s(e.col,e.row)&&o({col:e.col,row:e.row})}),e.listen(n.DG_EVENT_TYPE.MOUSEOVER_CELL,t=>{s(t.col,t.row)&&(r&&!r({col:t.col,row:t.row})||(e.getElement().style.cursor="pointer",l=!0))}),e.listen(n.DG_EVENT_TYPE.MOUSEMOVE_CELL,t=>{s(t.col,t.row)&&l&&!e.getElement().style.cursor&&(e.getElement().style.cursor="pointer")}),e.listen(n.DG_EVENT_TYPE.MOUSEOUT_CELL,t=>{s(t.col,t.row)&&(i&&i({col:t.col,row:t.row}),e.getElement().style.cursor="",l=!1)})]},t.bindCellKeyAction=function(e,t,{action:o,acceptKeys:i=[]}){return i=[...i,13],[e.listen(n.DG_EVENT_TYPE.KEYDOWN,n=>{var s;if(-1===i.indexOf(n.keyCode))return;if((null===(s=e.keyboardOptions)||void 0===s?void 0:s.moveCellOnEnter)&&13===n.keyCode)return;const l=e.selection.select;var a,c;a=l.col,c=l.row,e.getLayoutCellId(a,c)===t&&(o({col:l.col,row:l.row}),r.event.cancel(n.event))})]}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckHeaderStyle=void 0;const n=o(13),r=o(0);let i;class s extends n.Style{constructor(e={}){super(r.defaults(e,{textAlign:"center"}));const{uncheckBgColor:t,checkBgColor:o,borderColor:n}=e;this._uncheckBgColor=t,this._checkBgColor=o,this._borderColor=n}static get DEFAULT(){return i||(i=new s)}get uncheckBgColor(){return this._uncheckBgColor}set uncheckBgColor(e){this._uncheckBgColor=e,this.doChangeStyle()}get checkBgColor(){return this._checkBgColor}set checkBgColor(e){this._checkBgColor=e,this.doChangeStyle()}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=e,this.doChangeStyle()}clone(){return new s(this)}}t.CheckHeaderStyle=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultilineTextHeaderStyle=void 0;const n=o(13);let r;class i extends n.Style{constructor(e={}){super(e),this._lineHeight=e.lineHeight||"1em",this._autoWrapText=e.autoWrapText||!1,this._lineClamp=e.lineClamp}static get DEFAULT(){return r||(r=new i)}clone(){return new i(this)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e,this.doChangeStyle()}get lineClamp(){return this._lineClamp}set lineClamp(e){this._lineClamp=e,this.doChangeStyle()}get autoWrapText(){return this._autoWrapText}set autoWrapText(e){this._autoWrapText=e,this.doChangeStyle()}}t.MultilineTextHeaderStyle=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SortHeaderStyle=void 0;const n=o(13);let r;class i extends n.Style{constructor(e={}){super(e),this._sortArrowColor=e.sortArrowColor}static get DEFAULT(){return r||(r=new i)}get sortArrowColor(){return this._sortArrowColor}set sortArrowColor(e){this._sortArrowColor=e,this.doChangeStyle()}clone(){return new i(this)}}t.SortHeaderStyle=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=void 0;const n=o(0),r=o(66),i={get arrow_upward(){return o(121)},get arrow_downward(){return o(122)},get edit(){return o(123)},get add(){return o(124)},get star(){return o(125)},get star_border(){return o(126)},get star_half(){return o(127)}};t.get=function(){return n.extend(i,r.icons)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.icons=void 0,t.icons={}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.themes=void 0,t.themes={}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawButton=t.drawRadioButton=t.drawCheckbox=t.measureRadioButton=t.measureCheckbox=t.drawInlineImageRect=t.fillTextRect=t.strokeCircle=t.fillCircle=t.strokeRoundRect=t.fillRoundRect=t.roundRect=t.strokeColorsRect=void 0;const n=o(8),{ceil:r,PI:i}=Math;function s(e,t,o,n,r,s){e.beginPath(),e.arc(t+s,o+s,s,-i,-.5*i,!1),e.arc(t+n-s,o+s,s,-.5*i,0,!1),e.arc(t+n-s,o+r-s,s,0,.5*i,!1),e.arc(t+s,o+r-s,s,.5*i,i,!1),e.closePath()}function l(e,t,o,n,r,i){s(e,t,o,n,r,i),e.fill()}function a(e,t,o,n,r,i){s(e,t,o,n,r,i),e.stroke()}function c(e,t,o,n,r){const i=Math.min(n,r)/2;e.beginPath(),e.arc(t+i,o+i,i,0,2*Math.PI),e.closePath(),e.fill()}function u(e,t,o,n,r){const i=Math.min(n,r)/2;e.beginPath(),e.arc(t+i,o+i,i,0,2*Math.PI),e.closePath(),e.stroke()}function h(e){return{width:n.getFontSize(e,null).width}}function d(e){return{width:n.getFontSize(e,null).width}}t.strokeColorsRect=function(e,t,o,n,r,i){t[0]===t[1]&&t[0]===t[2]&&t[0]===t[3]?t[0]&&(e.strokeStyle=t[0],e.strokeRect(o,n,r,i)):function(o){for(let n=0;n<t.length;n++){const r=t[n],i=t[n-1];if(r){if(i!==r){i&&(e.strokeStyle=i,e.stroke());const t=o[n];e.beginPath(),e.moveTo(t.x,t.y)}const t=o[n+1];e.lineTo(t.x,t.y)}else i&&(e.strokeStyle=i,e.stroke())}const n=t[t.length-1];n&&(e.strokeStyle=n,e.stroke())}([{x:o,y:n},{x:o+r,y:n},{x:o+r,y:n+i},{x:o,y:n+i},{x:o,y:n}])},t.roundRect=s,t.fillRoundRect=l,t.strokeRoundRect=a,t.fillCircle=c,t.strokeCircle=u,t.fillTextRect=function(e,t,o,r,i,s,{offset:l=2,padding:a}={}){const c={left:o,top:r,width:i,height:s,right:o+i,bottom:r+s};e.save();try{e.beginPath(),e.rect(c.left,c.top,c.width,c.height),e.clip();const o=n.calcBasePosition(e,c,{offset:l,padding:a});e.fillText(t,o.x,o.y)}finally{e.restore()}},t.drawInlineImageRect=function(e,t,o,r,i,s,l,a,c,u,h,d,{offset:f=2,padding:g}={}){const p={left:c,top:u,width:h,height:d,right:c+h,bottom:u+d};e.save();try{e.beginPath(),e.rect(p.left,p.top,p.width,p.height),e.clip();const c=n.calcStartPosition(e,p,l,a,{offset:f,padding:g});e.drawImage(t,o,r,i,s,c.x,c.y,l,a)}finally{e.restore()}},t.measureCheckbox=h,t.measureRadioButton=d,t.drawCheckbox=function(e,t,o,n,{uncheckBgColor:i="#FFF",checkBgColor:s="rgb(76, 73, 72)",borderColor:c="#000",boxSize:u=h(e).width}={}){const d="number"==typeof n?n>1?1:n:1;e.save();try{e.fillStyle=n?s:i;const h=r(t),f=r(o),g=r(u);if(l(e,h-1,f-1,g+1,g+1,u/5),e.lineWidth=1,e.strokeStyle=c,a(e,h-.5,f-.5,g,g,u/5),n){e.lineWidth=r(u/10),e.strokeStyle=i;let n=u/4,s=u/2*.9;const l=t+.2*u,a=o+u/2;d<.5&&(n*=2*d),e.beginPath(),e.moveTo(l,a),e.lineTo(l+n,a+n),d>.5&&(d<1&&(s*=2*(d-.5)),e.lineTo(l+n+s,a+n-s)),e.stroke()}}finally{e.restore()}},t.drawRadioButton=function(e,t,o,n,{checkColor:i="rgb(76, 73, 72)",borderColor:s="#000",bgColor:l="#FFF",boxSize:a=d(e).width}={}){const h="number"==typeof n?n>1?1:n:1;e.save();try{e.fillStyle=l;const d=r(t),f=r(o),g=r(a);if(c(e,d-1,f-1,g+1,g+1),e.lineWidth=1,e.strokeStyle=s,u(e,d-.5,f-.5,g,g),n){const t=g*h/2,o=(g-t)/2;e.fillStyle=i,c(e,r(100*(d-.5+o))/100,r(100*(f-.5+o))/100,r(100*t)/100,r(100*t)/100)}}finally{e.restore()}},t.drawButton=function(e,t,o,n,i,s={}){const{backgroundColor:a="#FFF",bgColor:c=a,radius:u=4,shadow:h={}}=s;e.save();try{if(e.fillStyle=c,h){const{color:t="rgba(0, 0, 0, 0.24)",blur:o=1,offsetX:n=0,offsetY:r=2,offset:{x:i=n,y:s=r}={}}=h;e.shadowColor=t,e.shadowBlur=o,e.shadowOffsetX=i,e.shadowOffsetY=s}l(e,r(t),r(o),r(n),r(i),u)}finally{e.restore()}}},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyDataCache=t.newEmptyColumnData=t.newEmptyHeaderData=void 0;const s=i(o(16)),l=i(o(23));let a=-1;function c(){return{id:a--,define:{},headerType:l.of(null)}}function u(){return{id:a--,define:{},columnType:s.type.of(null),style:null}}t.newEmptyHeaderData=c,t.newEmptyColumnData=u,t.EmptyDataCache=class{constructor(){this.headers=[],this.columns=[]}getHeader(e,t){const o=this.headers[t]||(this.headers[t]=[]);return o[e]||(o[e]=c())}getBody(e,t){const o=this.columns[t]||(this.columns[t]=[]);return o[e]||(o[e]=u())}}},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GridCanvasHelper=void 0;const s=i(o(29)),l=i(o(68)),a=i(o(71)),c=i(o(151)),u=i(o(35)),h=o(8),d=o(0),f=o(72),g=o(22),p=o(74),{toBoxArray:_}=d.style,m=c.of("…");function C(e,t,o,n,r){return d.getOrApply(e,{col:t,row:o,grid:n,context:r})}function w(e,t,o,n,r){if(null!=e)return d.getOrApply(e,{col:t,row:o,grid:n,context:r})}function b(e,...t){const o=d.getChainSafe(e.theme,...t);if(null==o)return d.getChainSafe(u.getDefault(),...t);if("function"!=typeof o)return o;let n;return e=>{const r=o(e);return null!=r?r:(n=n||d.getChainSafe(u.getDefault(),...t),d.getOrApply(n,e))}}function y(e,t,o,n,r,i,s,a,c){function u(t,u,h){if(t.canDraw()){e.save();try{e.fillStyle=C(t.color()||e.fillStyle,s,a,c,e),e.font=t.font()||e.font,t.draw({ctx:e,canvashelper:l,rect:o,offset:n,offsetLeft:u,offsetRight:h,offsetTop:r,offsetBottom:i})}finally{e.restore()}}else t.onReady(()=>c.invalidateCell(s,a))}if(1===t.length)u(t[0],0,0);else{const o=t.map(t=>(t.width({ctx:e})||0)-0);let n=o.reduce((e,t)=>e+t),r=0;t.forEach((e,t)=>{const i=o[t];n-=i,u(e,r,n),r+=i})}}function v(e,t){return c.buildInlines(e,t||"")}function x(e){return c.string(e)}function E(e){return S(e)&&"ellipsis"!==e&&1===(e=e.trim()).length?c.of(e[0]):m}function S(e){return Boolean(e&&"clip"!==e&&"string"==typeof e)}function O(e,t,o){const n=o-3;let r=0;for(let o=0;o<t.length;o++){const i=(t[o].width({ctx:e})||0)-0;if(r+i>n)return{index:o,lineWidth:r,remWidth:n-r};r+=i}return null}function R(e,t,o){const n=O(e,t,o);if(!n)return{beforeInlines:t,overflow:!1,afterInlines:[]};const{index:r,remWidth:i}=n,s=t[r],l=t.slice(0,r),a=[];if(s.canBreak()){let{before:o,after:n}=s.breakWord(e,i);o||l.length||({before:o,after:n}=s.breakAll(e,i)),o||l.length||({before:o,after:n}=s.splitIndex(1)),o&&l.push(o),n&&a.push(n),a.push(...t.slice(r+1))}else l.length||l.push(s),a.push(...t.slice(l.length));return{beforeInlines:l,overflow:!0,afterInlines:a}}function I(e,t,o,n){const r=O(e,t,o);if(!r)return{inlines:t,overflow:!1};const{index:i,lineWidth:s}=r,l=t[i],a=E(n),c=o-s-a.width({ctx:e}),u=t.slice(0,i);if(l.canBreak()){const{before:t}=l.breakAll(e,c);t&&u.push(t)}return u.push(a),{inlines:u,overflow:!0}}function P(e,t,o,n,r,i,{offset:s,color:l,textAlign:a,textBaseline:c,font:u,textOverflow:h,icons:d}){t.fillStyle=C(l||t.fillStyle,r,i,e,t),t.textAlign=a,t.textBaseline=c,t.font=u||t.font;let f=v(d,o);if(S(h)&&function(e,t,o){return!!O(e,t,o)}(t,f,n.width)){const{inlines:s,overflow:l}=I(t,f,n.width,h);f=s,e.setCellOverflowText(r,i,l&&x(o))}else e.setCellOverflowText(r,i,!1);y(t,f,n,s,0,0,r,i,e)}function M(e,t,o){const n=p.colorToRGB(e),r=p.colorToRGB(t),i=e=>{const t=n[e],i=r[e];if(o>=1)return i;if(o<=0)return t;const s=t-i;return Math.ceil(t-s*o)};return`rgb(${i("r")}, ${i("g")}, ${i("b")})`}function T(e,t,o,n,r,i,{animElapsedTime:s=1,uncheckBgColor:a=i.theme.checkbox.uncheckBgColor,checkBgColor:c=i.theme.checkbox.checkBgColor,borderColor:u=i.theme.checkbox.borderColor,textAlign:d="center",textBaseline:f="middle"},g={}){const p=l.measureCheckbox(e).width;e.textAlign=d,e.textBaseline=f;const _=h.calcStartPosition(e,t,p+1,p+1,g);a=i.getColor(a,o,n,e),c=i.getColor(c,o,n,e),u=i.getColor(u,o,n,e),0<s&&s<1&&(a=r?a:M(c,a,s),c=r?M(a,c,s):c),l.drawCheckbox(e,_.x,_.y,!!r&&s,{uncheckBgColor:a,checkBgColor:c,borderColor:u})}class B{constructor(e){this._checkbox=null,this._radioButton=null,this._button=null,this._header=null,this._grid=e}getThemeColor(...e){return b(this._grid,...e)}get font(){return b(this._grid,"font")}get underlayBackgroundColor(){return b(this._grid,"underlayBackgroundColor")}get color(){return b(this._grid,"color")}get frozenRowsColor(){return b(this._grid,"frozenRowsColor")}get defaultBgColor(){return b(this._grid,"defaultBgColor")}get frozenRowsBgColor(){return b(this._grid,"frozenRowsBgColor")}get selectionBgColor(){return b(this._grid,"selectionBgColor")}get highlightBgColor(){return b(this._grid,"highlightBgColor")}get borderColor(){return b(this._grid,"borderColor")}get frozenRowsBorderColor(){return b(this._grid,"frozenRowsBorderColor")}get highlightBorderColor(){return b(this._grid,"highlightBorderColor")}get checkbox(){const e=this._grid;return this._checkbox||(this._checkbox={get uncheckBgColor(){return b(e,"checkbox","uncheckBgColor")},get checkBgColor(){return b(e,"checkbox","checkBgColor")},get borderColor(){return b(e,"checkbox","borderColor")}})}get radioButton(){const e=this._grid;return this._radioButton||(this._radioButton={get checkColor(){return b(e,"radioButton","checkColor")},get uncheckBorderColor(){return b(e,"radioButton","uncheckBorderColor")},get checkBorderColor(){return b(e,"radioButton","checkBorderColor")},get uncheckBgColor(){return b(e,"radioButton","uncheckBgColor")},get checkBgColor(){return b(e,"radioButton","checkBgColor")}})}get button(){const e=this._grid;return this._button||(this._button={get color(){return b(e,"button","color")},get bgColor(){return b(e,"button","bgColor")}})}get header(){const e=this._grid;return this._header||(this._header={get sortArrowColor(){return b(e,"header","sortArrowColor")}})}}function L(e,t,o,n,r,i){if(Array.isArray(t)){const s=_(t);l.strokeColorsRect(e,s,o,n,r,i)}else t&&(e.strokeStyle=t,e.strokeRect(o,n,r,i))}t.GridCanvasHelper=class{constructor(e){this._grid=e,this._theme=new B(e)}createCalculator(e,t){return{calcWidth:o=>s.toPx(o,{get full(){return e.getRect().width},get em(){return h.getFontSize(e.getContext(),t).width}}),calcHeight:o=>s.toPx(o,{get full(){return e.getRect().height},get em(){return h.getFontSize(e.getContext(),t).height}})}}getColor(e,t,o,n){return C(e,t,o,this._grid,n)}toBoxArray(e){return _(e)}toBoxPixelArray(e,t,o){if("string"==typeof e||Array.isArray(e)){const n=this.createCalculator(t,o),r=_(e);return[n.calcHeight(r[0]),n.calcWidth(r[1]),n.calcHeight(r[2]),n.calcWidth(r[3])]}return _(e)}get theme(){return this._theme}drawWithClip(e,t){const o=e.getDrawRect();if(!o)return;const n=e.getContext();n.save();try{n.beginPath(),n.rect(o.left,o.top,o.width,o.height),n.clip(),t(n)}finally{n.restore()}}drawBorderWithClip(e,t){const o=e.getDrawRect();if(!o)return;const n=e.getRect(),r=e.getContext();r.save();try{r.beginPath();let e=o.left,i=o.width;o.left===n.left&&(e+=-1,i+=1);let s=o.top,l=o.height;o.top===n.top&&(s+=-1,l+=1),r.rect(e,s,i,l),r.clip(),t(r)}finally{r.restore()}}text(e,t,{padding:o,offset:n=2,color:r,textAlign:i="left",textBaseline:s="middle",font:l,textOverflow:a="clip",icons:c}={}){let u=t.getRect();const{col:h,row:d}=t;if(!r){({color:r}=this.theme);const e=this._grid.isFrozenCell(h,d);e&&e.row&&(r=this.theme.frozenRowsColor)}this.drawWithClip(t,f=>{if(l=w(l,t.col,t.row,this._grid,f),o){const e=this.toBoxPixelArray(o,t,l),n=u.left+e[3],r=u.top+e[0],i=u.width-e[1]-e[3],s=u.height-e[0]-e[2];u=new g.Rect(n,r,i,s)}P(this._grid,f,e,u,h,d,{offset:n,color:r,textAlign:i,textBaseline:s,font:l,textOverflow:a,icons:c})})}multilineText(e,t,{padding:o,offset:n=2,color:r,textAlign:i="left",textBaseline:s="middle",font:l,lineHeight:a="1em",autoWrapText:c=!1,lineClamp:u=0,textOverflow:d="clip",icons:f}={}){let p=t.getRect();const{col:_,row:m}=t;if(!r){({color:r}=this.theme);const e=this._grid.isFrozenCell(_,m);e&&e.row&&(r=this.theme.frozenRowsColor)}this.drawWithClip(t,b=>{if(l=w(l,t.col,t.row,this._grid,b),o){const e=this.toBoxPixelArray(o,t,l),n=p.left+e[3],r=p.top+e[0],i=p.width-e[1]-e[3],s=p.height-e[0]-e[2];p=new g.Rect(n,r,i,s)}const O=this.createCalculator(t,l);a=O.calcHeight(a),function(e,t,o,n,r,i,{offset:s,color:l,textAlign:a,textBaseline:c,font:u,lineHeight:d,autoWrapText:f,lineClamp:g,textOverflow:p,icons:_}){if(t.fillStyle=C(l||t.fillStyle,r,i,e,t),t.textAlign=a,t.textBaseline=c,t.font=u||t.font,"auto"===g){const e=n.height-2*s-2;g=Math.max(Math.floor(e/d),1)}let m;if(f||g>0||S(p)){const{width:s}=n;m=[];const l=g>0?(n,l)=>{if(m.length+1>=g){if(0===n.length&&l)m.push([E(p)]),e.setCellOverflowText(r,i,o.map(x).join("\n"));else{const{inlines:a,overflow:c}=I(t,n,s,p);m.push(l&&!c?a.concat([E(p)]):a),(c||l)&&e.setCellOverflowText(r,i,o.map(x).join("\n"))}return!1}return!0}:()=>!0,a=f?(e,o)=>{if(!l(e,o))return!1;for(;e.length;){if(!l(e,o))return!1;const{beforeInlines:n,afterInlines:r}=R(t,e,s);m.push(n),e=r}return!0}:S(p)?(n,a)=>{if(!l(n,a))return!1;const{inlines:c,overflow:u}=I(t,n,s,p);return m.push(c),u&&e.setCellOverflowText(r,i,o.map(x).join("\n")),!0}:(e,t)=>!!l(e,t)&&(m.push(e),!0);e.setCellOverflowText(r,i,!1);for(let e=0;e<o.length;e++){const t=o[e];if(!a(v(0===e?_:void 0,t),e+1<o.length))break}}else e.setCellOverflowText(r,i,!1),m=o.map((e,t)=>v(0===t?_:void 0,e));let w=0,b=d*(m.length-1);if("top"===t.textBaseline||"hanging"===t.textBaseline){const e=h.getFontSize(t,t.font).height,o=(d-e)/2;w+=o,b-=o}else if("bottom"===t.textBaseline||"alphabetic"===t.textBaseline||"ideographic"===t.textBaseline){const e=h.getFontSize(t,t.font).height,o=(d-e)/2;w-=o,b+=o}m.forEach(o=>{y(t,o,n,s,w,b,r,i,e),w+=d,b-=d})}(this._grid,b,e,p,_,m,{offset:n,color:r,textAlign:i,textBaseline:s,font:l,lineHeight:a,autoWrapText:c,lineClamp:u,textOverflow:d,icons:f})})}fillText(e,t,o,n,{color:r,textAlign:i="left",textBaseline:s="top",font:l}={}){const{col:a,row:c}=n;if(!r){({color:r}=this.theme);const e=this._grid.isFrozenCell(a,c);e&&e.row&&(r=this.theme.frozenRowsColor)}const u=n.getContext();u.save();try{l=w(l,n.col,n.row,this._grid,u),u.fillStyle=C(r,a,c,this._grid,u),u.textAlign=i,u.textBaseline=s,u.font=l||u.font,u.fillText(e,t,o)}finally{u.restore()}}fillCell(e,{fillColor:t=this.theme.defaultBgColor}={}){const o=e.getRect();this.drawWithClip(e,n=>{const{col:r,row:i}=e;n.fillStyle=C(t,r,i,this._grid,n),n.beginPath(),n.rect(o.left,o.top,o.width,o.height),n.fill()})}fillCellWithState(e,t={}){t.fillColor=this.getFillColorState(e,t),this.fillCell(e,t)}fillRect(e,t,{fillColor:o=this.theme.defaultBgColor}={}){const n=t.getContext();n.save();try{const{col:r,row:i}=t;n.fillStyle=C(o,r,i,this._grid,n),n.beginPath(),n.rect(e.left,e.top,e.width,e.height),n.fill()}finally{n.restore()}}fillRectWithState(e,t,o={}){o.fillColor=this.getFillColorState(t,o),this.fillRect(e,t,o)}getFillColorState(e,t={}){const o=e.getSelection(),{col:n,row:r}=e;if(!d.cellEquals(o.select,e)&&d.cellInRange(o.range,n,r))return this.theme.selectionBgColor;if(t.fillColor)return t.fillColor;if(d.cellEquals(o.select,e))return this.theme.highlightBgColor;const i=this._grid.isFrozenCell(n,r);return i&&i.row?this.theme.frozenRowsBgColor:this.theme.defaultBgColor}border(e,{borderColor:t=this.theme.borderColor,lineWidth:o=1}={}){const n=e.getRect();this.drawBorderWithClip(e,r=>{const{col:i,row:s}=e,l=C(t,i,s,this._grid,r);if(1===o)r.lineWidth=1,L(r,l,n.left-.5,n.top-.5,n.width,n.height);else if(2===o)r.lineWidth=2,L(r,l,n.left,n.top,n.width-1,n.height-1);else{r.lineWidth=o;const e=o/2-1;L(r,l,n.left+e,n.top+e,n.width-o+1,n.height-o+1)}})}borderWithState(e,t={}){const o=e.getRect(),n=e.getSelection(),{col:r,row:i}=e;if(d.cellEquals(n.select,e))t.borderColor=this.theme.highlightBorderColor,t.lineWidth=2,this.border(e,t);else{const n=this._grid.isFrozenCell(r,i);(null==n?void 0:n.row)&&(t.borderColor=this.theme.frozenRowsBorderColor),t.lineWidth=1,this.border(e,t);const s=this._grid.selection.select;s.col+1===r&&s.row===i?this.drawBorderWithClip(e,e=>{const t=_(C(this.theme.highlightBorderColor,s.col,s.row,this._grid,e));e.lineWidth=1,e.strokeStyle=t[1]||e.strokeStyle,e.beginPath(),e.moveTo(o.left-.5,o.top),e.lineTo(o.left-.5,o.bottom),e.stroke()}):s.col===r&&s.row+1===i&&this.drawBorderWithClip(e,e=>{const t=_(C(this.theme.highlightBorderColor,s.col,s.row,this._grid,e));e.lineWidth=1,e.strokeStyle=t[0]||e.strokeStyle,e.beginPath(),e.moveTo(o.left,o.top-.5),e.lineTo(o.right,o.top-.5),e.stroke()})}}buildCheckBoxInline(e,t,o={}){const n=this,r=t.getContext(),i=l.measureCheckbox(r).width;return new f.InlineDrawer({draw:function({ctx:r,rect:i,offset:s,offsetLeft:l,offsetRight:a,offsetTop:c,offsetBottom:u}){const{col:h,row:d}=t;T(r,i,h,d,e,n,o,{offset:s+1,padding:{left:l+1,right:a,top:c,bottom:u}})},width:i+3,height:i+1,color:void 0})}checkbox(e,t,o={}){this.drawWithClip(t,n=>{const{col:r,row:i}=t;T(n,t.getRect(),r,i,e,this,o)})}radioButton(e,t,o={}){this.drawWithClip(t,n=>{const{col:r,row:i}=t;!function(e,t,o,n,r,i,{animElapsedTime:s=1,checkColor:a=i.theme.radioButton.checkColor,uncheckBorderColor:c=i.theme.radioButton.uncheckBorderColor,checkBorderColor:u=i.theme.radioButton.checkBorderColor,uncheckBgColor:d=i.theme.radioButton.uncheckBgColor,checkBgColor:f=i.theme.radioButton.checkBgColor,textAlign:g="center",textBaseline:p="middle"},_={}){const m=l.measureRadioButton(e).width;e.textAlign=g,e.textBaseline=p;const C=h.calcStartPosition(e,t,m+1,m+1,_);a=i.getColor(a,o,n,e),c=i.getColor(c,o,n,e),u=i.getColor(u,o,n,e),d=i.getColor(d,o,n,e),f=i.getColor(f,o,n,e);let w=r?u:c,b=r?f:d;0<s&&s<1&&(w=r?M(c,u,s):M(u,c,s),b=r?M(d,f,s):M(f,d,s)),l.drawRadioButton(e,C.x,C.y,r?s:1-s,{checkColor:a,borderColor:w,bgColor:b})}(n,t.getRect(),r,i,e,this,o)})}button(e,t,{bgColor:o=this.theme.button.bgColor,padding:n,offset:r=2,color:i=this.theme.button.color,textAlign:s="center",textBaseline:a="middle",shadow:c,font:u,textOverflow:h="clip",icons:d}={}){const f=t.getRect();this.drawWithClip(t,p=>{u=w(u,t.col,t.row,this._grid,p);const{col:_,row:m}=t,b=this.toBoxPixelArray(n||f.height/8,t,u),y=f.left+b[3],v=f.top+b[0],x=f.width-b[1]-b[3],E=f.height-b[0]-b[2];o=C(o,t.col,t.row,this._grid,p),l.drawButton(p,y,v,x,E,{bgColor:o,radius:f.height/8,shadow:c}),P(this._grid,p,e,new g.Rect(y,v,x,E),_,m,{offset:r,color:i,textAlign:s,textBaseline:a,font:u,textOverflow:h,icons:d})})}testFontLoad(e,t,o){return function(e,t,o,n){return!(e&&!a.check(e,t)&&(a.load(e,t,()=>function(e,t){const{col:o,row:n}=e;t.invalidateCell(o,n)}(o,n)),1))}(e,t,o,this._grid)}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.load=t.check=void 0;const n=o(0),r={};let i,s;if(t.load=i,t.check=s,n.isNode)t.load=i=function(e,t,o){o()},t.check=s=function(){return!1};else{const e=document.fonts,n=!e;t.load=i=n?function(e,t,n){r[`${e} @ ${t}`]?n():o(149).load(e,t,()=>{r[`${e} @ ${t}`]=!0,n()},()=>{r[`${e} @ ${t}`]=!0,n()})}:function(t,o,n){r.all||r[t]?n():(e.ready.then(()=>{r.all=!0}),e.load(t).then(()=>{r[t]=!0,n()}))},t.check=s=n?function(e,t){return!!r[`${e} @ ${t}`]||(i(e,t,()=>{}),!1)}:function(t,o){return!(!r.all&&!r[t]&&!e.check(t)&&(i(t,o,()=>{}),1))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineDrawer=void 0;const n=o(15);class r extends n.Inline{constructor({draw:e,width:t,color:o}){super(),this._draw=e,this._width=t,this._color=o}width(e){return this._width}font(){return null}color(){var e;return null!==(e=this._color)&&void 0!==e?e:null}canDraw(){return!0}onReady(e){}draw({ctx:e,canvashelper:t,rect:o,offset:n,offsetLeft:r,offsetRight:i,offsetTop:s,offsetBottom:l}){this._draw({ctx:e,canvashelper:t,rect:o,offset:n,offsetLeft:r,offsetRight:i,offsetTop:s,offsetBottom:l})}canBreak(){return!1}toString(){return""}}t.InlineDrawer=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineImage=void 0;const n=o(15),r=o(54),i=o(0);class s extends n.Inline{constructor({src:e,width:t,height:o,imageLeft:n,imageTop:r,imageWidth:s,imageHeight:l}){super(),this._inlineImgPromise=null,this._inlineImg=null,this._src=e,this._width=t,this._height=o,this._imageLeft=n,this._imageTop=r,this._imageWidth=s,this._imageHeight=l,this._onloaded=[],i.isPromise(e)?e.then(e=>{this._src=e,this._loadImage(e)}):this._loadImage(e)}_loadImage(e){const t=this._inlineImgPromise=r.getCacheOrLoad("InlineImage",50,e);i.isPromise(t)?t.then(e=>{this._inlineImg=e,this._onloaded.forEach(e=>e())}):this._inlineImg=t}width(e){var t,o;return this._width||(null!==(o=null===(t=this._inlineImg)||void 0===t?void 0:t.width)&&void 0!==o?o:0)}font(){return null}color(){return null}canDraw(){return!!this._inlineImg}onReady(e){(i.isPromise(this._src)||i.isPromise(this._inlineImgPromise))&&this._onloaded.push(()=>e())}draw({ctx:e,canvashelper:t,rect:o,offset:n,offsetLeft:r,offsetRight:i,offsetTop:s,offsetBottom:l}){const a=this._inlineImg;t.drawInlineImageRect(e,a,this._imageLeft||0,this._imageTop||0,this._imageWidth||a.width,this._imageHeight||a.height,this._width||a.width,this._height||a.height,o.left,o.top,o.width,o.height,{offset:n+1,padding:{left:r,right:i,top:s,bottom:l}})}canBreak(){return!1}toString(){return""}}t.InlineImage=s},function(t,o,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.colorToRGB=void 0;const r={};function i(e){return parseInt(e,16)}function s(e,t,o,n=1){return{r:e,g:t,b:o,a:n}}function l({r:e,g:t,b:o,a:n}){return 0<=e&&e<=255&&0<=t&&t<=255&&0<=o&&o<=255&&0<=n&&n<=1}function a(e){return Math.ceil(255*e/100)}function c(e){if(/^#[0-9a-f]{3}$/i.exec(e))return function({1:e,2:t,3:o}){return s(i(e+e),i(t+t),i(o+o))}(e);if(/^#[0-9a-f]{6}$/i.exec(e))return function({1:e,2:t,3:o,4:n,5:r,6:l}){return s(i(e+t),i(o+n),i(r+l))}(e);let t=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i.exec(e);if(t){const e=s(Number(t[1]),Number(t[2]),Number(t[3]));if(l(e))return e}if(t=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d(\.\d)?)\s*\)$/i.exec(e),t){const e=s(Number(t[1]),Number(t[2]),Number(t[3]),Number(t[4]));if(l(e))return e}if(t=/^rgb\(\s*(\d{1,3}(\.\d)?)%\s*,\s*(\d{1,3}(\.\d)?)%\s*,\s*(\d{1,3}(\.\d)?)%\s*\)$/i.exec(e),t){const e=s(a(Number(t[1])),a(Number(t[3])),a(Number(t[5])));if(l(e))return e}if(t=/^rgba\(\s*(\d{1,3}(\.\d)?)%\s*,\s*(\d{1,3}(\.\d)?)%\s*,\s*(\d{1,3}(\.\d)?)%\s*,\s*(\d(\.\d)?)\s*\)$/i.exec(e),t){const e=s(a(Number(t[1])),a(Number(t[3])),a(Number(t[5])),Number(t[7]));if(l(e))return e}return null}o.colorToRGB=function(t){return"string"!=typeof t?s(0,0,0,0):(t=t.toLowerCase().trim(),r[t]?r[t]:c(t)||(r[t]=function(t){const o=document.createElement("div"),{style:n}=o;n.color=t,n.position="fixed",n.height="1px",n.width="1px",n.opacity="0",document.body.appendChild(o);const{color:r}=(document.defaultView||e).getComputedStyle(o,"");return document.body.removeChild(o),c(r||"")}(t)))}},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.register=t.getIcons=t.GridCanvasHelper=t.data=t.themes=t.headers=t.columns=t.ListGrid=t.tools=t.core=void 0;const s=i(o(16));t.columns=s;const l=i(o(105));t.core=l;const a=i(o(59));t.data=a;const c=i(o(113));t.headers=c;const u=i(o(65)),h=i(o(128));t.register=h;const d=i(o(35));t.themes=d;const f=i(o(132));t.tools=f;const g=o(133);Object.defineProperty(t,"ListGrid",{enumerable:!0,get:function(){return g.ListGrid}});const p=o(70);Object.defineProperty(t,"GridCanvasHelper",{enumerable:!0,get:function(){return p.GridCanvasHelper}});var _=o(164);function m(){return u.get()}Object.defineProperty(t,"_getInternal",{enumerable:!0,get:function(){return _.getInternal}}),t.getIcons=m,t.default={core:l,tools:f,ListGrid:g.ListGrid,columns:s,headers:c,themes:d,data:a,GridCanvasHelper:p.GridCanvasHelper,register:h,get icons(){return m()}},Object.defineProperty(d,"default",{enumerable:!1,configurable:!0,get:()=>d.getDefault(),set(e){d.setDefault(e)}}),Object.defineProperty(d,"choices",{enumerable:!1,configurable:!0,get:()=>d.getChoices()})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.of=t.InlineMenuEditor=t.InlineInputEditor=t.SmallDialogInputEditor=t.ButtonAction=t.RadioEditor=t.CheckEditor=t.Action=t.Editor=t.BaseAction=t.ACTIONS=void 0;const n=o(41);Object.defineProperty(t,"Action",{enumerable:!0,get:function(){return n.Action}});const r=o(25);Object.defineProperty(t,"BaseAction",{enumerable:!0,get:function(){return r.BaseAction}});const i=o(77);Object.defineProperty(t,"ButtonAction",{enumerable:!0,get:function(){return i.ButtonAction}});const s=o(79);Object.defineProperty(t,"CheckEditor",{enumerable:!0,get:function(){return s.CheckEditor}});const l=o(10);Object.defineProperty(t,"Editor",{enumerable:!0,get:function(){return l.Editor}});const a=o(80);Object.defineProperty(t,"InlineInputEditor",{enumerable:!0,get:function(){return a.InlineInputEditor}});const c=o(84);Object.defineProperty(t,"InlineMenuEditor",{enumerable:!0,get:function(){return c.InlineMenuEditor}});const u=o(100);Object.defineProperty(t,"RadioEditor",{enumerable:!0,get:function(){return u.RadioEditor}});const h=o(101);Object.defineProperty(t,"SmallDialogInputEditor",{enumerable:!0,get:function(){return h.SmallDialogInputEditor}});class d extends s.CheckEditor{get disabled(){return this._disabled}get readOnly(){return this._readOnly}}class f extends u.RadioEditor{get disabled(){return this._disabled}get readOnly(){return this._readOnly}}class g extends h.SmallDialogInputEditor{get disabled(){return this._disabled}get readOnly(){return this._readOnly}}t.ACTIONS={CHECK:new d,INPUT:new g,RADIO:new f},t.of=function e(o){if(o){if("string"==typeof o){const n=o.toUpperCase();return t.ACTIONS[n]||e(null)}return o}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonAction=void 0;const n=o(41),r=o(1),i=o(0),s=r.getButtonColumnStateId();class l extends n.Action{getState(e){let t=e[s];return t||(t={},i.obj.setReadonly(e,s,t)),t}}t.ButtonAction=l},function(t,o){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof e&&(n=e)}t.exports=n},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckEditor=void 0;const n=o(24),r=o(0),i=o(9),s=o(4),l=o(10),a=o(17),c=o(1).getCheckColumnStateId();class u extends l.Editor{clone(){return new u(this)}bindGridEvent(e,t){let o=e[c];o||(o={block:{},elapsed:{}},r.obj.setReadonly(e,c,o));const l=o,u=t=>{const o=e.getCellRange(t.col,t.row),n=`${o.start.col}:${o.start.row}`;if(i.isReadOnlyRecord(this.readOnly,e,t.row)||i.isDisabledRecord(this.disabled,e,t.row)||l.block[n])return;const s=e.doChangeValue(t.col,t.row,i.toggleValue);if(s){const t=()=>{a.animate(200,t=>{1===t?delete l.elapsed[n]:l.elapsed[n]=t,e.invalidateCellRange(o)})};r.isPromise(s)?(l.block[n]=!0,s.then(()=>{delete l.block[n],t()})):t()}};function h(o,n){return e.getLayoutCellId(o,n)===t}return[...n.bindCellClickAction(e,t,{action:u,mouseOver:t=>{if(i.isDisabledRecord(this.disabled,e,t.row))return!1;l.mouseActiveCell={col:t.col,row:t.row};const o=e.getCellRange(t.col,t.row);return e.invalidateCellRange(o),!0},mouseOut:t=>{delete l.mouseActiveCell;const o=e.getCellRange(t.col,t.row);e.invalidateCellRange(o)}}),...n.bindCellKeyAction(e,t,{action:t=>{const o=e.selection.range,{col:n}=e.selection.select;for(let{row:e}=o.start;e<=o.end.row;e++)h(n,e)&&u({col:n,row:e})}}),e.listen(s.DG_EVENT_TYPE.PASTE_CELL,t=>{if(t.multi)return;const o=e.selection.range;if(!r.cellEquals(o.start,o.end))return;if(!h(t.col,t.row))return;const n=t.normalizeValue.trim();e.doGetCellValue(t.col,t.row,e=>{(""+i.toggleValue(e)).trim()===n&&(r.event.cancel(t.event),u({col:t.col,row:t.row}))})})]}onPasteCellRangeBox(e,t,o){if(i.isReadOnlyRecord(this.readOnly,e,t.row)||i.isDisabledRecord(this.disabled,e,t.row))return;const n=o.trim();e.doGetCellValue(t.col,t.row,o=>{(""+i.toggleValue(o)).trim()===n&&e.doChangeValue(t.col,t.row,i.toggleValue)})}onDeleteCellRangeBox(){}}t.CheckEditor=u},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineInputEditor=void 0;const n=o(42),r=o(81),i=o(1),s=o(0),l=i.getInlineInputEditorStateId();let a=null,c=0;function u(e,t,o,n){const i=function(e){let t=e[l];return t||(t={},s.obj.setReadonly(e,l,t)),t}(e);a||(a=new r.InlineInputElement),i.element||(i.element=a,c++,e.addDisposable({dispose(){c--,c||(null==a||a.dispose(),a=null,i.element=null)}})),a.attach(e,o,t.col,t.row,n)}function h(e){a&&a.detach(e)}function d(e){a&&a.doChangeValue()}class f extends n.BaseInputEditor{constructor(e={}){super(e),this._classList=e.classList,this._type=e.type}get classList(){if(this._classList)return Array.isArray(this._classList)?this._classList:[this._classList]}set classList(e){this._classList=e}get type(){return this._type}set type(e){this._type=e}clone(){return new f(this)}onInputCellInternal(e,t,o){u(e,t,this,o)}onOpenCellInternal(e,t){e.doGetCellValue(t.col,t.row,o=>{u(e,t,this,o)})}onChangeSelectCellInternal(e,t,o){d(),h()}onGridScrollInternal(e){d(),h(!0)}onChangeDisabledInternal(){h(!0)}onChangeReadOnlyInternal(){h(!0)}onSetInputAttrsInternal(e,t,o){r.InlineInputElement.setInputAttrs(this,e,o)}}t.InlineInputEditor=f},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineInputElement=void 0;const n=o(3),r=o(11),i=o(0),s=o(43);function l(e,t,o){const{classList:n,type:r}=e;n&&o.classList.add(...n),o.type=r||""}t.InlineInputElement=class{constructor(){this._handler=new n.EventHandler,this._input=(o(82),r.createElement("input",{classList:"cheetah-grid__inline-input"})),this._bindInputEvents()}static setInputAttrs(e,t,o){l(e,0,o)}dispose(){var e;const t=this._input;this.detach(),this._handler.dispose(),delete this._input,this._beforePropEditor=null,null===(e=t.parentElement)||void 0===e||e.removeChild(t)}attach(e,t,o,n,r){const i=this._input,a=this._handler;if(this._beforePropEditor){const{classList:e}=this._beforePropEditor;e&&i.classList.remove(...e)}i.style.font=e.font||"16px sans-serif";const{element:c,rect:u}=e.getAttachCellsArea(e.getCellRange(o,n));i.style.top=u.top.toFixed()+"px",i.style.left=u.left.toFixed()+"px",i.style.width=u.width.toFixed()+"px",i.style.height=u.height.toFixed()+"px",c.appendChild(i),l(t,0,i),s.setInputValue(i,r),this._activeData={grid:e,col:o,row:n,editor:t},this._beforePropEditor=t,a.tryWithOffEvents(i,"blur",()=>{(()=>{i.focus();const e=i.value.length;try{if(void 0!==i.selectionStart)return i.selectionStart=e,void(i.selectionEnd=e)}catch(e){}if(document.selection){const t=i.createTextRange();t.collapse(),t.moveEnd("character",e),t.moveStart("character",e),t.select()}})()}),this._attaching=!0,setTimeout(()=>{delete this._attaching})}detach(e){if(this._isActive()){const{grid:t,col:o,row:n}=this._activeData,r=this._input;this._handler.tryWithOffEvents(r,"blur",()=>{var e;null===(e=r.parentElement)||void 0===e||e.removeChild(r)});const i=t.getCellRange(o,n);t.invalidateCellRange(i),e&&t.focus()}this._activeData=null}doChangeValue(){if(!this._isActive())return;const e=this._input,{value:t}=e,{grid:o,col:n,row:r}=this._activeData;o.doChangeValue(n,r,()=>t)}_isActive(){const e=this._input;return!(!e||!e.parentElement||!this._activeData)}_bindInputEvents(){const e=this._handler,t=this._input,o=e=>e.stopPropagation();e.on(t,"click",o),e.on(t,"mousedown",o),e.on(t,"touchstart",o),e.on(t,"dblclick",o),e.on(t,"compositionstart",e=>{t.classList.add("composition")}),e.on(t,"compositionend",e=>{t.classList.remove("composition")}),e.on(t,"keydown",e=>{if(t.classList.contains("composition"))return;const o=i.event.getKeyCode(e);13===o?this._onKeydownEnter(e):9===o&&this._onKeydownTab(e)}),e.on(t,"blur",e=>{this.doChangeValue(),this.detach()})}_onKeydownEnter(e){var t;if(!this._isActive()||this._attaching)return;const{grid:o}=this._activeData;this.doChangeValue(),this.detach(!0),i.event.cancel(e),(null===(t=o.keyboardOptions)||void 0===t?void 0:t.moveCellOnEnter)&&o.onKeyDownMove(e)}_onKeydownTab(e){var t;if(!this._isActive())return;const{grid:o}=this._activeData;(null===(t=o.keyboardOptions)||void 0===t?void 0:t.moveCellOnTab)&&(this.doChangeValue(),this.detach(!0),o.onKeyDownMove(e))}}},function(e,t,o){var n=o(5),r=o(83);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};n(r,i),e.exports=r.locals||{}},function(e,t,o){"use strict";o.r(t);var n=o(2),r=o.n(n)()(!1);r.push([e.i,".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box}",""]),t.default=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineMenuEditor=void 0;const n=o(0),r=o(9),i=o(4),s=o(10),l=o(85),a=o(44),c=o(1),u=o(55),h=c.getInlineMenuEditorStateId();let d=null,f=0;function g(e,t,o,r,i){const s=function(e){let t=e[h];return t||(t={},n.obj.setReadonly(e,h,t)),t}(e);d||(d=new l.InlineMenuElement),s.element||(s.element=d,f++,e.addDisposable({dispose(){f--,f||(null==d||d.dispose(),d=null,s.element=null)}})),d.attach(e,o,t.col,t.row,r,i)}function p(e){d&&d.detach(e)}class _ extends s.Editor{constructor(e={}){super(e),this._classList=e.classList,this._options=u.normalizeToFn(e.options)}dispose(){}get classList(){if(this._classList)return Array.isArray(this._classList)?this._classList:[this._classList]}set classList(e){this._classList=e}get options(){return this._options}set options(e){this._options=u.normalizeToFn(e)}clone(){return new _(this)}onChangeDisabledInternal(){p(!0)}onChangeReadOnlyInternal(){p(!0)}bindGridEvent(e,t){const o=t=>!r.isReadOnlyRecord(this.readOnly,e,t.row)&&!r.isDisabledRecord(this.disabled,e,t.row)&&(e.doGetCellValue(t.col,t.row,o=>{const r=e.getRowRecord(t.row);n.isPromise(r)||g(e,t,this,o,r)}),!0);function s(o,n){return e.getLayoutCellId(o,n)===t}return[e.listen(i.DG_EVENT_TYPE.CLICK_CELL,e=>{s(e.col,e.row)&&o({col:e.col,row:e.row})}),e.listen(i.DG_EVENT_TYPE.KEYDOWN,t=>{if(113!==t.keyCode&&13!==t.keyCode)return;const n=e.selection.select;s(n.col,n.row)&&o({col:n.col,row:n.row})&&t.stopCellMoving()}),e.listen(i.DG_EVENT_TYPE.SELECTED_CELL,e=>{p()}),e.listen(i.DG_EVENT_TYPE.SCROLL,()=>{p(!0)}),e.listen(i.DG_EVENT_TYPE.MOUSEOVER_CELL,t=>{s(t.col,t.row)&&(r.isReadOnlyRecord(this.readOnly,e,t.row)||r.isDisabledRecord(this.disabled,e,t.row)||(e.getElement().style.cursor="pointer"))}),e.listen(i.DG_EVENT_TYPE.MOUSEMOVE_CELL,t=>{s(t.col,t.row)&&(r.isReadOnlyRecord(this.readOnly,e,t.row)||r.isDisabledRecord(this.disabled,e,t.row)||e.getElement().style.cursor||(e.getElement().style.cursor="pointer"))}),e.listen(i.DG_EVENT_TYPE.MOUSEOUT_CELL,t=>{s(t.col,t.row)&&(e.getElement().style.cursor="")}),e.listen(i.DG_EVENT_TYPE.PASTE_CELL,t=>{if(t.multi)return;const o=e.selection.range;if(!n.cellEquals(o.start,o.end))return;if(!s(t.col,t.row))return;if(r.isReadOnlyRecord(this.readOnly,e,t.row)||r.isDisabledRecord(this.disabled,e,t.row))return;const i=e.getRowRecord(t.row);if(n.isPromise(i))return;const l=this._pasteDataToOptionValue(t.normalizeValue,e,t,i);l&&(n.event.cancel(t.event),n.then(e.doChangeValue(t.col,t.row,()=>l.value),()=>{const o=e.getCellRange(t.col,t.row);e.invalidateCellRange(o)}))})]}onPasteCellRangeBox(e,t,o){if(r.isReadOnlyRecord(this.readOnly,e,t.row)||r.isDisabledRecord(this.disabled,e,t.row))return;const i=e.getRowRecord(t.row);if(n.isPromise(i))return;const s=this._pasteDataToOptionValue(o,e,t,i);s&&e.doChangeValue(t.col,t.row,()=>s.value)}onDeleteCellRangeBox(e,t){if(r.isReadOnlyRecord(this.readOnly,e,t.row)||r.isDisabledRecord(this.disabled,e,t.row))return;const o=e.getRowRecord(t.row);if(n.isPromise(o))return;const i=this._pasteDataToOptionValue("",e,t,o);i&&e.doChangeValue(t.col,t.row,()=>i.value)}_pasteDataToOptionValue(e,t,o,r){const i=this._options(r),s=m(e,i);if(s)return s;const l=t.getColumnType(o.col,o.row);if(function(e){return e instanceof a.MenuColumn||!!Array.isArray(e.options)}(l)){const t=C(e),o=n.array.find(l.options,e=>C(e.label)===t);if(o)return m(o.value,i)}}}function m(e,t){const o=C(e),r=n.array.find(t,e=>C(e.value)===o);if(r)return r}function C(e){return null==e?"":(""+e).trim()}t.InlineMenuEditor=_},function(t,o,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.InlineMenuElement=void 0;const r=n(11),i=n(3),s=n(0),l="cheetah-grid__inline-menu",a=l+"__menu-item",c=l+"--hidden",u=l+"--shown";function h(e){let t=e;for(;t&&!t.classList.contains(a);)if(t=t.parentElement,!t||t.classList.contains(l))return null;return t}function d(e,t,o){o.style.top=t.top.toFixed()+"px",o.style.left=t.left.toFixed()+"px",o.style.width=t.width.toFixed()+"px",o.style.lineHeight=t.height.toFixed()+"px",e.appendChild(o)}function f(t,o,n,i,s,l,h){const{classList:f}=o;h.classList.remove(u),h.classList.add(c),r.empty(h),h.style.font=t.font||"16px sans-serif";let g=null,p=null;l.forEach((e,t)=>{const o=function({classList:e,label:t,value:o,html:n},i){const s=r.createElement("li",{classList:a});if(s.tabIndex=0,s.dataset.valueindex=""+i,e&&s.classList.add(...Array.isArray(e)?e:[e]),t){const e=r.createElement("span",{text:t});s.appendChild(e)}else n&&r.appendHtml(s,n);return""!==o&&null!=o||s.classList.add("cheetah-grid__inline-menu__menu-item--empty"),s}(e,t);h.appendChild(o),e.value===s&&(p=o,o.dataset.select="select"),o.classList.contains("cheetah-grid__inline-menu__menu-item--empty")&&(g=o)});const _=p||g||h.children[0];f&&h.classList.add(...f);const m=Array.prototype.slice.call(h.children,0),C=m.indexOf(_),{element:w,rect:b}=t.getAttachCellsArea(t.getCellRange(n,i));b.width++,d(w,b,h);let y=0,v=0;for(let e=0;e<m.length;e++){const{offsetHeight:t}=m[e];e<C&&(y+=t),v+=t}b.offsetTop(-y),h.style.transformOrigin=`center ${y+Math.ceil(m[C].offsetHeight/2)}px 0px`,d(w,b,h);const x=h.getBoundingClientRect(),E=(v-x.height)/2,S=x.top-E;let O=S;const R=O+v,I=e.innerHeight;R>I-20&&(O-=R-I+20),O<20&&(O=20),O!==S&&(b.offsetTop(-(S-O)),d(w,b,h)),_&&_.focus(),h.classList.remove(c),h.classList.add(u)}o.InlineMenuElement=class{constructor(){this._handler=new i.EventHandler,this._menu=(n(86),r.createElement("ul",{classList:l})),this._bindMenuEvents()}dispose(){var e;const t=this._menu;this.detach(),this._handler.dispose(),delete this._menu,this._beforePropEditor=null,null===(e=t.parentElement)||void 0===e||e.removeChild(t)}attach(e,t,o,n,r,i){const s=this._menu;if(this._beforePropEditor){const{classList:e}=this._beforePropEditor;e&&s.classList.remove(...e)}const l=t.options(i);f(e,t,o,n,r,l,s),this._activeData={grid:e,col:o,row:n,editor:t,options:l},this._beforePropEditor=t}detach(e){if(this._isActive()){const{grid:t,col:o,row:n}=this._activeData;!function(e,t,o,n){n.classList.remove(u),n.classList.add(c),r.disableFocus(n)}(0,0,0,this._menu);const i=t.getCellRange(o,n);t.invalidateCellRange(i),e&&t.focus()}this._activeData=null}_doChangeValue(e){if(!this._isActive())return;const{grid:t,col:o,row:n,options:r}=this._activeData,i=r[Number(e)];if(i){const{value:e}=i;t.doChangeValue(o,n,()=>e)}}_isActive(){const e=this._menu;return!(!e||!e.parentElement||!this._activeData)}_bindMenuEvents(){const e=this._handler,t=this._menu,o=e=>e.stopPropagation();e.on(t,"mousedown",o),e.on(t,"touchstart",o),e.on(t,"dblclick",o),e.on(t,"click",e=>{e.stopPropagation();const t=h(e.target);if(!t)return;const{valueindex:o}=t.dataset;this._doChangeValue(o||""),this.detach(!0)}),e.on(t,"keydown",e=>{const o=h(e.target);if(!o)return;const n=s.event.getKeyCode(e);if(13===n)this._onKeydownEnter(t,o,e);else if(27===n)this.detach(!0),s.event.cancel(e);else if(38===n){const t=r.findPrevSiblingFocusable(o);t&&(t.focus(),s.event.cancel(e))}else if(40===n){const t=r.findNextSiblingFocusable(o);t&&(t.focus(),s.event.cancel(e))}else 9===n&&this._onKeydownTab(t,o,e)})}_onKeydownEnter(e,t,o){var n;const r=this._isActive()?this._activeData.grid:null,{valueindex:i}=t.dataset;this._doChangeValue(i||""),this.detach(!0),s.event.cancel(o),r&&(null===(n=r.keyboardOptions)||void 0===n?void 0:n.moveCellOnEnter)&&r.onKeyDownMove(o)}_onKeydownTab(e,t,o){var n;if(this._isActive()){const{grid:e}=this._activeData;if(null===(n=e.keyboardOptions)||void 0===n?void 0:n.moveCellOnTab){const{valueindex:n}=t.dataset;return this._doChangeValue(n||""),this.detach(!0),void e.onKeyDownMove(o)}}if(o.shiftKey){if(!r.findPrevSiblingFocusable(t)){const t=e.querySelectorAll("."+a);let n=t[t.length-1];r.isFocusable(n)||(n=r.findPrevSiblingFocusable(n)),n&&(n.focus(),s.event.cancel(o))}}else if(!r.findNextSiblingFocusable(t)){let t=e.querySelector("."+a);r.isFocusable(t)||(t=r.findNextSiblingFocusable(t)),t&&(t.focus(),s.event.cancel(o))}}}},function(e,t,o){var n=o(5),r=o(87);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};n(r,i),e.exports=r.locals||{}},function(e,t,o){"use strict";o.r(t);var n=o(2),r=o.n(n)()(!1);r.push([e.i,'.cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{-webkit-transform:scale(.9);transform:scale(.9);-webkit-box-shadow:none;box-shadow:none;opacity:0;pointer-events:none;-webkit-transition:all 50ms ease-out;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{-webkit-transform:translateY(-7px);transform:translateY(-7px);-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;-webkit-transition:all .15s ease-out;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;-webkit-transition:opacity 15ms linear;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}',""]),t.default=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BranchGraphColumn=void 0;const n=o(0),r=o(7),i=o(89),s=o(1).getBranchGraphColumnStateId();class l{constructor({fromIndex:e,toIndex:t,colorIndex:o,point:n}){this.fromIndex=e,this.toIndex=t,this.colorIndex=o,this.point=n}}class a{constructor({index:e,commit:t=!1,lines:o=[],tag:n}){this.index=e,this.commit=t,this.lines=o,this.tag=n}static mergeLines(e){const t=e.filter(e=>null!=e.fromIndex&&null!=e.toIndex),o=e.filter(e=>null!=e.fromIndex&&null==e.toIndex),n=e.filter(e=>null==e.fromIndex&&null!=e.toIndex);return o.forEach(e=>{for(let t=0;t<n.length;t++){const o=n[t];if(!o.point&&e.colorIndex===o.colorIndex){e.toIndex=o.toIndex,n.splice(t,1);break}}t.push(e)}),t.concat(n)}static merge(e,t){return e?new a({index:e.index,commit:e.commit||t.commit,lines:a.mergeLines(e.lines.concat(t.lines)),tag:e.tag||t.tag}):t}}function c(e,t){const o=[...e].reverse();for(let e=0;e<o.length;e++){const n=o[e][t];if(n){n.lines=a.mergeLines(n.lines.concat([new l({toIndex:t,colorIndex:t})]));for(let n=0;n<e;n++)o[n][t]=new a({index:t,lines:[new l({fromIndex:t,toIndex:t,colorIndex:t})]});return!0}}return!1}function u(e,t){const{timeline:o}=e,r=[];(Array.isArray(t)?t:[t]).forEach(t=>{if(!t)return;let o;if("branch"===t.command){const r=n.obj.isObject(t.branch)?t.branch.from:null,i=n.obj.isObject(t.branch)?t.branch.to:t.branch;o=function({timeline:e,branches:t},o,n){const r=null!=o?t.indexOf(o):-1;let i=t.indexOf(n);if(i<0&&(i=t.length,t.push(n)),r<0)return new a({index:i});{const t=function(){for(let t=e.length-1;t>=0;t--){const o=e[t][r];if(o&&o.commit)return t}return-1}();if(-1===t)return null;const o=t+1,n=new a({index:i,lines:[new l({fromIndex:r,colorIndex:i})]});let s,c=null;if(o<e.length){const t=e[o];s=t[i]=a.merge(t[i],n)}else s=n,c=n;const u=e[t][r];return u.lines=a.mergeLines(u.lines.concat([new l({toIndex:i,colorIndex:i,point:s})])),c}}(e,r,i)}else if("commit"===t.command){const{branch:n}=t;o=function({timeline:e,branches:t},o){const n=t.indexOf(o);if(n<0)return null;const r=new a({index:n,commit:!0});return c(e,n)&&(r.lines=a.mergeLines(r.lines.concat([new l({fromIndex:n,colorIndex:n})]))),r}(e,n)}else if("merge"===t.command){const{from:n,to:r}=t.branch;o=function({timeline:e,branches:t},o,n){const r=t.indexOf(o),i=t.indexOf(n);if(i<0||r<0)return new a({index:i,commit:!0});const s=new a({index:i,commit:!0,lines:[new l({fromIndex:r,colorIndex:r}),new l({fromIndex:i,colorIndex:i})]}),u=[...e],h=u.pop();return h&&(h[r]=a.merge(h[r],new a({index:i,lines:[new l({toIndex:i,colorIndex:r})]}))),c(u,r)&&h&&(h[r].lines=a.mergeLines(h[r].lines.concat([new l({fromIndex:r,colorIndex:r})]))),c(e,i),s}(e,n,r)}else if("tag"===t.command){const{branch:n,tag:r}=t;o=function({branches:e},t,o){let n=e.indexOf(t);return n<0&&(n=e.length,e.push(t)),new a({index:n,tag:o})}(e,n,r)}o&&o.index>-1&&(r[o.index]=a.merge(r[o.index],o))}),o.push(r)}function h(e,t,o){const r={branches:[],timeline:[]};return function(e,t,o){const{dataSource:r}=e,i=[];let s;for(let e=0;e<r.length;e++){const o=r.getField(e,t);if(n.isPromise(o)){const e=i.length;i.push(void 0),s=s?s.then(()=>o).then(t=>{i[e]=t}):o.then(t=>{i[e]=t})}else i.push(o)}s?s.then(()=>o(i)):o(i)}(t,o,t=>{"top"!==e&&(t=[...t].reverse()),t.forEach(e=>{u(r,e)})}),r}class d extends r.BaseColumn{constructor(e={}){super(e),this._start=e.start||"bottom",this._cache=null!=e.cache&&e.cache}get StyleClass(){return i.BranchGraphStyle}clearCache(e){delete e[s]}onDrawCell(e,t,o,n){if(this._cache){const e=n[s]||(n[s]=new Map),{col:t,row:r}=o,i=n.getField(t,r);e.has(i)||e.set(i,h(this._start,n,i))}return super.onDrawCell(e,t,o,n)}clone(){return new d(this)}drawInternal(e,t,o,r,i,{drawCellBase:l}){var a,c;const{col:u,row:d}=t,f=i.getField(u,d),{timeline:g,branches:p}=null!==(c=this._cache?null===(a=i[s])||void 0===a?void 0:a.get(f):null)&&void 0!==c?c:h(this._start,i,f),{upLineIndexKey:_,downLineIndexKey:m}="top"!==this._start?{upLineIndexKey:"toIndex",downLineIndexKey:"fromIndex"}:{upLineIndexKey:"fromIndex",downLineIndexKey:"toIndex"},C="top"!==this._start?g[g.length-(d-i.frozenRowCount)-1]:g[d-i.frozenRowCount],{branchColors:w,branchLineWidth:b,circleSize:y,mergeStyle:v,margin:x,bgColor:E}=o;E&&l({bgColor:E});const S=t.getRect(),O=y/2,R=S.width-2*x;r.drawWithClip(t,e=>{e.textAlign="left",e.textBaseline="middle";const t=function(e,t,o,n,r,i){let s=Math.max(o/r.length+1,5);i.forEach(t=>{t.forEach((t,r)=>{if(!(r<=0)&&t.tag){const i=e.measureText(t.tag).width;s*r+2*n+4+i>o&&(s=Math.max((o-2*n-4-i)/r,5))}})});const l=[];let a=t;return r.forEach(()=>{l.push(Math.ceil(a+n)),a+=s}),l}(e,S.left+x,R,O,p,g),o=S.top+S.height/2;C.map((e,t)=>e?e.lines.map(e=>({colorIndex:e.colorIndex,upLineIndex:e[_],downLineIndex:e[m],pointIndex:t})):[]).reduce((e,t)=>e.concat(t),[]).sort((e,t)=>t.colorIndex-e.colorIndex).forEach(r=>{const s=t[r.pointIndex];!function(e,t,o,r,i,s,l,{branchXPoints:a,branchColors:c,branchLineWidth:u,mergeStyle:h},{col:d,row:f,branches:g}){if(null!=i||null!=s){if(t.strokeStyle=n.getOrApply(c,g[l],l),t.lineWidth=u,t.lineCap="round",t.beginPath(),null!=i){const n=a[i],s=e.getCellRelativeRect(d,f-1),l=s.top+s.height/2;t.moveTo(n,l),"bezier"===h?t.bezierCurveTo(n,(r+l)/2,o,(r+l)/2,o,r):t.lineTo(o,r)}else t.moveTo(o,r);if(null!=s){const n=a[s],i=e.getCellRelativeRect(d,f+1),l=i.top+i.height/2;"bezier"===h?t.bezierCurveTo(o,(r+l)/2,n,(r+l)/2,n,l):t.lineTo(n,l)}t.stroke()}}(i,e,s,o,r.upLineIndex,r.downLineIndex,r.colorIndex,{margin:x,branchXPoints:t,branchLineWidth:b,branchColors:w,mergeStyle:v},{width:R,col:u,row:d,branches:p})}),C.forEach((r,i)=>{if(r&&r.commit){const r=t[i];e.fillStyle=n.getOrApply(w,p[i],i),e.beginPath(),e.arc(r,o,O,0,2*Math.PI,!0),e.fill(),e.closePath()}}),C.forEach((r,i)=>{r&&r.tag&&(e.fillStyle=n.getOrApply(w,p[i],i),e.fillText(r.tag,t[i]+O+4,o))})})}}t.BranchGraphColumn=d},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BranchGraphStyle=void 0;const n=o(18);let r;const i=(e,t)=>{switch(t%3){case 0:return"#979797";case 1:return"#008fb5";case 2:return"#f1c109"}return"#979797"};class s extends n.BaseStyle{constructor(e={}){super(e),this._branchColors=e.branchColors||i,this._margin=e.margin||4,this._circleSize=e.circleSize||16,this._branchLineWidth=e.branchLineWidth||4,this._mergeStyle="straight"===e.mergeStyle?"straight":"bezier"}static get DEFAULT(){return r||(r=new s)}get branchColors(){return this._branchColors}set branchColors(e){this._branchColors=e,this.doChangeStyle()}get margin(){return this._margin}set margin(e){this._margin=e,this.doChangeStyle()}get circleSize(){return this._circleSize}set circleSize(e){this._circleSize=e,this.doChangeStyle()}get branchLineWidth(){return this._branchLineWidth}set branchLineWidth(e){this._branchLineWidth=e,this.doChangeStyle()}get mergeStyle(){return this._mergeStyle}set mergeStyle(e){this._mergeStyle=e,this.doChangeStyle()}clone(){return new s(this)}}t.BranchGraphStyle=s},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonColumn=void 0;const s=i(o(21)),l=o(45),a=o(12),c=o(0),u=o(1).getButtonColumnStateId();class h extends a.Column{constructor(e={}){super(e),this._caption=e.caption}get StyleClass(){return l.ButtonStyle}get caption(){return this._caption}withCaption(e){const t=this.clone();return t._caption=e,t}clone(){return new h(this)}convertInternal(e){return this._caption||super.convertInternal(e)}drawInternal(e,t,o,n,r,{drawCellBase:i,getIcon:l}){const{textAlign:a,textBaseline:h,bgColor:d,color:f,buttonBgColor:g,font:p,padding:_,textOverflow:m}=o;d&&i({bgColor:d}),n.testFontLoad(p,e,t);const{col:C,row:w}=t,b=r.getCellRange(C,w);let y=!1;const v=r[u];if(v)if(v.mouseActiveCell&&c.cellInRange(b,v.mouseActiveCell.col,v.mouseActiveCell.row))y=!0;else{const{select:e}=t.getSelection();c.cellInRange(b,e.col,e.row)&&(y=!0)}s.loadIcons(l(),t,n,(t,o)=>{n.button(e,o,{textAlign:a,textBaseline:h,bgColor:g,color:f,font:p,padding:_,shadow:y?{color:"rgba(0, 0, 0, 0.48)",blur:6,offsetY:3}:{},textOverflow:m,icons:t})})}}t.ButtonColumn=h},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckColumn=void 0;const n=o(7),r=o(46),i=o(1),s=o(28),l=i.getCheckColumnStateId();class a extends n.BaseColumn{get StyleClass(){return r.CheckStyle}clone(){return new a(this)}convertInternal(e){return s.toBoolean(e)}drawInternal(e,t,o,n,r,{drawCellBase:i}){var s;const{textAlign:a,textBaseline:c,borderColor:u,checkBgColor:h,uncheckBgColor:d,bgColor:f}=o;f&&i({bgColor:f});const{col:g,row:p}=t,_=r.getCellRange(g,p),m=`${_.start.col}:${_.start.row}`,C=null===(s=r[l])||void 0===s?void 0:s.elapsed[m],w={textAlign:a,textBaseline:c,borderColor:u,checkBgColor:h,uncheckBgColor:d};null!=C&&(w.animElapsedTime=C),n.checkbox(e,t,w)}}t.CheckColumn=a},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.IconColumn=void 0;const s=i(o(27)),l=o(12),a=o(47);class c extends l.Column{constructor(e={}){super(e),this._tagName=e.tagName||"i",this._className=e.className,this._content=e.content,this._name=e.name,this._iconWidth=e.iconWidth}get StyleClass(){return a.IconStyle}clone(){return new c(this)}drawInternal(e,t,o,n,r,i){const l=Number(e);if(isNaN(l))i.getIcon=()=>null;else{const e={};s.iconPropKeys.forEach(t=>{e[t]=o[t]}),e.className=this._className,e.tagName=this._tagName,this._content&&(e.content=this._content),e.name=this._name,this._iconWidth&&(e.width=this._iconWidth),i.getIcon=()=>function(e,t){t===1/0&&(t=0);const o=[];for(let n=0;n<t;n++)o.push(e);return o}(e,l)}super.drawInternal("",t,o,n,r,i)}}t.IconColumn=c},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageColumn=void 0;const n=o(7),r=o(48),i=o(8),s=o(54);class l extends n.BaseColumn{get StyleClass(){return r.ImageStyle}onDrawCell(e,t,o,n){return super.onDrawCell((r=e,s.getCacheOrLoad("ImageColumn",50,r)),t,o,n);var r}clone(){return new l(this)}drawInternal(e,t,o,n,r,{drawCellBase:s}){if(e){const{textAlign:r,textBaseline:l,margin:a,bgColor:c}=o;c&&s({bgColor:c}),n.drawWithClip(t,n=>{n.textAlign=r,n.textBaseline=l;const s=t.getRect();if("keep-aspect-ratio"===o.imageSizing){const{width:t,height:o}=function(e,t,o,n){let r=e,i=t;return r>o&&(r=o,i=r*t/e),i>n&&(i=n,r=i*e/t),{width:r,height:i}}(e.width,e.height,s.width-2*a,s.height-2*a),r=i.calcStartPosition(n,s,t,o,{offset:a});n.drawImage(e,0,0,e.width,e.height,r.x,r.y,t,o)}else n.drawImage(e,0,0,e.width,e.height,s.left+a,s.top+a,s.width-2*a,s.height-2*a)})}}}t.ImageColumn=l},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=void 0,t.LRUCache=class{constructor(e){this._list=[],this._map={},this._cacheSize=e||50}get(e){const t=this._map[e];if(t){const t=this._list,o=t.indexOf(e);t.splice(o,1),t.push(e)}return t}put(e,t){const o=this._list,n=this._map;if(n[e]){const t=o.indexOf(e);o.splice(t,1)}n[e]=t,o.push(e),o.length>this._cacheSize&&delete n[o.shift()||""]}}},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MenuColumn=void 0;const s=i(o(21)),l=o(7),a=o(49),c=o(55);class u extends l.BaseColumn{constructor(e={}){super(e),this._options=c.normalize(e.options)}get StyleClass(){return a.MenuStyle}clone(){return new u(this)}get options(){return this._options}withOptions(e){const t=this.clone();return t._options=c.normalize(e),t}drawInternal(e,t,o,n,r,{drawCellBase:i,getIcon:l}){const{textAlign:a,textBaseline:c,font:u,bgColor:h,padding:d,textOverflow:f,appearance:g}=o;let{color:p}=o;h&&i({bgColor:h});const _=this._convertInternal(e);n.testFontLoad(u,_,t),s.loadIcons(l(),t,n,(t,o)=>{const r=n.toBoxPixelArray(d||0,o,u),i=r.slice(0);i[1]+=26;const s=r.slice(0);s[1]+=8,null!=p||null!=e&&""!==e||(p="rgba(0, 0, 0, .38)"),n.text(_,o,{textAlign:a,textBaseline:c,color:p,font:u,padding:i,textOverflow:f,icons:t}),"menulist-button"===g?n.text("",o,{textAlign:"right",textBaseline:c,color:p,font:u,icons:[{path:"M0 2 5 7 10 2z",width:10,color:"rgba(0, 0, 0, .54)"}],padding:s}):"none"!==g&&console.warn("unsupported appearance:"+g)})}convertInternal(e){return e}_convertInternal(e){const t=this._options;for(let o=0;o<t.length;o++){const n=t[o];if(n.value===e){e=n.label;break}}return super.convertInternal(e)}getCopyCellValue(e){return this._convertInternal(e)}}t.MenuColumn=u},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MultilineTextColumn=void 0;const s=i(o(21)),l=o(7),a=o(50);class c extends l.BaseColumn{constructor(e={}){super(e)}get StyleClass(){return a.MultilineTextStyle}clone(){return new c(this)}drawInternal(e,t,o,n,r,{drawCellBase:i,getIcon:l}){const{textAlign:a,textBaseline:c,color:u,font:h,bgColor:d,padding:f,lineHeight:g,autoWrapText:p,lineClamp:_,textOverflow:m}=o;d&&i({bgColor:d});const C=e.replace(/\r?\n/g,"\n").replace(/\r/g,"\n").split("\n");n.testFontLoad(h,e,t),s.loadIcons(l(),t,n,(e,t)=>{n.multilineText(C,t,{textAlign:a,textBaseline:c,color:u,font:h,padding:f,lineHeight:g,autoWrapText:p,lineClamp:_,textOverflow:m,icons:e})})}}t.MultilineTextColumn=c},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NumberColumn=void 0;const n=o(12),r=o(51);let i;class s extends n.Column{constructor(e={}){super(e),this._format=e.format}static get defaultFotmat(){return i||(i=new Intl.NumberFormat)}static set defaultFotmat(e){i=e}get StyleClass(){return r.NumberStyle}clone(){return new s(this)}get format(){return this._format}withFormat(e){const t=this.clone();return t._format=e,t}convertInternal(e){const t=Number(e);return isNaN(t)?super.convertInternal(e):(this._format||s.defaultFotmat).format(t)}}t.NumberColumn=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PercentCompleteBarColumn=void 0;const n=o(0),r=o(12),i=o(52);class s extends r.Column{constructor(e={}){super(e),this._min=e.min||0,this._max=e.max||this._min+100,this._formatter=e.formatter||(e=>e)}get StyleClass(){return i.PercentCompleteBarStyle}clone(){return new s(this)}drawInternal(e,t,o,r,i,s){super.drawInternal(this._formatter(e),t,o,r,i,s);const{barColor:l,barBgColor:a,barHeight:c}=o;let u=""+e;n.str.endsWith(u,"%")&&(u=u.substr(0,u.length-1));const h=Number(u);if(isNaN(h))return;const d=h<this._min?0:h>this._max?1:(h-this._min)/(this._max-this._min);r.drawWithClip(t,e=>{const o=t.getRect(),r=o.width-4-1,i=o.bottom-2-c-1,s=o.left+2;e.fillStyle=n.getOrApply(a,100*d)||"#f0f3f5",e.beginPath(),e.rect(s,i,r,c),e.fill();const u=Math.min(r*d,r);e.fillStyle=n.getOrApply(l,100*d)||"#20a8d8",e.beginPath(),e.rect(s,i,u,c),e.fill()})}}t.PercentCompleteBarColumn=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RadioColumn=void 0;const n=o(7),r=o(53),i=o(1),s=o(28),l=i.getRadioColumnStateId();class a extends n.BaseColumn{get StyleClass(){return r.RadioStyle}clone(){return new a(this)}convertInternal(e){return s.toBoolean(e)}drawInternal(e,t,o,n,r,{drawCellBase:i}){var s;const{textAlign:a,textBaseline:c,checkColor:u,uncheckBorderColor:h,checkBorderColor:d,uncheckBgColor:f,checkBgColor:g,bgColor:p}=o;p&&i({bgColor:p});const{col:_,row:m}=t,C=r.getCellRange(_,m),w=`${C.start.col}:${C.start.row}`,b=null===(s=r[l])||void 0===s?void 0:s.elapsed[w],y={textAlign:a,textBaseline:c,checkColor:u,uncheckBorderColor:h,checkBorderColor:d,uncheckBgColor:f,checkBgColor:g};null!=b&&(y.animElapsedTime=b),n.radioButton(e,t,y)}}t.RadioColumn=a},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RadioEditor=void 0;const n=o(24),r=o(0),i=o(9),s=o(4),l=o(10),a=o(17),c=o(1),u=o(28),h=c.getRadioColumnStateId(),d=({grid:e,col:t,row:o})=>{const n=e.getLayoutCellId(t,o),r=o-e.getRecordStartRowByRecordIndex(e.getRecordIndexByRow(o)),i=[],{rowCount:s,recordRowCount:l}=e;for(let o=e.frozenRowCount+r;o<s;o+=l)e.getLayoutCellId(t,o)===n&&i.push({col:t,row:o});return i};class f extends l.Editor{constructor(e={}){super(e),this._group=e.group||d}clone(){return new f(this)}get group(){return this._group}set group(e){this._group=e}bindGridEvent(e,t){let o=e[h];o||(o={block:{},elapsed:{}},r.obj.setReadonly(e,h,o));const l=o,a=t=>{this._action(e,t)};return[...n.bindCellClickAction(e,t,{action:a,mouseOver:t=>{if(i.isDisabledRecord(this.disabled,e,t.row))return!1;l.mouseActiveCell={col:t.col,row:t.row};const o=e.getCellRange(t.col,t.row);return e.invalidateCellRange(o),!0},mouseOut:t=>{delete l.mouseActiveCell;const o=e.getCellRange(t.col,t.row);e.invalidateCellRange(o)}}),...n.bindCellKeyAction(e,t,{action:a}),e.listen(s.DG_EVENT_TYPE.PASTE_CELL,o=>{if(o.multi)return;const n=e.selection.range;if(!r.cellEquals(n.start,n.end))return;if(i=o.col,s=o.row,e.getLayoutCellId(i,s)!==t)return;var i,s;const l=o.normalizeValue.trim();u.toBoolean(l)&&(r.event.cancel(o.event),a({col:o.col,row:o.row}))})]}onPasteCellRangeBox(e,t,o){if(i.isReadOnlyRecord(this.readOnly,e,t.row)||i.isDisabledRecord(this.disabled,e,t.row))return;const n=o.trim();u.toBoolean(n)&&this._action(e,{col:t.col,row:t.row})}onDeleteCellRangeBox(){}_action(e,t){const o=e[h],n=e.getCellRange(t.col,t.row),s=`${n.start.col}:${n.start.row}`;i.isReadOnlyRecord(this.readOnly,e,t.row)||i.isDisabledRecord(this.disabled,e,t.row)||o.block[s]||e.doGetCellValue(t.col,t.row,n=>{u.toBoolean(n)||this._group({grid:e,col:t.col,row:t.row}).forEach(({col:n,row:s})=>{const l=e.getCellRange(n,s),c=`${l.start.col}:${l.start.row}`;i.isReadOnlyRecord(this.readOnly,e,t.row)||i.isDisabledRecord(this.disabled,e,t.row)||o.block[c]||function(e,t,o,n){e.doGetCellValue(t,o,s=>{if(u.toBoolean(s)===n)return;const l=e[h],c=e.getCellRange(t,o),d=`${c.start.col}:${c.start.row}`,f=e.doChangeValue(t,o,i.toggleValue);if(f){const t=()=>{a.animate(200,t=>{1===t?delete l.elapsed[d]:l.elapsed[d]=t,e.invalidateCellRange(c)})};r.isPromise(f)?(l.block[d]=!0,f.then(()=>{delete l.block[d],t()})):t()}})}(e,n,s,n===t.col&&s===t.row)})})}}t.RadioEditor=f},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmallDialogInputEditor=void 0;const n=o(42),r=o(102),i=o(1),s=o(0),l=i.getSmallDialogInputEditorStateId();let a=null,c=0;function u(e,t,o,n){const i=function(e){let t=e[l];return t||(t={},s.obj.setReadonly(e,l,t)),t}(e);a||(a=new r.SmallDialogInputElement),i.element||(i.element=a,c++,e.addDisposable({dispose(){c--,c||(null==a||a.dispose(),a=null,i.element=null)}})),a.attach(e,o,t.col,t.row,n)}function h(e){a&&a.detach(e)}class d extends n.BaseInputEditor{constructor(e={}){super(e),this._helperText=e.helperText,this._inputValidator=e.inputValidator,this._validator=e.validator,this._classList=e.classList,this._type=e.type}dispose(){}get classList(){if(this._classList)return Array.isArray(this._classList)?this._classList:[this._classList]}set classList(e){this._classList=e}get type(){return this._type}set type(e){this._type=e}get helperText(){return this._helperText}get inputValidator(){return this._inputValidator}get validator(){return this._validator}clone(){return new d(this)}onInputCellInternal(e,t,o){u(e,t,this,o)}onOpenCellInternal(e,t){e.doGetCellValue(t.col,t.row,o=>{u(e,t,this,o)})}onChangeSelectCellInternal(e,t,o){h()}onGridScrollInternal(e){h(!0)}onChangeDisabledInternal(){h(!0)}onChangeReadOnlyInternal(){h(!0)}onSetInputAttrsInternal(e,t,o){r.SmallDialogInputElement.setInputAttrs(this,e,o)}}t.SmallDialogInputEditor=d},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmallDialogInputElement=void 0;const n=o(0),r=o(3),i=o(11),s=o(43),l="cheetah-grid__small-dialog-input",a=l+"--hidden",c=l+"--shown";function u(e,t){t.tryWithOffEvents(e,"blur",()=>{(()=>{e.focus();const t=e.value.length;try{if(void 0!==e.selectionStart)return e.selectionStart=t,void(e.selectionEnd=t)}catch(e){}if(document.selection){const o=e.createTextRange();o.collapse(),o.moveEnd("character",t),o.moveStart("character",t),o.select()}})()})}function h(e,t,o){const{type:n}=e;o.type=n||""}t.SmallDialogInputElement=class{constructor(){this._handler=new r.EventHandler,this._dialog=function(){o(103);const e=i.createElement("div",{classList:[l,a]}),t=i.createElement("input",{classList:"cheetah-grid__small-dialog-input__input"});return t.readOnly=!0,t.tabIndex=-1,e.appendChild(t),e}(),this._input=this._dialog.querySelector(".cheetah-grid__small-dialog-input__input"),this._bindDialogEvents()}static setInputAttrs(e,t,o){h(e,0,o)}dispose(){const e=this._dialog;this.detach(),this._handler.dispose(),delete this._dialog,delete this._input,this._beforePropEditor=null,e.parentElement&&e.parentElement.removeChild(e)}attach(e,t,o,r,i){const l=this._handler,d=this._dialog,f=this._input;this._beforePropEditor&&function(e,t,o,n){const{classList:r}=n;r&&t.classList.remove(...r),delete t.dataset.helperText,o.type=""}(0,d,f,this._beforePropEditor),delete d.dataset.errorMessage,d.classList.remove(c),d.classList.add(a),f.readOnly=!0,f.tabIndex=0;const{element:g,rect:p}=e.getAttachCellsArea(e.getCellRange(o,r));d.style.top=p.top.toFixed()+"px",d.style.left=p.left.toFixed()+"px",d.style.width=p.width.toFixed()+"px",f.style.height=p.height.toFixed()+"px",g.appendChild(d),s.setInputValue(f,i),f.style.font=e.font||"16px sans-serif";const _={grid:e,col:o,row:r,editor:t};this._onInputValue(f,_),n.browser.IE?setTimeout(()=>u(f,l)):u(f,l),d.classList.add(c),d.classList.remove(a),f.readOnly=!1,function(e,t,o,n){const{classList:r,helperText:i}=n;r&&t.classList.add(...r),i&&"function"!=typeof i&&(t.dataset.helperText=i),h(n,0,o)}(0,d,f,t),this._activeData=_,this._beforePropEditor=t,this._attaching=!0,setTimeout(()=>{delete this._attaching})}detach(e){if(this._isActive()){const t=this._dialog,o=this._input;t.classList.remove(c),t.classList.add(a),o.readOnly=!0,o.tabIndex=-1;const{grid:n,col:r,row:i}=this._activeData,s=n.getCellRange(r,i);n.invalidateCellRange(s),e&&n.focus()}this._activeData=null,this._beforeValue=null}_doChangeValue(){if(!this._isActive())return!1;const e=this._input,{value:t}=e;return n.then(this._validate(t),o=>{if(o&&t===e.value){const{grid:e,col:o,row:n}=this._activeData;return e.doChangeValue(o,n,()=>t),!0}return!1})}_isActive(){const e=this._dialog;return!(!e||!e.parentElement||!this._activeData)}_bindDialogEvents(){const e=this._handler,t=this._dialog,o=this._input,r=e=>e.stopPropagation();e.on(t,"click",r),e.on(t,"dblclick",r),e.on(t,"mousedown",r),e.on(t,"touchstart",r),e.on(o,"compositionstart",e=>{o.classList.add("composition")}),e.on(o,"compositionend",e=>{o.classList.remove("composition"),this._onInputValue(o)});const i=e=>{o.classList.contains("composition")||this._onInputValue(o)};e.on(o,"keyup",i),e.on(o,"keypress",i),e.on(o,"keydown",e=>{if(o.classList.contains("composition"))return;const t=n.event.getKeyCode(e);27===t?(this.detach(!0),n.event.cancel(e)):13===t?this._onKeydownEnter(e):this._onInputValue(o)})}_onKeydownEnter(e){if(this._attaching)return;const t=this._input,{value:o}=t;n.then(this._doChangeValue(),n=>{var r;if(n&&o===t.value){const t=this._isActive()?this._activeData.grid:null;this.detach(!0),(null===(r=null==t?void 0:t.keyboardOptions)||void 0===r?void 0:r.moveCellOnEnter)&&t.onKeyDownMove(e)}}),n.event.cancel(e)}_onInputValue(e,t){const o=this._beforeValue,{value:n}=e;o!==n&&this._onInputValueChange(n,t),this._beforeValue=n}_onInputValueChange(e,t){t=t||this._activeData;const o=this._dialog,{grid:n,col:r,row:i,editor:s}=t;if("function"==typeof s.helperText){const t=s.helperText(e,{grid:n,col:r,row:i});t?o.dataset.helperText=t:delete o.dataset.helperText}"errorMessage"in o.dataset&&this._validate(e,!0)}_validate(e,t){const o=this._dialog,r=this._input,{grid:i,col:s,row:l,editor:a}=this._activeData;let c="";return a.inputValidator&&(c=a.inputValidator(e,{grid:i,col:s,row:l})),n.then(c,c=>(c||!a.validator||t||(c=a.validator(e,{grid:i,col:s,row:l})),n.then(c,t=>(t&&e===r.value?o.dataset.errorMessage=t:delete o.dataset.errorMessage,!t))))}}},function(e,t,o){var n=o(5),r=o(104);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};n(r,i),e.exports=r.locals||{}},function(e,t,o){"use strict";o.r(t);var n=o(2),r=o.n(n)()(!1);r.push([e.i,'.cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@-webkit-keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;-webkit-transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out,-webkit-box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{-webkit-box-shadow:none;box-shadow:none;padding:0;pointer-events:none;-webkit-animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;-webkit-transition:all .3s ease-out;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;-webkit-box-shadow:0 1px 0 0 #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:"";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;-webkit-box-shadow:0 1px 0 0 #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}',""]),t.default=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_TYPE=t.DrawGrid=void 0;const n=o(56);Object.defineProperty(t,"DrawGrid",{enumerable:!0,get:function(){return n.DrawGrid}});const r=o(4);Object.defineProperty(t,"EVENT_TYPE",{enumerable:!0,get:function(){return r.DG_EVENT_TYPE}})},function(t,o,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.transform=void 0;const r=n(3),i=n(0),s=new r.EventHandler;let l=1;function a(){i.isNode?l=1:(l=Math.ceil(e.devicePixelRatio||1),l>1&&l%2!=0&&(l+=1))}a(),i.isNode||s.on(e,"resize",a),o.transform=function(e){const t=e.getContext("2d"),{getAttribute:o,setAttribute:n}=e;e.getAttribute=function(e){let t=o.call(this,e);return"width"!==e&&"height"!==e||(t=""+Number(t)/l),t},e.setAttribute=function(e,o){const r="width"===e||"height"===e;r&&(o=""+Number(o)*l);const i=n.call(this,e,o);return r&&t.scale(l,l),i},Object.defineProperty(e,"width",{get:()=>Number(e.getAttribute("width")),set:t=>{e.setAttribute("width",""+Math.floor(t))},configurable:!0,enumerable:!0}),Object.defineProperty(e,"height",{get:()=>Number(e.getAttribute("height")),set:t=>{e.setAttribute("height",""+Math.floor(t))},configurable:!0,enumerable:!0});const{drawImage:r}=t;return t.drawImage=function(t,...o){if(t!==e||1===l)return r.call(this,t,...o);this.save();try{return this.scale(1/l,1/l),o.length>4?(o[4]*=l,o[5]*=l):(o[0]*=l,o[1]*=l),r.call(this,t,...o)}finally{this.restore()}},e}},function(e,t,o){var n=o(5),r=o(108);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};n(r,i),e.exports=r.locals||{}},function(e,t,o){"use strict";o.r(t);var n=o(2),r=o.n(n)()(!1);r.push([e.i,".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}",""]),t.default=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NumberMap=void 0,t.NumberMap=class{constructor(){this._keys=[],this._vals={},this._sorted=!1}put(e,t){e in this._vals||(this._keys.push(e),this._sorted=!1),this._vals[e]=t}get(e){return this._vals[e]}has(e){return null!=this._vals[e]}each(e,t,o){const{_keys:n}=this,{length:r}=n;this._sorted||(n.sort((e,t)=>e<t?-1:e>t?1:0),this._sorted=!0);for(let i=((e,t)=>{let o=0,n=e.length-1;for(;o<=n;){const r=Math.floor((o+n)/2);if(e[r]===t)return r;e[r]>t?n=r-1:o=r+1}return n<0?0:n})(n,e);i<r;i++){const r=n[i];if(e<=r&&r<=t)o(this.get(r),r);else if(t<r)return}}}},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Scrollable=void 0;const s=i(o(57)),l=o(3),a=o(0).browser.heightLimit-1e3;t.Scrollable=class{constructor(){this._p=1,this._handler=new l.EventHandler,this._scrollable=document.createElement("div"),this._scrollable.classList.add("grid-scrollable"),this._height=0,this._width=0,this._endPointElement=document.createElement("div"),this._endPointElement.classList.add("grid-scroll-end-point"),this._update(),this._scrollable.appendChild(this._endPointElement)}calcTop(e){const t=e-this.scrollTop;return this._scrollable.scrollTop+t}getElement(){return this._scrollable}setScrollSize(e,t){this._width=e,this._height=t,this._update()}get scrollWidth(){return this._width}set scrollWidth(e){this._width=e,this._update()}get scrollHeight(){return this._height}set scrollHeight(e){this._height=e,this._update()}get scrollLeft(){return Math.max(Math.ceil(this._scrollable.scrollLeft),0)}set scrollLeft(e){this._scrollable.scrollLeft=e}get scrollTop(){return Math.max(Math.ceil(this._scrollable.scrollTop/this._p),0)}set scrollTop(e){this._scrollable.scrollTop=e*this._p}onScroll(e){this._handler.on(this._scrollable,"scroll",e)}dispose(){this._handler.dispose()}_update(){let e;if(this._height>a){const t=s.getScrollBarSize(),{offsetHeight:o}=this._scrollable,n=a-o+t,r=this._height-o+t;this._p=n/r,e=a}else this._p=1,e=this._height;this._endPointElement.style.top=e.toFixed()+"px",this._endPointElement.style.left=this._width.toFixed()+"px"}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CachedDataSource=void 0;const n=o(30);class r extends n.DataSource{constructor(e){super(e),this._rCache={},this._fCache={}}static get EVENT_TYPE(){return n.DataSource.EVENT_TYPE}static ofArray(e){return new r({get:t=>e[t],length:e.length,source:e})}getOriginal(e){return this._rCache&&this._rCache[e]?this._rCache[e]:super.getOriginal(e)}getOriginalField(e,t){const o=this._fCache&&this._fCache[e];if(o){const e=o.get(t);if(e)return e}return super.getOriginalField(e,t)}setOriginalField(e,t,o){const n=this._fCache;return n&&n[e]&&delete n[e],super.setOriginalField(e,t,o)}clearCache(){this._rCache&&(this._rCache={}),this._fCache&&(this._fCache={})}fieldPromiseCallBackInternal(e,t,o){!function(e,t,o,n){(e[t]||(e[t]=new Map)).set(o,n)}(this._fCache,e,t,o)}recordPromiseCallBackInternal(e,t){this._rCache[e]=t}dispose(){super.dispose()}}t.CachedDataSource=r},function(t,o,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.FilterDataSource=void 0;const r=n(0),i=n(30),s=n(3);class l{constructor(e){this._dataSource=e,this._curIndex=-1,this._data=[]}hasNext(){const e=this._curIndex+1;return this._dataSource.length>e}next(){const e=this._curIndex+1,t=this._getIndexData(e);return this._curIndex=e,t}movePrev(){this._curIndex--}_getIndexData(e,t){const o=this._dataSource,n=this._data;if(e<n.length)return n[e];if(o.length<=e)return;const i=this._dataSource.get(e);if(n[e]=i,r.isPromise(i)&&(i.then(t=>{n[e]=t}),!t))for(let t=1;t<=100;t++)this._getIndexData(e+t,!0);return i}}class a{constructor(e,t,o){this._cancel=!1,this._owner=e,this._dataSourceItr=new l(t),this._filter=o,this._filterdList=[],this._queues=[]}get(e){if(this._cancel)return;const t=this._filterdList;if(e<t.length)return t[e];const o=this._queues,n=o[e];return n||o[e]||this._findIndex(e)}cancel(){this._cancel=!0}_findIndex(t){if(e.Promise){const e=Date.now()+100;let o=0;return this._findIndexWithTimeout(t,()=>(o++,o>=100&&(o=0,e<Date.now())))}return this._findIndexWithTimeout(t,()=>!1)}_findIndexWithTimeout(e,t){const o=this._filterdList,n=this._filter,i=this._dataSourceItr,s=this._queues;for(;i.hasNext();){if(this._cancel)return;const l=i.next();if(r.isPromise(l)){i.movePrev();const t=l.then(t=>(s[e]=null,this.get(e)));return s[e]=t,t}if(n(l)&&(o.push(l),e<o.length))return o[e];if(t()){const t=new Promise(e=>{setTimeout(()=>{e()},300)}).then(()=>(s[e]=null,this.get(e)));return s[e]=t,t}}this._owner.length=o.length}}class c extends i.DataSource{constructor(e,t){super(e),this._filterData=null,this._dataSource=e,this.filter=t;const o=this._handler=new s.EventHandler;o.on(e,i.DataSource.EVENT_TYPE.UPDATED_ORDER,()=>{this.filter=this.filter}),r.each(i.DataSource.EVENT_TYPE,t=>{o.on(e,t,(...e)=>this.fireListeners(t,...e))})}static get EVENT_TYPE(){return i.DataSource.EVENT_TYPE}get filter(){var e;return(null===(e=this._filterData)||void 0===e?void 0:e._filter)||null}set filter(e){this._filterData&&this._filterData.cancel(),this._filterData=e?new a(this,this._dataSource,e):null,this.length=this._dataSource.length}getOriginal(e){return this._filterData?this._filterData.get(e):super.getOriginal(e)}sort(e,t){return this._dataSource.sort(e,t)}get source(){return this._dataSource.source}get dataSource(){return this._dataSource}dispose(){this._handler.dispose(),super.dispose()}}o.FilterDataSource=c},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.style=t.type=t.action=void 0;const s=i(o(31));t.action=s;const l=i(o(33));t.style=l;const a=i(o(23));t.type=a},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckHeaderAction=void 0;const n=o(61),r=o(32),i=o(17),s=o(1),l=o(0),a=s.getCheckHeaderStateId();class c extends r.BaseAction{clone(){return new c(this)}bindGridEvent(e,t){const o=function(e){let t=e[a];return t||(t={elapsed:{},block:{}},l.obj.setReadonly(e,a,t)),t}(e),r=({col:t,row:n})=>{const r=e.getCellRange(t,n),s=`${r.start.col}:${r.start.row}`;if(this.disabled||o.block[s])return;const l=e.getHeaderValue(r.start.col,r.start.row);e.setHeaderValue(r.start.col,r.start.row,!l),i.animate(200,t=>{1===t?delete o.elapsed[s]:o.elapsed[s]=t,e.invalidateCellRange(r)})};return[...n.bindCellClickAction(e,t,{action:r,mouseOver:t=>{if(this.disabled)return!1;o.mouseActiveCell={col:t.col,row:t.row};const n=e.getCellRange(t.col,t.row);return e.invalidateCellRange(n),!0},mouseOut:t=>{delete o.mouseActiveCell;const n=e.getCellRange(t.col,t.row);e.invalidateCellRange(n)}}),...n.bindCellKeyAction(e,t,{action:r})]}}t.CheckHeaderAction=c},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SortHeaderAction=void 0;const n=o(32),r=o(61);class i extends n.BaseAction{constructor(e={}){var t;super(e),this._sort=null===(t=e.sort)||void 0===t||t}get sort(){return this._sort}set sort(e){this._sort=e,this.onChangeDisabledInternal()}clone(){return new i(this)}_executeSort(e,t){if("function"==typeof this._sort)this._sort({order:e.order||"asc",col:e.col,row:e.row,grid:t});else{const o=Math.min(t.recordRowCount-1,e.row)+t.frozenRowCount,n=t.getField(e.col,o);if(null==n)return;t.dataSource.sort(n,e.order||"asc")}}bindGridEvent(e,t){return[...r.bindCellClickAction(e,t,{action:o=>{if(this.disabled)return;const n=e.sortState;let r;const i=e.getCellRange(o.col,o.row);var s,l;s=n.col,l=o.row,r=e.getLayoutCellId(s,l)===t?{col:i.start.col,row:i.start.row,order:"asc"===n.order?"desc":"asc"}:{col:i.start.col,row:i.start.row,order:"asc"},e.sortState=r,this._executeSort(r,e),e.invalidateGridRect(0,0,e.colCount-1,e.rowCount-1)},mouseOver:e=>!this.disabled})]}}t.SortHeaderAction=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StdBaseStyle=void 0;const n=o(34);let r;class i extends n.BaseStyle{constructor(e={}){super(e),this._textAlign=e.textAlign||"left",this._textBaseline=e.textBaseline||"middle"}static get DEFAULT(){return r||(r=new i)}get textAlign(){return this._textAlign}set textAlign(e){this._textAlign=e,this.doChangeStyle()}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e,this.doChangeStyle()}clone(){return new i(this)}}t.StdBaseStyle=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckHeader=void 0;const n=o(14),r=o(62),i=o(1),s=o(0),l=i.getCheckHeaderStateId();class a extends n.BaseHeader{get StyleClass(){return r.CheckHeaderStyle}clone(){return new a(this)}drawInternal(e,t,o,n,r,{drawCellBase:i}){const{textAlign:a,textBaseline:c,borderColor:u,checkBgColor:h,uncheckBgColor:d,bgColor:f,color:g,font:p,textOverflow:_}=o;f&&i({bgColor:f});const{col:m,row:C}=t,w=r.getCellRange(m,C),b=`${w.start.col}:${w.start.row}`,{elapsed:{[b]:y}}=function(e){let t=e[l];return t||(t={elapsed:{},block:{}},s.obj.setReadonly(e,l,t)),t}(r),v=r.getHeaderValue(w.start.col,w.start.row),x={textAlign:a,textBaseline:c,borderColor:u,checkBgColor:h,uncheckBgColor:d};null!=y&&(x.animElapsedTime=y);const E=n.buildCheckBoxInline(!!v,t,x);n.text([E,e],t,{textAlign:a,textBaseline:c,color:g,font:p,textOverflow:_})}}t.CheckHeader=a},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;const n=o(14),r=o(13);class i extends n.BaseHeader{get StyleClass(){return r.Style}drawInternal(e,t,o,n,r,{drawCellBase:i}){const{textAlign:s,textBaseline:l,color:a,font:c,bgColor:u,textOverflow:h}=o;u&&i({bgColor:u}),n.text(e,t,{textAlign:s,textBaseline:l,color:a,font:c,textOverflow:h})}}t.Header=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultilineTextHeader=void 0;const n=o(14),r=o(63);class i extends n.BaseHeader{get StyleClass(){return r.MultilineTextHeaderStyle}clone(){return new i(this)}drawInternal(e,t,o,n,r,{drawCellBase:i}){const{textAlign:s,textBaseline:l,color:a,font:c,bgColor:u,lineHeight:h,autoWrapText:d,lineClamp:f,textOverflow:g}=o;u&&i({bgColor:u});const p=e.replace(/\r?\n/g,"\n").replace(/\r/g,"\n").split("\n");n.testFontLoad(c,e,t),n.multilineText(p,t,{textAlign:s,textBaseline:l,color:a,font:c,lineHeight:h,autoWrapText:d,lineClamp:f,textOverflow:g})}}t.MultilineTextHeader=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SortHeader=void 0;const n=o(14),r=o(64),i=o(0),s=o(8);class l extends n.BaseHeader{get StyleClass(){return r.SortHeaderStyle}drawInternal(e,t,o,n,r,{drawCellBase:l}){const{textAlign:a,textBaseline:c="middle",color:u,bgColor:h,font:d,textOverflow:f,sortArrowColor:g}=o;h&&l({bgColor:h});const p=r.sortState;let _=void 0;const{col:m,row:C}=t,w=r.getCellRange(m,C);i.cellInRange(w,p.col,p.row)&&({order:_}=p);const b=t.getContext(),y=1.2*s.getFontSize(b,d).width;n.text(e,t,{textAlign:a,textBaseline:c,color:u,font:d,textOverflow:f,icons:[{name:null!=_?"asc"===_?"arrow_downward":"arrow_upward":void 0,width:y,color:n.getColor(g||n.theme.header.sortArrowColor,m,C,b)||"rgba(0, 0, 0, 0.38)"}]})}}t.SortHeader=l},function(e,t){e.exports={d:"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z",width:48,height:48}},function(e,t){e.exports={d:"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z",width:48,height:48}},function(e,t){e.exports={d:"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z",width:48,height:48}},function(e,t){e.exports={d:"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z",width:48,height:48}},function(e,t){e.exports={d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z",width:24,height:24}},function(e,t){e.exports={d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z",width:24,height:24}},function(e,t){e.exports={d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z",width:24,height:24}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.icons=t.icon=t.theme=void 0;const n=o(66),r=o(67);function i(e,t,o){const n=e[t];return e[t]=o,n}t.theme=function(e,t){return null!=t?i(r.themes,e,t):r.themes[e]},t.icon=function(e,t){return null!=t?i(n.icons,e,t):n.icons[e]},t.icons=function(e){return function(e,t){for(const o in t)e[o]=t[o]}(n.icons,e)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Theme=void 0;const n=o(0),r=o(1).get();function i(e,t,o,r){return n.getChainSafe(e,...o)||n.getChainSafe(t,...o)||r&&n.getChainSafe(e,...r)||r&&n.getChainSafe(t,...r)}class s{constructor(e,t){this._checkbox=null,this._radioButton=null,this._button=null,this._header=null,this[r]={obj:e,superTheme:t}}get font(){const{obj:e,superTheme:t}=this[r];return i(e,t,["font"])}get underlayBackgroundColor(){const{obj:e,superTheme:t}=this[r];return i(e,t,["underlayBackgroundColor"])}get color(){const{obj:e,superTheme:t}=this[r];return i(e,t,["color"])}get frozenRowsColor(){const{obj:e,superTheme:t}=this[r];return i(e,t,["frozenRowsColor"],["color"])}get defaultBgColor(){const{obj:e,superTheme:t}=this[r];return i(e,t,["defaultBgColor"])}get frozenRowsBgColor(){const{obj:e,superTheme:t}=this[r];return i(e,t,["frozenRowsBgColor"],["defaultBgColor"])}get selectionBgColor(){const{obj:e,superTheme:t}=this[r];return i(e,t,["selectionBgColor"],["defaultBgColor"])}get highlightBgColor(){if(this.hasProperty(["highlightBgColor"])){const{obj:e,superTheme:t}=this[r];return i(e,t,["highlightBgColor"])}return e=>{const t=e.row<e.grid.frozenRowCount?this.frozenRowsBgColor:this.defaultBgColor;return"function"==typeof t?t(e):t}}get borderColor(){const{obj:e,superTheme:t}=this[r];return i(e,t,["borderColor"])}get frozenRowsBorderColor(){const{obj:e,superTheme:t}=this[r];return i(e,t,["frozenRowsBorderColor"],["borderColor"])}get highlightBorderColor(){const{obj:e,superTheme:t}=this[r];return i(e,t,["highlightBorderColor"],["borderColor"])}get checkbox(){const{obj:e,superTheme:t}=this[r];return this._checkbox||(this._checkbox={get uncheckBgColor(){return i(e,t,["checkbox","uncheckBgColor"],["defaultBgColor"])},get checkBgColor(){return i(e,t,["checkbox","checkBgColor"],["borderColor"])},get borderColor(){return i(e,t,["checkbox","borderColor"],["borderColor"])}})}get radioButton(){const{obj:e,superTheme:t}=this[r];return this._radioButton||(this._radioButton={get checkColor(){return i(e,t,["radioButton","checkColor"],["color"])},get uncheckBorderColor(){return i(e,t,["radioButton","uncheckBorderColor"],["borderColor"])},get checkBorderColor(){return i(e,t,["radioButton","checkBorderColor"],["borderColor"])},get uncheckBgColor(){return i(e,t,["radioButton","uncheckBgColor"],["defaultBgColor"])},get checkBgColor(){return i(e,t,["radioButton","checkBgColor"],["defaultBgColor"])}})}get button(){const{obj:e,superTheme:t}=this[r];return this._button||(this._button={get color(){return i(e,t,["button","color"],["color"])},get bgColor(){return i(e,t,["button","bgColor"],["defaultBgColor"])}})}get header(){const{obj:e,superTheme:t}=this[r];return this._header||(this._header={get sortArrowColor(){return i(e,t,["header","sortArrowColor"],["color"])}})}hasProperty(e){const{obj:t,superTheme:o}=this[r];return l(t,e)||l(o,e)}extends(e){return new s(e,this)}}function l(e,t){if(e instanceof s)return e.hasProperty(t);{let o=e;if(!o)return!1;for(let e=0;e<t.length;e++)if(o=o[t[e]],!o)return!1;return!!o}}t.Theme=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={};t.default={color:"#000",defaultBgColor:function(e){const{row:t,grid:o}=e;return t<o.frozenRowCount?"#FFF":1&o.getRecordIndexByRow(t)?"#F6F6F6":"#FFF"},frozenRowsBgColor:function(e){const{col:t,grid:o,grid:{frozenRowCount:r},context:i}=e,{left:s,top:l}=o.getCellRelativeRect(t,0),{bottom:a}=o.getCellRelativeRect(t,r-1);return function(e,t,o,r,i,s){let l;const a=[];for(l in s)a.push(`${l}@${s[l]}`);const c=`${t}/${o}/${r}/${i}/${a.join(",")}`,u=n[c];if(u)return u;const h=e.createLinearGradient(t,o,t,i);for(l in s)h.addColorStop(Number(l),s[l]);return n[c]=h}(i,s,l,s,a,{0:"#FFF",1:"#D3D3D3"})},selectionBgColor:"#CCE0FF",borderColor:"#000",highlightBorderColor:"#5E9ED6",checkbox:{uncheckBgColor:"#FFF",checkBgColor:"rgb(76, 73, 72)",borderColor:"#000"},radioButton:{checkColor:"rgb(76, 73, 72)",checkBorderColor:"#000",uncheckBorderColor:"#000",uncheckBgColor:"#FFF",checkBgColor:"#FFF"},button:{color:"#FFF",bgColor:"#2196F3"},header:{sortArrowColor:"rgba(0, 0, 0, 0.38)"},underlayBackgroundColor:"#F6F6F6"}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={color:"rgba(0, 0, 0, 0.87)",frozenRowsColor:"rgba(0, 0, 0, 0.54)",defaultBgColor:"#FFF",selectionBgColor:"#CCE0FF",borderColor:function(e){const{col:t,row:o,grid:n}=e,{colCount:r,frozenColCount:i,recordRowCount:s}=n;let l="#ccc7c7",a="#ccc7c7";if(s>1){const e=n.getRecordStartRowByRecordIndex(n.getRecordIndexByRow(o));e!==o&&(l=null),e+s-1!==o&&(a=null)}return i-1===t||r-1===t?[l,"#f2f2f2",a,null]:[l,null,a,null]},frozenRowsBorderColor:function(e){const{row:t,grid:{frozenRowCount:o}}=e;return o-1===t?["#f2f2f2","#f2f2f2","#ccc7c7","#f2f2f2"]:["#f2f2f2"]},highlightBorderColor:"#5E9ED6",checkbox:{checkBgColor:"rgb(76, 73, 72)",borderColor:"rgba(0, 0, 0, 0.26)"},radioButton:{checkColor:"rgb(76, 73, 72)",checkBorderColor:"rgb(76, 73, 72)",uncheckBorderColor:"rgb(189, 189, 189)"},button:{color:"#FFF",bgColor:"#2196F3"},header:{sortArrowColor:"rgba(0, 0, 0, 0.38)"},underlayBackgroundColor:"#FFF"}},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.canvashelper=void 0;const s=i(o(68));t.canvashelper=s},function(t,o,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&r(t,e,o);return i(t,e),t};Object.defineProperty(o,"__esModule",{value:!0}),o.ListGrid=void 0;const l=s(n(27)),a=s(n(35)),c=n(59),u=n(134),h=n(137),d=n(0),f=n(26),g=n(56),p=n(70),_=n(33),m=n(39),C=n(22),w=n(158),b=n(1),y=n(58),v=b.getProtectedSymbol();function x(e,t,o){return e[v].layoutMap.getCellRange(t,o)}function E(e,t,o,n){n.setRectFilter(n=>{let{left:r,right:i,top:s,bottom:l}=n;const{start:{col:a,row:c},end:{col:u,row:h}}=x(e,t,o);for(let o=t-1;o>=a;o--)r-=e.getColWidth(o);for(let o=t+1;o<=u;o++)i+=e.getColWidth(o);for(let t=o-1;t>=c;t--)s-=e.getRowHeight(t);for(let t=o+1;t<=h;t++)l+=e.getRowHeight(t);return C.Rect.bounds(r,s,i,l)})}function S(e,t,o){if(o<e[v].layoutMap.headerRowCount){const{caption:n}=e[v].layoutMap.getHeader(t,o);return"function"==typeof n?n():n}{const{field:n}=e[v].layoutMap.getBody(t,o);return I(e,n,o)}}function O(e,t,o){if(o<e[v].layoutMap.headerRowCount)return null;{const{message:n}=e[v].layoutMap.getBody(t,o);if(!n)return null;if(!Array.isArray(n))return I(e,n,o);const r=[];for(let t=0;t<n.length;t++){const i=I(e,n[t],o);if(d.isPromise(i))r.push(i);else if(h.hasMessage(i))return i}return r.length?new Promise((e,t)=>{r.forEach(o=>{o.then(t=>{h.hasMessage(t)&&e(t)},t)})}):null}}function R(e,t,o){if(Array.isArray(t))return t.map(t=>R(e,t,o));if(!d.obj.isObject(t)||"function"==typeof t)return I(e,t,o);const n={},r=t;return l.iconPropKeys.forEach(t=>{if(r[t]){const i=I(e,r[t],o);null!=i?n[t]=i:function(e,t,o){if(null==t)return!1;if(o<e[v].layoutMap.headerRowCount)return!1;{const n=k(e,o);return e[v].dataSource.hasField(n,t)}}(e,r[t],o)||(n[t]=r[t])}}),n}function I(e,t,o){if(null==t)return null;if(o<e[v].layoutMap.headerRowCount)return null;{const n=k(e,o);return e[v].dataSource.getField(n,t)}}function P(e,t,o,{col:n,row:r},i,s){const l=e[v].gridCanvasHelper,a=({bgColor:e}={})=>{const t={fillColor:e};l.fillCellWithState(o,t)},c=()=>{if(o.col===e.frozenColCount-1){const t=o.getRect();l.drawWithClip(o,n=>{const r=o.row>=e.frozenRowCount?l.theme.borderColor:l.theme.frozenRowsBorderColor,i=l.toBoxArray(l.getColor(r,o.col,o.row,n));i[1]&&(n.lineWidth=1,n.strokeStyle=i[1],n.beginPath(),n.moveTo(t.right-2.5,t.top),n.lineTo(t.right-2.5,t.bottom),n.stroke())})}!function(e,t,o){const{col:n,row:r}=o,i=e.selection.select,{layoutMap:s}=e[v],l=o.getRect(),a={},c=s.getRecordIndexByRow(i.row),u=s.getCellId(i.col,i.row);function h(e,t){return e===i.col&&t===i.row||null!=u&&s.getCellId(e,t)===u&&s.getRecordIndexByRow(t)===c}if(h(n,r))a.borderColor=t.theme.highlightBorderColor,a.lineWidth=2,t.border(o,a);else{a.lineWidth=1;const s=e.isFrozenCell(n,r);(null==s?void 0:s.row)&&(a.borderColor=t.theme.frozenRowsBorderColor),t.border(o,a),n>0&&h(n-1,r)?t.drawBorderWithClip(o,e=>{const o=t.toBoxArray(t.getColor(t.theme.highlightBorderColor,i.col,i.row,e));o[1]&&(e.lineWidth=1,e.strokeStyle=o[1],e.beginPath(),e.moveTo(l.left-.5,l.top),e.lineTo(l.left-.5,l.bottom),e.stroke())}):r>0&&h(n,r-1)&&t.drawBorderWithClip(o,e=>{const o=t.toBoxArray(t.getColor(t.theme.highlightBorderColor,i.col,i.row,e));o[0]&&(e.lineWidth=1,e.strokeStyle=o[0],e.beginPath(),e.moveTo(l.left,l.top-.5),e.lineTo(l.right,l.top-.5),e.stroke())})}}(e,l,o)};return s(t,{getRecord:()=>e.getRowRecord(r),getIcon:()=>function(e,t,o){const{icon:n}=e[v].layoutMap.getBody(t,o);return null==n?null:R(e,n,o)}(e,n,r),getMessage:()=>O(e,n,r),messageHandler:e[v].messageHandler,style:i,drawCellBase:({bgColor:e}={})=>{a({bgColor:e}),c()},drawCellBg:a,drawCellBorder:c},o,e)}function M(e){var t;const o=e[v];o.headerEvents&&o.headerEvents.forEach(t=>e.unlisten(t));const n=e[v].headerEvents=[];let r;n.forEach(t=>e.unlisten(t)),r=o.layout&&(!Array.isArray(o.layout)||o.layout.length>0)?o.layoutMap=new u.MultiLayoutMap(o.layout):o.layoutMap=new u.SimpleHeaderLayoutMap(null!==(t=o.header)&&void 0!==t?t:[]),r.headerObjects.forEach(t=>{const o=t.headerType.bindGridEvent(e,t.id);if(n.push(...o),t.style&&t.style instanceof _.BaseStyle){const o=t.style.listen(_.BaseStyle.EVENT_TYPE.CHANGE_STYLE,()=>{e.invalidate()});n.push(o)}if(t.action){const o=t.action.bindGridEvent(e,t.id);n.push(...o)}}),r.columnObjects.forEach(t=>{if(t.action){const o=t.action.bindGridEvent(e,t.id);n.push(...o)}if(t.columnType){const o=t.columnType.bindGridEvent(e,t.id);n.push(...o)}if(t.style&&t.style instanceof f.BaseStyle){const o=t.style.listen(f.BaseStyle.EVENT_TYPE.CHANGE_STYLE,()=>{e.invalidate()});n.push(o)}});for(let t=0;t<r.columnWidths.length;t++){const o=r.columnWidths[t],{width:n,minWidth:i,maxWidth:s}=o;n&&(n>0||"string"==typeof n)&&e.setColWidth(t,n),i&&(i>0||"string"==typeof i)&&e.setMinColWidth(t,i),s&&(s>0||"string"==typeof s)&&e.setMaxColWidth(t,s)}const{headerRowHeight:i}=e[v];for(let t=0;t<r.headerRowCount;t++){const o=Array.isArray(i)?i[t]:i;o&&o>0&&e.setRowHeight(t,o)}e.colCount=r.colCount,T(e),e.frozenRowCount=r.headerRowCount}function T(e){const{layoutMap:t}=e[v];e.rowCount=e[v].dataSource.length*t.bodyRowCount+t.headerRowCount}function B(e,t){const{dataSourceEventIds:o}=e[v];o&&o.forEach(t=>e[v].handler.off(t)),t(e),e[v].dataSourceEventIds=[e[v].handler.on(e[v].dataSource,c.DataSource.EVENT_TYPE.UPDATED_LENGTH,()=>{T(e),e.invalidate()}),e[v].handler.on(e[v].dataSource,c.DataSource.EVENT_TYPE.UPDATED_ORDER,()=>{e.invalidate()})]}function L(e,t=[]){B(e,()=>{e[v].records=t;const o=e[v].dataSource=c.CachedDataSource.ofArray(t);e.addDisposable(o)})}function D(e,t){B(e,()=>{if(t)if(t instanceof c.DataSource)e[v].dataSource=t;else{const o=e[v].dataSource=new c.CachedDataSource(t);e.addDisposable(o)}else e[v].dataSource=c.DataSource.EMPTY;e[v].records=null})}function k(e,t){const{layoutMap:o}=e[v];return o.getRecordIndexByRow(t)}function A(e,t=(()=>!0)){var o;const{layoutMap:n}=this[v],r=this.selection.range,{start:i}=this.getCellRange(r.start.col,r.start.row),{end:s}=this.getCellRange(r.end.col,r.end.row),l=y.parsePasteRangeBoxValues(e),a=Math.min(Math.max(s.row-i.row+1,l.rowCount),this.rowCount-i.row),c=Math.min(Math.max(s.col-i.col+1,l.colCount),this.colCount-i.col);let u=!1;const h=[];for(let e=0;e<n.bodyRowCount;e++){const t=[];h.push(t);for(let r=0;r<c;r++){const s=n.getBody(i.col+r,e+n.headerRowCount);t[r]=s,!u&&(null===(o=s.action)||void 0===o?void 0:o.editable)&&(u=!0)}}if(!u)return;const f=n.getRecordStartRowByRecordIndex(n.getRecordIndexByRow(i.row));let g={},p=i.row-f,_=0;for(let e=0;e<a;e++){let o=0;for(let n=0;n<c;n++){const{action:r,id:s}=h[p][n];if(!g[s]&&(null==r?void 0:r.editable)){g[s]=!0;const a=i.col+n,c=i.row+e,u=l.getCellValue(o,_);d.then(this.getRowRecord(c),e=>{d.then(S(this,a,c),o=>{t({grid:this,record:e,col:a,row:c,value:u,oldValue:o})&&r.onPasteCellRangeBox(this,{col:a,row:c},u)})})}o++,o>=l.colCount&&(o=0)}p++,p>=n.bodyRowCount&&(p=0,g={}),_++,_>=l.rowCount&&(_=0)}const m={col:i.col+c-1,row:i.row+a-1};this.selection.range={start:i,end:m},this.invalidateCellRange(this.selection.range)}function j(){var e;const{layoutMap:t}=this[v],o=this.selection.range,{start:n}=this.getCellRange(o.start.col,o.start.row),{end:r}=this.getCellRange(o.end.col,o.end.row),i=Math.min(r.row-n.row+1,this.rowCount-n.row),s=Math.min(r.col-n.col+1,this.colCount-n.col);let l=!1;const a=[];for(let o=0;o<t.bodyRowCount;o++){const r=[];a.push(r);for(let i=0;i<s;i++){const s=t.getBody(n.col+i,o+t.headerRowCount);r[i]=s,!l&&(null===(e=s.action)||void 0===e?void 0:e.editable)&&(l=!0)}}if(!l)return;const c=t.getRecordStartRowByRecordIndex(t.getRecordIndexByRow(n.row));let u={},h=n.row-c;for(let e=0;e<i;e++){for(let t=0;t<s;t++){const{action:o,id:r}=a[h][t];if(!u[r]&&(null==o?void 0:o.editable)){u[r]=!0;const i=n.col+t,s=n.row+e;d.then(this.getRowRecord(s),e=>{d.then(S(this,i,s),e=>{o.onDeleteCellRangeBox(this,{col:i,row:s})})})}}h++,h>=t.bodyRowCount&&(h=0,u={})}this.invalidateCellRange(o)}class F extends g.DrawGrid{constructor(t={}){var o;super(d.omit(t,["colCount","rowCount","frozenRowCount"])),this.disabled=!1,this.readOnly=!1;const n=this[v];n.header=t.header||[],n.layout=t.layout||[],n.headerRowHeight=t.headerRowHeight||[],t.dataSource?D(this,t.dataSource):L(this,t.records),n.allowRangePaste=null!==(o=t.allowRangePaste)&&void 0!==o&&o,M(this),n.sortState={col:-1,row:-1,order:void 0},n.gridCanvasHelper=new p.GridCanvasHelper(this),n.theme=a.of(t.theme),n.messageHandler=new h.MessageHandler(this,(e,t)=>O(this,e,t)),n.tooltipHandler=new w.TooltipHandler(this),this.invalidate(),n.handler.on(e,"resize",()=>{this.updateSize(),this.updateScroll(),this.invalidate()})}static get EVENT_TYPE(){return m.LG_EVENT_TYPE}dispose(){const e=this[v];e.messageHandler.dispose(),e.tooltipHandler.dispose(),super.dispose()}get header(){return this[v].header}set header(e){this[v].header=e,M(this)}get layout(){return this[v].layout}set layout(e){this[v].layout=e,M(this)}get recordRowCount(){return this[v].layoutMap.bodyRowCount}get records(){return this[v].records||null}set records(e){null!=e&&(L(this,e),T(this),this.invalidate())}get dataSource(){return this[v].dataSource}set dataSource(e){D(this,e),T(this),this.invalidate()}get theme(){return this[v].theme}set theme(e){this[v].theme=a.of(e),this.invalidate()}get allowRangePaste(){return this[v].allowRangePaste}set allowRangePaste(e){this[v].allowRangePaste=e}get font(){return super.font||this[v].gridCanvasHelper.theme.font}set font(e){super.font=e}get underlayBackgroundColor(){return super.underlayBackgroundColor||this[v].gridCanvasHelper.theme.underlayBackgroundColor}set underlayBackgroundColor(e){super.underlayBackgroundColor=e}get sortState(){return this[v].sortState}set sortState(e){const t=this.sortState;let o;t.col>=0&&t.row>=0&&(o=this.getHeaderField(t.col,t.row));const n=this[v].sortState=null!=e?e:{col:-1,row:-1,order:void 0};let r;n.col>=0&&n.row>=0&&(r=this.getHeaderField(n.col,n.row)),null!=o&&o!==r&&this.setHeaderValue(t.col,t.row,void 0),null!=r&&this.setHeaderValue(n.col,n.row,n.order)}get headerValues(){return this[v].headerValues||(this[v].headerValues=new Map)}set headerValues(e){this[v].headerValues=e||new Map}getField(e,t){return this[v].layoutMap.getBody(e,null!=t?t:this[v].layoutMap.headerRowCount).field}getColumnDefine(e,t){return this[v].layoutMap.getBody(e,null!=t?t:this[v].layoutMap.headerRowCount).define}getColumnType(e,t){return this[v].layoutMap.getBody(e,t).columnType}getHeaderField(e,t){return this[v].layoutMap.getHeader(e,t).field}getHeaderDefine(e,t){return this[v].layoutMap.getHeader(e,t).define}getRowRecord(e){return e<this[v].layoutMap.headerRowCount?void 0:this[v].dataSource.get(k(this,e))}getRecordIndexByRow(e){return k(this,e)}getRecordStartRowByRecordIndex(e){return this[v].layoutMap.getRecordStartRowByRecordIndex(e)}getColumnIndexByField(e){var t;const o=this.getCellRangeByField(e,0);return null!==(t=null==o?void 0:o.start.col)&&void 0!==t?t:null}getCellRangeByField(e,t){const{layoutMap:o}=this[v],n=o.columnObjects.find(t=>t.field===e);if(n){const e=o.getBodyLayoutRangeById(n.id),r=o.getRecordStartRowByRecordIndex(t);return{start:{col:e.start.col,row:r+e.start.row},end:{col:e.end.col,row:r+e.end.row}}}return null}focusGridCell(e,t){var o;const{start:{col:n,row:r},end:{col:i,row:s}}=this.selection.range,l=null===(o=this.getCellRangeByField(e,t))||void 0===o?void 0:o.start;null!=l&&(this.focusCell(l.col,l.row),this.selection.select=l,this.invalidateGridRect(n,r,i,s),this.invalidateCell(l.col,l.row))}makeVisibleGridCell(e,t){var o,n,r;const i=null===(o=this.getCellRangeByField(e,t))||void 0===o?void 0:o.start;this.makeVisibleCell(null!==(n=null==i?void 0:i.col)&&void 0!==n?n:0,null!==(r=null==i?void 0:i.row)&&void 0!==r?r:this[v].layoutMap.headerRowCount)}getGridCanvasHelper(){return this[v].gridCanvasHelper}getCellRange(e,t){return x(this,e,t)}getHeaderCellRange(e,t){return this.getCellRange(e,t)}getCopyCellValue(e,t,o){var n;const r=x(this,e,t),i=o?Math.max(o.start.col,r.start.col):r.start.col,s=o?Math.max(o.start.row,r.start.row):r.start.row;if(i!==e||s!==t)return"";const l=S(this,e,t);return t<this[v].layoutMap.headerRowCount?l:null!==(n=this[v].layoutMap.getBody(e,t).columnType.getCopyCellValue(l,this,{col:e,row:t}))&&void 0!==n?n:l}onDrawCell(e,t,o){const{layoutMap:n}=this[v];let r,i;if(t<n.headerRowCount){const s=n.getHeader(e,t);r=s.headerType.onDrawCell,({style:i}=s),E(this,e,t,o)}else{const s=n.getBody(e,t);r=s.columnType.onDrawCell,({style:i}=s),E(this,e,t,o)}return P(this,S(this,e,t),o,{col:e,row:t},i,r)}doGetCellValue(e,t,o){if(t<this[v].layoutMap.headerRowCount)return!1;{const n=S(this,e,t);if(d.isPromise(n))return!1;o(n)}return!0}doChangeValue(e,t,o){if(t<this[v].layoutMap.headerRowCount)return!1;{const n=this.getRowRecord(t);if(d.isPromise(n))return!1;const r=S(this,e,t);if(d.isPromise(r))return!1;const i=o(r);return void 0!==i&&d.then(function(e,t,o,n){if(o<e[v].layoutMap.headerRowCount)return!1;{const{field:r}=e[v].layoutMap.getBody(t,o);if(null==r)return!1;const i=k(e,o);return e[v].dataSource.setField(i,r,n)}}(this,e,t,i),o=>{if(o){const{field:o}=this[v].layoutMap.getBody(e,t);this.fireListeners(m.LG_EVENT_TYPE.CHANGED_VALUE,{col:e,row:t,record:n,field:o,value:i,oldValue:r})}return o})}}doSetPasteValue(e,t){A.call(this,e,t)}getHeaderValue(e,t){const o=this.getHeaderField(e,t);return this.headerValues.get(o)}setHeaderValue(e,t,o){const n=this.getHeaderField(e,t),r=this.headerValues.get(n);this.headerValues.set(n,o),this.fireListeners(m.LG_EVENT_TYPE.CHANGED_HEADER_VALUE,{col:e,row:t,field:n,value:o,oldValue:r})}getLayoutCellId(e,t){return this[v].layoutMap.getCellId(e,t)}bindEventsInternal(){this.listen(m.LG_EVENT_TYPE.SELECTED_CELL,e=>{const t=x(this,e.col,e.row),{start:{col:o,row:n},end:{col:r,row:i}}=t;o===r&&n===i||this.invalidateCellRange(t)}),this.listen(m.LG_EVENT_TYPE.PASTE_CELL,e=>{if(!this[v].allowRangePaste)return;const{start:t,end:o}=this.selection.range;if(!e.multi&&d.cellEquals(t,o))return;const{layoutMap:n}=this[v];t.row<n.headerRowCount||(d.event.cancel(e.event),A.call(this,e.normalizeValue))}),this.listen(m.LG_EVENT_TYPE.DELETE_CELL,e=>{const{start:t}=this.selection.range,{layoutMap:o}=this[v];t.row<o.headerRowCount||(d.event.cancel(e.event),j.call(this))})}getMoveLeftColByKeyDownInternal({col:e,row:t}){const{start:{col:o}}=x(this,e,t);return e=o,super.getMoveLeftColByKeyDownInternal({col:e,row:t})}getMoveRightColByKeyDownInternal({col:e,row:t}){const{end:{col:o}}=x(this,e,t);return e=o,super.getMoveRightColByKeyDownInternal({col:e,row:t})}getMoveUpRowByKeyDownInternal({col:e,row:t}){const{start:{row:o}}=x(this,e,t);return t=o,super.getMoveUpRowByKeyDownInternal({col:e,row:t})}getMoveDownRowByKeyDownInternal({col:e,row:t}){const{end:{row:o}}=x(this,e,t);return t=o,super.getMoveDownRowByKeyDownInternal({col:e,row:t})}getOffsetInvalidateCells(){return 1}getCopyRangeInternal(e){const{start:t}=this.getCellRange(e.start.col,e.start.row),{end:o}=this.getCellRange(e.end.col,e.end.row);return{start:t,end:o}}fireListeners(e,...t){return super.fireListeners(e,...t)}}o.ListGrid=F},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(135);Object.defineProperty(t,"SimpleHeaderLayoutMap",{enumerable:!0,get:function(){return n.SimpleHeaderLayoutMap}});var r=o(136);Object.defineProperty(t,"MultiLayoutMap",{enumerable:!0,get:function(){return r.MultiLayoutMap}})},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleHeaderLayoutMap=void 0;const s=i(o(16)),l=i(o(31)),a=i(o(23)),c=o(69);let u=0;t.SimpleHeaderLayoutMap=class{constructor(e){this.bodyRowCount=1,this._emptyDataCache=new c.EmptyDataCache,this._columns=[],this._headerCellIds=[],this._headerObjects=this._addHeaders(0,e,[]),this._headerObjectMap=this._headerObjects.reduce((e,t)=>(e[t.id]=t,e),{})}get columnWidths(){return this._columns}get headerRowCount(){return this._headerCellIds.length}get colCount(){return this._columns.length}get headerObjects(){return this._headerObjects}get columnObjects(){return this._columns}getCellId(e,t){return this.headerRowCount<=t?this._columns[e].id:this._headerCellIds[t][e]}getHeader(e,t){const o=this.getCellId(e,t);return this._headerObjectMap[o]||this._emptyDataCache.getHeader(e,t)}getBody(e,t){return this._columns[e]||this._emptyDataCache.getBody(e,0)}getBodyLayoutRangeById(e){for(let t=0;t<this.colCount;t++)if(e===this._columns[t].id)return{start:{col:t,row:0},end:{col:t,row:0}};throw new Error("can not found body layout @id="+e)}getCellRange(e,t){const o={start:{col:e,row:t},end:{col:e,row:t}};if(this.headerRowCount<=t)return o;const n=this.getCellId(e,t);for(let r=e-1;r>=0&&n===this.getCellId(r,t);r--)o.start.col=r;for(let r=e+1;r<this.colCount&&n===this.getCellId(r,t);r++)o.end.col=r;for(let r=t-1;r>=0&&n===this.getCellId(e,r);r--)o.start.row=r;for(let r=t+1;r<this.headerRowCount&&n===this.getCellId(e,r);r++)o.end.row=r;return o}getRecordIndexByRow(e){return e<this.headerRowCount?-1:e-this.headerRowCount}getRecordStartRowByRecordIndex(e){return this.headerRowCount+e}_addHeaders(e,t,o){const n=[],r=this._headerCellIds[e]||this._newRow(e);return t.forEach(t=>{const i=this._columns.length,c=u++,h={id:c,caption:t.caption,field:t.headerField||t.field,style:t.headerStyle,headerType:a.ofCell(t),action:l.ofCell(t),define:t};n[c]=h,r[i]=c;for(let t=e-1;t>=0;t--)this._headerCellIds[t][i]=o[t];if(t.columns)this._addHeaders(e+1,t.columns,[...o,c]).forEach(e=>n.push(e));else{const o=t;this._columns.push({id:u++,field:o.field,width:o.width,minWidth:o.minWidth,maxWidth:o.maxWidth,icon:o.icon,message:o.message,columnType:s.type.of(o.columnType),action:s.action.of(o.action),style:o.style,define:o});for(let t=e+1;t<this._headerCellIds.length;t++)this._headerCellIds[t][i]=c}}),n}_newRow(e){const t=this._headerCellIds[e]=[];if(!this._columns.length)return t;const o=this._headerCellIds[e-1];for(let e=0;e<o.length;e++)t[e]=o[e];return t}}},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiLayoutMap=void 0;const s=i(o(16)),l=i(o(31)),a=i(o(23)),c=o(69);let u=0;class h{constructor(e,t){this.objects=[],this.objectGrid=[],this.objectMap={},this.columnCount=0,this.columnWidths=[],e.forEach((e,o)=>{let n=0;e.forEach(e=>{var r,i;const s=u++,l=t(e,s);this.objects.push(l),this.objectMap[s]=l,n=this._findStartCell(n,o);const a=Number(null!==(r=e.rowSpan)&&void 0!==r?r:1),c=Number(null!==(i=e.colSpan)&&void 0!==i?i:1),h=o+a,d=n+c;for(let e=o;e<h;e++){const t=this._getObjectGridRow(e);for(let e=n;e<d;e++)t[e]=l}1===c&&this._setWidthDataIfAbsent(n,e),this._useColumnIndex(d-1),n=d})})}get rowCount(){return this.objectGrid.length}_findStartCell(e,t){const o=this._getObjectGridRow(t);for(let t=e;t<o.length;t++)if(!o[t])return t;return o.length}_getObjectGridRow(e){return this.objectGrid[e]||(this.objectGrid[e]=[])}_useColumnIndex(e){this.columnCount>e||(this.columnCount=e+1)}_setWidthDataIfAbsent(e,t){this.columnWidths[e]||null==t.width&&null==t.maxWidth&&null==t.minWidth||(this.columnWidths[e]={width:t.width,maxWidth:t.maxWidth,minWidth:t.minWidth})}}t.MultiLayoutMap=class{constructor(e){this._columnWidths=[],this._emptyDataCache=new c.EmptyDataCache;const t=function(e){return Array.isArray(e)?{header:e,body:e}:e}(e),o=this._header=new h(t.header,(e,t)=>({id:t,caption:e.caption,field:e.headerField||e.field,style:e.headerStyle,headerType:a.ofCell(e),action:l.ofCell(e),define:e})),n=this._body=new h(t.body,(e,t)=>({id:t,field:e.field,width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth,icon:e.icon,message:e.message,columnType:s.type.of(e.columnType),action:s.action.of(e.action),style:e.style,define:e})),r=this._columnCount=Math.max(o.columnCount,n.columnCount);for(let e=0;e<r;e++){const t=o.columnWidths[e]||n.columnWidths[e]||{};this._columnWidths[e]=t}}get columnWidths(){return this._columnWidths}get headerRowCount(){return this._header.rowCount}get bodyRowCount(){return this._body.rowCount}get colCount(){return this._columnCount}get headerObjects(){return this._header.objects}get columnObjects(){return this._body.objects}getCellId(e,t){var o,n,r,i;if(this.headerRowCount<=t){const r=(t-this.headerRowCount)%this.bodyRowCount;return null===(n=null===(o=this._body.objectGrid[r])||void 0===o?void 0:o[e])||void 0===n?void 0:n.id}return null===(i=null===(r=this._header.objectGrid[t])||void 0===r?void 0:r[e])||void 0===i?void 0:i.id}getHeader(e,t){const o=this.getCellId(e,t);return this._header.objectMap[o]||this._emptyDataCache.getHeader(e,t)}getBody(e,t){const o=this.getCellId(e,t);return this._body.objectMap[o]||this._emptyDataCache.getBody(e,t)}getBodyLayoutRangeById(e){var t;for(let o=0;o<this.bodyRowCount;o++){const n=this._body.objectGrid[o];if(n)for(let r=0;r<this.colCount;r++)if(e===(null===(t=n[r])||void 0===t?void 0:t.id))return this._getCellRange(this._body,r,o,0)}throw new Error("can not found body layout @id="+e)}getCellRange(e,t){if(this.headerRowCount<=t){const o=this.getRecordIndexByRow(t),n=this.getRecordStartRowByRecordIndex(o),r=(t-this.headerRowCount)%this.bodyRowCount;return this._getCellRange(this._body,e,r,n)}return this._getCellRange(this._header,e,t,0)}getRecordIndexByRow(e){if(e<this.headerRowCount)return-1;{const t=e-this.headerRowCount;return Math.floor(t/this.bodyRowCount)}}getRecordStartRowByRecordIndex(e){return this.headerRowCount+e*this.bodyRowCount}_getCellRange(e,t,o,n){var r,i,s,l,a,c,u,h,d,f;const g={start:{col:t,row:o+n},end:{col:t,row:o+n}},{objectGrid:p}=e,_=null===(i=null===(r=p[o])||void 0===r?void 0:r[t])||void 0===i?void 0:i.id;if(null==_)return g;for(let e=t-1;e>=0&&_===(null===(l=null===(s=p[o])||void 0===s?void 0:s[e])||void 0===l?void 0:l.id);e--)g.start.col=e;for(let n=t+1;n<e.columnCount&&_===(null===(c=null===(a=p[o])||void 0===a?void 0:a[n])||void 0===c?void 0:c.id);n++)g.end.col=n;for(let e=o-1;e>=0&&_===(null===(h=null===(u=p[e])||void 0===u?void 0:u[t])||void 0===h?void 0:h.id);e--)g.start.row=e+n;for(let r=o+1;r<e.rowCount&&_===(null===(f=null===(d=p[r])||void 0===d?void 0:d[t])||void 0===f?void 0:f.id);r++)g.end.row=r+n;return g}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=t.hasMessage=void 0;const n=o(138),r=o(144),i=o(39),s=o(145),l=o(0),a={type:"error",message:null},c={error:e=>new n.ErrorMessage(e),info:e=>new r.InfoMessage(e),warning:e=>new s.WarningMessage(e)};function u(e){if(!e||l.isPromise(e))return a;if("string"==typeof e)return{type:"error",message:e,original:e};const t=e.type||"error";return t&&t in c?{type:t.toLowerCase(),message:e.message,original:e}:{type:"error",message:""+e,original:e}}function h(e){return!!u(e).message}t.hasMessage=h,t.MessageHandler=class{constructor(e,t){this._attachInfo=null,this._grid=e,this._messageInstances={},this._bindGridEvent(e,t)}dispose(){var e;const t=this._messageInstances;for(const o in t)null===(e=t[o])||void 0===e||e.dispose();delete this._messageInstances,delete this._attachInfo}drawCellMessage(e,t,o,n,r,i){h(e)&&this._getMessageInstanceOfMessage(e).drawCellMessage(u(e),t,o,n,r,i)}_attach(e,t,o){const n=this._attachInfo,r=this._getMessageInstanceOfMessage(o);n&&n.instance!==r&&n.instance.detachMessageElement(),r.attachMessageElement(e,t,u(o)),this._attachInfo={col:e,row:t,instance:r}}_move(e,t){const o=this._attachInfo;if(!o||o.col!==e||o.row!==t)return;const{instance:n}=o;n.moveMessageElement(e,t)}_detach(){const e=this._attachInfo;if(!e)return;const{instance:t}=e;t.detachMessageElement(),this._attachInfo=null}_bindGridEvent(e,t){const o=o=>{const n=e=>{h(e)?this._attach(o.col,o.row,e):this._detach()},r=t(o.col,o.row);if(l.isPromise(r))return this._detach(),void r.then(t=>{const r=e.selection.select;r.col===o.col&&r.row===o.row&&n(t)});n(r)};e.listen(i.LG_EVENT_TYPE.SELECTED_CELL,e=>{e.selected&&(e.before.col===e.col&&e.before.row===e.row||o(e))}),e.listen(i.LG_EVENT_TYPE.SCROLL,()=>{const t=e.selection.select;this._move(t.col,t.row)}),e.listen(i.LG_EVENT_TYPE.CHANGED_VALUE,t=>{const n=e.selection.select;n.col===t.col&&n.row===t.row&&o(t)}),e.listen(i.LG_EVENT_TYPE.FOCUS_GRID,t=>{const n=e.selection.select;o(n)}),e.listen(i.LG_EVENT_TYPE.BLUR_GRID,e=>{this._detach()})}_getMessageInstanceOfMessage(e){const t=this._messageInstances,{type:o}=u(e);return t[o]||(t[o]=c[o](this._grid))}}},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorMessage=void 0;const s=i(o(36)),l=o(37),a=o(139),c=o(0);class u extends l.BaseMessage{createMessageElementInternal(){return new a.ErrorMessageElement}drawCellMessageInternal(e,t,o,n,r,i){const{bgColor:l}=o,{select:a}=t.getSelection();c.cellInRange(r.getCellRange(t.col,t.row),a.col,a.row)&&r.hasFocusGrid()||n.drawBorderWithClip(t,e=>{s.drawExclamationMarkBox(t,{bgColor:"#ff8a80",color:l},n)})}}t.ErrorMessage=u},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorMessageElement=void 0;const n=o(38),r="cheetah-grid__error-message-element";class i extends n.MessageElement{constructor(){super(),o(142),this._rootElement.classList.add(r),this._messageElement.classList.add("cheetah-grid__error-message-element__message")}}t.ErrorMessageElement=i},function(e,t,o){var n=o(5),r=o(141);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};n(r,i),e.exports=r.locals||{}},function(e,t,o){"use strict";o.r(t);var n=o(2),r=o.n(n)()(!1);r.push([e.i,".cheetah-grid__message-element{position:absolute;margin-top:-2px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element--hidden{display:none}.cheetah-grid__message-element--shown{display:block}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}",""]),t.default=r},function(e,t,o){var n=o(5),r=o(143);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};n(r,i),e.exports=r.locals||{}},function(e,t,o){"use strict";o.r(t);var n=o(2),r=o.n(n)()(!1);r.push([e.i,".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}",""]),t.default=r},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.InfoMessage=void 0;const s=i(o(36)),l=o(37),a=o(38),c=o(0);class u extends l.BaseMessage{createMessageElementInternal(){return new a.MessageElement}drawCellMessageInternal(e,t,o,n,r,i){const{bgColor:l}=o,{select:a}=t.getSelection();c.cellInRange(r.getCellRange(t.col,t.row),a.col,a.row)&&r.hasFocusGrid()||n.drawBorderWithClip(t,e=>{s.drawExclamationMarkBox(t,{bgColor:"#e0e0e0",color:l},n)})}}t.InfoMessage=u},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WarningMessage=void 0;const s=i(o(36)),l=o(37),a=o(146),c=o(0);class u extends l.BaseMessage{createMessageElementInternal(){return new a.WarningMessageElement}drawCellMessageInternal(e,t,o,n,r,i){const{bgColor:l}=o,{select:a}=t.getSelection();c.cellInRange(r.getCellRange(t.col,t.row),a.col,a.row)&&r.hasFocusGrid()||n.drawBorderWithClip(t,e=>{s.drawExclamationMarkBox(t,{bgColor:"#ff9e80",color:l},n)})}}t.WarningMessage=u},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WarningMessageElement=void 0;const n=o(38),r="cheetah-grid__warning-message-element";class i extends n.MessageElement{constructor(){super(),o(147),this._rootElement.classList.add(r),this._messageElement.classList.add("cheetah-grid__warning-message-element__message")}}t.WarningMessageElement=i},function(e,t,o){var n=o(5),r=o(148);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};n(r,i),e.exports=r.locals||{}},function(e,t,o){"use strict";o.r(t);var n=o(2),r=o.n(n)()(!1);r.push([e.i,".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}",""]),t.default=r},function(t,o,n){"use strict";const r=n(150),i={SERIF:"serif",SANS_SERIF:"sans-serif"},s={};class l{constructor(e,t){this.activeCallbacks=[],this.inactiveCallbacks=[],this.status=null,this.lastResortWidths_={},this.fontRulerA_=new r.FontRuler(`${e},${i.SERIF}`,t),this.fontRulerB_=new r.FontRuler(`${e},${i.SANS_SERIF}`,t);const o=new r.FontRuler("4px "+i.SERIF,t),n=new r.FontRuler("4px "+i.SANS_SERIF,t);this.lastResortWidths_[i.SERIF]=o.getWidth(),this.lastResortWidths_[i.SANS_SERIF]=n.getWidth(),o.remove(),n.remove(),this.started_=Date.now(),this.check_()}static load(e,t,o,n){const r=s[e]||(s[e]={});let i;i=r[t+=""]?r[t]:r[t]=new l(e,t),i.then(o,n)}then(e,t){this.status?"ng"!==this.status?e():t():(this.activeCallbacks.push(e),this.inactiveCallbacks.push(t))}check_(){const e=this.fontRulerA_.getWidth(),t=this.fontRulerB_.getWidth();this.isFallbackFont_(e,t)||this.isLastResortFont_(e,t)?Date.now()-this.started_>=3e3?this.isLastResortFont_(e,t)?(this.finish_(this.activeCallbacks),this.status="ok"):(this.finish_(this.inactiveCallbacks),this.status="ng"):setTimeout(()=>{this.check_()},50):(this.finish_(this.activeCallbacks),this.status="ok")}isFallbackFont_(e,t){return this.widthMatches_(e,i.SERIF)&&this.widthMatches_(t,i.SANS_SERIF)}widthsMatchLastResortWidths_(e,t){for(const o in i)if(i.hasOwnProperty(o)&&this.widthMatches_(e,i[o])&&this.widthMatches_(t,i[o]))return!0;return!1}widthMatches_(e,t){return e===this.lastResortWidths_[t]}isLastResortFont_(t,o){return function(){if(null===a){const t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(e.navigator.userAgent);a=!!t&&(parseInt(t[1],10)<536||536===parseInt(t[1],10)&&parseInt(t[2],10)<=11)}return a}()&&this.widthsMatchLastResortWidths_(t,o)}finish_(e){setTimeout(()=>{this.fontRulerA_.remove(),this.fontRulerB_.remove(),e.forEach(e=>e())},0)}}let a=null;t.exports=l},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontRuler=void 0,t.FontRuler=class{constructor(e,t){const o=document.createElement("span");o.setAttribute("aria-hidden","true"),o.textContent=t||"BESbswy",function(e){return[{display:"block",position:"absolute",top:"-9999px",left:"-9999px",width:"auto",height:"auto",margin:"0",padding:"0","white-space":"nowrap",font:e},{"font-variant":"normal","font-size":"300px","font-style":"normal","font-weight":"400","line-height":"normal"}]}(e).forEach(e=>{for(const t in e){const n=t;o.style[n]=e[n]}}),document.body.appendChild(o),this.el_=o}getWidth(){return this.el_.offsetWidth}remove(){document.body.removeChild(this.el_)}}},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.string=t.buildInlines=t.of=t.iconOf=void 0;const s=i(o(65)),l=i(o(40)),a=o(15),c=o(72),u=o(155),h=o(73),d=o(156),f=o(157),g=o(8);function p(e){if(e instanceof a.Inline)return e;if(!e)return null;if(function(e){return!(!e.font||!e.content)}(e))return new u.InlineIcon(e);if(function(e){return!!e.src}(e))return new h.InlineImage({src:e.src,width:e.width,height:e.width});if(e.svg)return new f.InlineSvg({svg:e.svg,width:e.width,height:e.width});if(function(e){return!!e.path}(e))return new d.InlinePath2D({path:e.path,width:e.width,height:e.width,color:e.color});const t=s.get();if(e.name&&t[e.name]){const o=t[e.name],n=e.width||Math.max(o.width,o.height);return new c.InlineDrawer({draw({ctx:e,rect:t,offset:r,offsetLeft:i,offsetRight:s,offsetTop:a,offsetBottom:c}){!function(e,t,o,n,r,i,s,a,{offset:c=2,padding:u}={}){const h={left:r,top:i,width:s,height:a,right:r+s,bottom:i+a};e.save();try{e.beginPath(),e.rect(h.left,h.top,h.width,h.height),e.clip();const r=g.calcStartPosition(e,h,o,n,{offset:c,padding:u});l.fill(t,e,r.x,r.y,o,n)}finally{e.restore()}}(e,o,n,n,t.left,t.top,t.width,t.height,{offset:r+1,padding:{left:i,right:s,top:a,bottom:c}})},width:n,height:n,color:e.color})}return new u.InlineIcon(e)}function _(e){return null==e?null:e instanceof a.Inline?e:new a.Inline(e)}function m(e,t){const o=[];if(e&&o.push(...e.map(e=>p(e)).filter(e=>null!=e)),Array.isArray(t))o.push(...t.map(e=>_(e)).filter(e=>null!=e));else{const e=_(t);e&&o.push(e)}return o}t.iconOf=p,t.of=_,t.buildInlines=m,t.string=function(e){return m(void 0,e).join("")}},function(t,o,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Path2DShim=void 0;const r=new(n(153).PathCommandsParser);class i{constructor(e){if(this._ops=[],void 0!==e)if("string"==typeof e)this._ops=r.parse(e);else{if(!e.hasOwnProperty("_ops"))throw new Error(`Error: ${typeof e} is not a valid argument to Path`);this._ops=[...e._ops]}}arc(...e){this._ops.push({op:"arc",args:e})}arcTo(...e){this._ops.push({op:"arcTo",args:e})}bezierCurveTo(...e){this._ops.push({op:"bezierCurveTo",args:e})}closePath(...e){this._ops.push({op:"closePath",args:e})}ellipse(...e){this._ops.push({op:"ellipse",args:e})}lineTo(...e){this._ops.push({op:"lineTo",args:e})}moveTo(...e){this._ops.push({op:"moveTo",args:e})}quadraticCurveTo(...e){this._ops.push({op:"quadraticCurveTo",args:e})}rect(...e){this._ops.push({op:"rect",args:e})}}o.Path2DShim=i;const{CanvasRenderingContext2D:s}=e,l=s.prototype.fill;s.prototype.fill=function(...e){if(e[0]instanceof i){const t=e[0];this.beginPath(),t._ops.forEach(e=>{this[e.op].apply(this,e.args)}),l.apply(this,Array.prototype.slice.call(e,1))}else l.apply(this,e)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathCommandsParser=void 0;const n=o(154);function r(e,t,o){return"M"===t.toUpperCase()||"L"===t.toUpperCase()||"T"===t.toUpperCase()?(e.command(t,o.next(),o.next()),"M"===t?"L":"m"===t?"l":t):"H"===t.toUpperCase()||"V"===t.toUpperCase()?(e.command(t,o.next()),t):"Z"===t.toUpperCase()?(e.command(t),t):"C"===t.toUpperCase()?(e.command(t,o.next(),o.next(),o.next(),o.next(),o.next(),o.next()),t):"S"===t.toUpperCase()||"Q"===t.toUpperCase()?(e.command(t,o.next(),o.next(),o.next(),o.next()),t):"A"===t.toUpperCase()?(e.command(t,o.next(),o.next(),o.next(),o.next(),o.next(),o.next(),o.next()),t):(console.warn("unsupported:"+t),null)}t.PathCommandsParser=class{constructor(){this._ops=[],this._commands=new n.PathCommands(this);const e=e=>(...t)=>{this._ops.push({op:e,args:t})};this.moveTo=e("moveTo"),this.lineTo=e("lineTo"),this.closePath=e("closePath"),this.bezierCurveTo=e("bezierCurveTo"),this.quadraticCurveTo=e("quadraticCurveTo"),this.save=e("save"),this.translate=e("translate"),this.rotate=e("rotate"),this.scale=e("scale"),this.arc=e("arc"),this.restore=e("restore"),this.arcTo=e("arcTo"),this.ellipse=e("ellipse"),this.rect=e("rect")}command(e,...t){const o=t||[];for(let e=0;e<t.length;e++)o[e]-=0;this._commands[e].apply(this,o)}parse(e){const t=this._ops=[],o=function(e){let t=0;return{next(){let o="";for(;e.length>t;){const n=e[t];if(t++," ,\n\r\t".indexOf(n)>-1){if(o)return o}else{if("str"==(".+-1234567890".indexOf(n)>-1?"num":"str"))return o?(t--,o):n;if("-+".indexOf(n)>-1&&o)return t--,o;if("."===n&&o.indexOf(".")>-1)return t--,o;o+=n}}return o||null}}}(e);try{let e,t="Z";for(;e=o.next();)if(isNaN(Number(e)))t=r(this,e,o)||"Z";else{let n=!0;t=r(this,t,{next:()=>n?(n=!1,e):o.next()})||"Z"}}catch(t){throw console.log("Error: "+e),t}return t}}},function(e,t,o){"use strict";function n(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))}function r(e,t){let o=1;return e[0]*t[1]-e[1]*t[0]<0&&(o=-1),o*Math.acos((r=function(e,t){return function(e,t){return e[0]*t[0]+e[1]*t[1]}(e,t)/(n(e)*n(t))}(e,t),i=-1,s=1,Math.min(Math.max(r,i),s)));var r,i,s}function i(e,t,o,n,i,s,l,a,c,u){if(0===n||0===i)return void e.lineTo(c,t);s*=Math.PI/180,n=Math.abs(n),i=Math.abs(i);const h=function(e,t){const o=Math.cos(t),n=Math.sin(t);return[o*e[0]+n*e[1],-1*n*e[0]+o*e[1]]}([((d=[t,o])[0]-(f=[c,u])[0])/2,(d[1]-f[1])/2],s);var d,f;const g=function(e,t){return[e[0]*t[0],e[1]*t[1]]}(h,h);let p=Math.pow(n,2),_=Math.pow(i,2);const m=Math.sqrt(g[0]/p+g[1]/_);m>1&&(n*=m,i*=m,p=Math.pow(n,2),_=Math.pow(i,2));let C=Math.sqrt(Math.abs(p*_-p*g[1]-_*g[0])/(p*g[1]+_*g[0]));l===a&&(C*=-1);const w=function(e,t){return[e*t[0],e*t[1]]}(C,[n*h[1]/i,-i*h[0]/n]),b=function(e,t){return[e[0]+t[0],e[1]+t[1]]}(function(e,t){const o=Math.cos(t),n=Math.sin(t);return[o*e[0]-n*e[1],n*e[0]+o*e[1]]}(w,s),function(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}([t,o],[c,u])),y=[(h[0]-w[0])/n,(h[1]-w[1])/i],v=[(-1*h[0]-w[0])/n,(-1*h[1]-w[1])/i],x=r([1,0],y),E=x,S=x+r(y,v);e.save(),e.translate(b[0],b[1]),e.rotate(s),e.scale(n,i),e.arc(0,0,1,E,S,!a),e.restore()}Object.defineProperty(t,"__esModule",{value:!0}),t.PathCommands=void 0,t.PathCommands=class{constructor(e){let t,o,n,r=0,s=0,l="";function a(){return"CcSsQqTt".indexOf(l)<0?{x:r,y:s}:n}this.M=(n,i)=>(e.moveTo(n,i),t=n,o=i,r=n,s=i,l="M",this),this.m=(e,t)=>this.M(e+r,t+s),this.L=(t,o)=>(e.lineTo(t,o),r=t,s=o,l="L",this),this.l=(e,t)=>this.L(e+r,t+s),this.H=e=>this.L(e,s),this.h=e=>this.H(e+r),this.V=e=>this.L(r,e),this.v=e=>this.V(e+s),this.Z=()=>(e.closePath(),r=t,s=o,l="Z",this),this.z=()=>this.Z(),this.C=(t,o,i,a,c,u)=>(e.bezierCurveTo(t,o,i,a,c,u),r=c,s=u,n={x:2*c-i,y:2*u-a},l="C",this),this.c=(e,t,o,n,i,l)=>this.C(e+r,t+s,o+r,n+s,i+r,l+s),this.S=(e,t,o,n)=>{const{x:r,y:i}=a();return this.C(r,i,e,t,o,n)},this.s=(e,t,o,n)=>this.S(e+r,t+s,o+r,n+s),this.Q=(t,o,i,a)=>(e.quadraticCurveTo(t,o,i,a),r=i,s=a,n={x:2*i-t,y:2*a-o},l="Q",this),this.q=(e,t,o,n)=>this.Q(e+r,t+s,o+r,n+s),this.T=(e,t)=>{const{x:o,y:n}=a();return this.Q(o,n,e,t)},this.t=(e,t)=>this.T(e+r,t+s),this.A=(t,o,n,a,c,u,h)=>(i(e,r,s,t,o,n,a,c,u,h),r=u,s=h,l="A",this),this.a=(e,t,o,n,i,l,a)=>this.A(e,t,o,n,i,l+r,a+s)}}},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.InlineIcon=void 0;const s=i(o(71)),l=o(15);class a extends l.Inline{constructor(e){super(),this._icon=e||{}}width({ctx:e}){const t=this._icon;if(t.width)return t.width;if(t.font&&s.check(t.font,t.content||"")){e.save(),e.canvas.style.letterSpacing="normal";try{return e.font=t.font||e.font,e.measureText(t.content||"").width}finally{e.canvas.style.letterSpacing="",e.restore()}}return 0}font(){var e;return null!==(e=this._icon.font)&&void 0!==e?e:null}color(){var e;return null!==(e=this._icon.color)&&void 0!==e?e:null}canDraw(){const e=this._icon;return!e.font||s.check(e.font,e.content||"")}onReady(e){const t=this._icon;t.font&&!s.check(t.font,t.content||"")&&s.load(t.font,t.content||"",e)}draw({ctx:e,canvashelper:t,rect:o,offset:n,offsetLeft:r,offsetRight:i,offsetTop:s,offsetBottom:l}){const a=this._icon;if(a.content){e.canvas.style.letterSpacing="normal";try{e.font=e.font,t.fillTextRect(e,a.content,o.left,o.top,o.width,o.height,{offset:n+1,padding:{left:r,right:i,top:s,bottom:l}})}finally{e.canvas.style.letterSpacing=""}}}canBreak(){return!1}toString(){return""}}t.InlineIcon=a},function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.InlinePath2D=void 0;const s=i(o(40)),l=o(15),a=o(8);class c extends l.Inline{constructor({path:e,width:t,height:o,color:n}){super();const r=s.getPath2D();this._path=new r(e),this._width=t,this._height=o,this._color=n}width(e){return this._width}font(){return null}color(){var e;return null!==(e=this._color)&&void 0!==e?e:null}canDraw(){return!0}onReady(e){}draw({ctx:e,rect:t,offset:o,offsetLeft:n,offsetRight:r,offsetTop:i,offsetBottom:s}){o++;const l={left:n,right:r,top:i,bottom:s};e.save();try{e.beginPath(),e.rect(t.left,t.top,t.width,t.height),e.clip();const n=a.calcStartPosition(e,t,this._width,this._height,{offset:o,padding:l});e.translate(n.x,n.y),e.fill(this._path)}finally{e.restore()}}canBreak(){return!1}toString(){return""}}t.InlinePath2D=c},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineSvg=void 0;const n=o(0),r=o(73);function i(e){const t="string"==typeof e?e:(new XMLSerializer).serializeToString(e);return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(t)}function s(e){return"string"==typeof e?(new DOMParser).parseFromString(e,"image/svg+xml").children[0]:e}class l extends r.InlineImage{constructor({svg:e,width:t,height:o}){var r,l;const a=n.then(e,s),c=n.isPromise(a)?void 0:null!==(r=a.getAttribute("width"))&&void 0!==r?r:void 0,u=n.isPromise(a)?void 0:null!==(l=a.getAttribute("height"))&&void 0!==l?l:void 0,h=null!=c?Number(c):void 0,d=null!=u?Number(u):void 0;super({src:n.then(e,i),width:t||h,height:o||d,imageWidth:h,imageHeight:d})}canBreak(){return!1}toString(){return""}}t.InlineSvg=l},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipHandler=void 0;const n=o(39),r=o(159),i=o(0),s={"overflow-text":e=>new r.Tooltip(e)};t.TooltipHandler=class{constructor(e){this._grid=e,this._tooltipInstances={},this._bindGridEvent(e)}dispose(){const e=this._tooltipInstances;for(const t in e)e[t].dispose();delete this._tooltipInstances,this._attachInfo=null}_attach(e,t){const o=this._attachInfo,n=this._getTooltipInstanceInfo(e,t);if(!o||n&&o.instance===n.instance||(o.instance.detachTooltipElement(),this._attachInfo=null),!n)return;const{instance:r}=n;r.attachTooltipElement(e,t,n.content);const i=this._grid.getCellRange(e,t);this._attachInfo={range:i,instance:r}}_move(e,t){const o=this._attachInfo;if(!o||!i.cellInRange(o.range,e,t))return;const{instance:n}=o;n.moveTooltipElement(e,t)}_detach(){const e=this._attachInfo;if(!e)return;const{instance:t}=e;t.detachTooltipElement(),this._attachInfo=null}_isAttachCell(e,t){const o=this._attachInfo;return!!o&&i.cellInRange(o.range,e,t)}_bindGridEvent(e){e.listen(n.LG_EVENT_TYPE.MOUSEOVER_CELL,e=>{e.related&&this._isAttachCell(e.col,e.row)||this._attach(e.col,e.row)}),e.listen(n.LG_EVENT_TYPE.MOUSEOUT_CELL,e=>{e.related&&this._isAttachCell(e.related.col,e.related.row)||this._detach()}),e.listen(n.LG_EVENT_TYPE.SELECTED_CELL,e=>{this._isAttachCell(e.col,e.row)&&this._detach()}),e.listen(n.LG_EVENT_TYPE.SCROLL,()=>{const e=this._attachInfo;e&&this._move(e.range.start.col,e.range.start.row)}),e.listen(n.LG_EVENT_TYPE.CHANGED_VALUE,e=>{this._isAttachCell(e.col,e.row)&&(this._detach(),this._attach(e.col,e.row))})}_getTooltipInstanceInfo(e,t){const o=this._grid,n=this._tooltipInstances,r=function(e,t,o){const n=e.getCellOverflowText(t,o);return n?{type:"overflow-text",content:n}:null}(o,e,t);if(!r)return null;const{type:i}=r;return{instance:n[i]||(n[i]=s[i](o)),type:i,content:r.content}}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tooltip=void 0;const n=o(160),r=o(161);class i extends n.BaseTooltip{createTooltipElementInternal(){return new r.TooltipElement}}t.Tooltip=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTooltip=void 0,t.BaseTooltip=class{constructor(e){this._grid=e}dispose(){this.detachTooltipElement(),this._tooltipElement&&this._tooltipElement.dispose(),this._tooltipElement=void 0}_getTooltipElement(){return this._tooltipElement?this._tooltipElement:this._tooltipElement=this.createTooltipElementInternal()}attachTooltipElement(e,t,o){this._getTooltipElement().attach(this._grid,e,t,o)}moveTooltipElement(e,t){this._getTooltipElement().move(this._grid,e,t)}detachTooltipElement(){this._getTooltipElement()._detach()}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipElement=void 0;const n=o(3),r=o(11),i="cheetah-grid__tooltip-element",s=i+"--hidden",l=i+"--shown";t.TooltipElement=class{constructor(){this._handler=new n.EventHandler;const e=this._rootElement=function(){o(162);const e=r.createElement("div",{classList:[i,s]}),t=r.createElement("pre",{classList:["cheetah-grid__tooltip-element__content"]});return e.appendChild(t),e}();this._messageElement=e.querySelector(".cheetah-grid__tooltip-element__content")}dispose(){this.detach();const e=this._rootElement;e.parentElement&&e.parentElement.removeChild(e),this._handler.dispose(),delete this._rootElement,delete this._messageElement}attach(e,t,o,n){const r=this._rootElement,i=this._messageElement;r.classList.remove(l),r.classList.add(s),this._attachCell(e,t,o)?(r.classList.add(l),r.classList.remove(s),i.textContent=n):this._detach()}move(e,t,o){const n=this._rootElement;this._attachCell(e,t,o)?(n.classList.add(l),n.classList.remove(s)):this._detach()}detach(){this._detach()}_detach(){const e=this._rootElement;e.parentElement&&(e.classList.remove(l),e.classList.add(s))}_attachCell(e,t,o){const n=this._rootElement,{element:r,rect:i}=e.getAttachCellsArea(e.getCellRange(t,o)),{bottom:s,left:l,width:a}=i,{frozenRowCount:c,frozenColCount:u}=e;if(o>=c&&c>0){const{rect:o}=e.getAttachCellsArea(e.getCellRange(t,c-1));if(s<o.bottom)return!1}else if(s<0)return!1;if(t>=u&&u>0){const{rect:t}=e.getAttachCellsArea(e.getCellRange(u-1,o));if(l<t.right)return!1}else if(l<0)return!1;const{offsetHeight:h,offsetWidth:d}=r;return!(h<s||d<l||(n.style.top=s.toFixed()+"px",n.style.left=(l+a/2).toFixed()+"px",n.style.minWidth=a.toFixed()+"px",n.parentElement!==r&&r.appendChild(n),0))}}},function(e,t,o){var n=o(5),r=o(163);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};n(r,i),e.exports=r.locals||{}},function(e,t,o){"use strict";o.r(t);var n=o(2),r=o.n(n)()(!1);r.push([e.i,"@-webkit-keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}@keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}.cheetah-grid__tooltip-element{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:3px;background-color:#232f34;padding:8px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff}.cheetah-grid__tooltip-element--hidden{opacity:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:opacity 75ms linear;transition:opacity 75ms linear}.cheetah-grid__tooltip-element--shown{opacity:1;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out;animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out}.cheetah-grid__tooltip-element__content{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;width:100%;display:block;white-space:pre-wrap;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box}",""]),t.default=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInternal=void 0,t.getInternal=function(){return console.warn("use internal!!"),{color:o(74),sort:o(60),calc:o(29),symbolManager:o(1),path2DManager:o(40)}}}])},"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.cheetahGrid=o():t.cheetahGrid=o()}).call("undefined"!=typeof global?global:window,"undefined"!=typeof global?global:window);
//# sourceMappingURL=cheetahGrid.min.js.map